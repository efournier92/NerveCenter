<div style="text-align:right;">
  <ng-click ng-click="openMainModal()"> 
    <img id="mainModalIcon" src="img/_x.png" height="25px" width="25px" style="margin-right:10px;margin-top:5px;margin-bottom:-3px;">
  </ng-click>
  <ng-click ng-click="openMainModal()"> 
    <img id="mainModalIcon" src="img/_unlocked.png" height="25px" width="25px" style="margin-right:10px;margin-top:5px;margin-bottom:-3px;">
  </ng-click>
  <ng-click ng-click="openMainModal()"> 
    <img id="mainModalIcon" src="img/_options.png" height="25px" width="25px" style="margin-right:20px;margin-top:5px;margin-bottom:-3px;">
  </ng-click>
</div>

<div gridster="gridOptions">
  <ul>
    <li gridster-item 
     ng-repeat="widget in widgets track by $index"
     row="widget.row"
     col="widget.col">
      <ng-click ng-click="logIt(gridsterItem);"> 
        <img id="widgetIcon" src={{widget.icon}}>
        <img id="x-delete" ng-show="deleteEnabled" 
                           ng-click="deleteWidget(widget)" src=img/xDelete.png">
      </ng-click>
    </li>
  </ul>
</div>

<script type="text/ng-template" id="mainModal.html">
<uib-tabset class="main-modal" active="active" style="overflow:scroll;background-color:black;height:80vh;">
    <uib-tab class="main-modal-tab" heading="Add Widget">
      <form ng-submit="createWidget()" ng-controller="dashboardCtrl">
        <div class="row modal-form-icon-container">
          <div class="col-xs-6 modal-body-form">
            <input type="text" ng-model="widgetUrl" name="widgetUrl" placeholder="Paste URL" onfocus="this.placeholder = ''" style="text-align:center;" /><br />
            <input type="submit" class="btn btn-info" value="Add Widget" />
          </div>
          <div class="col-xs-6 selected-icon-container">
            <img src={{selectedIcon}} class="selected-icon">
          </div>
        </div>
        <div class="gridster-modal" gridster="gridsterModalOptions">
          <ul>
            <li gridster-item="item" ng-repeat="icon in allIcons">
              <ng-click ng-click="selectIcon(icon.icon);"> 
                <img src={{icon.icon}} class="gridster-modal-icon" alt="widget"</ng-click>
            </li>
          </ul>
        </div>
      </form>
    </uib-tab>

    <uib-tab heading="Export" style="height:100%">
    <div ng-controller="dashboardCtrl" style="height:100%">
      <div select-text class="" style="background:white;color:black;height:250px;width:80%;margin:40px 80px;overflow: scroll;">
        {{widgets}}
      </div>
      <h4 style="text-align:center;">
        Copy the text above and paste it someplace safe!
      </h4>
    </div>
    </uib-tab>

    <uib-tab class="main-modal-tab" heading="Import" style="height:100%;">
    <div ng-controller="dashboardCtrl" style="height:100%;">
    <textarea ng-model="widgetString" style="background:white;color:black;height:250px;width:80%;margin:40px 80px;overflow: scroll;" placeholder="Paste the text you exported here...">
    </textarea>
    </div>
      <div style="text-align:center">
        <button ng-click="importWidgets()" class="btn btn-danger" style="width:40%">Import</button>
      </div>
    </uib-tab>


    <uib-tab heading="Register">
      <form ng-submit="$reg.onSubmit()" class="main-modal-tab">
        <div class="form-group">
          <label for="email">Email address</label>
          <input type="email" class="form-control" id="email" placeholder="Enter email" ng-model="$reg.credentials.email">
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" class="form-control" id="password" placeholder="Password" ng-model="$reg.credentials.password">
        </div>
        <button type="submit" class="btn btn-default">Sign in!</button>
      </form>
    </uib-tab>

    <uib-tab class="modal-content" heading="Logout" style="text-align:center;">
      <h3 style="text-align:center;margin-bottom:25px;">You Sure?</h3>
      <div style="text-align:center;">
        <button type="button" id="logout-button" class="btn btn-danger">Logout</button>
      </div>
    </uib-tab>
  </uib-tabset>

</script>

<script type="text/ng-template" id="loginModal.html">
<div class="modal-header"
      <button type="button" class="btn btn-info" ng-click="register()">Register</button>
      </div>
    </div>
    <div class="modal-body">
      <form ng-submit="$reg.onSubmit()">
        <div class="form-group">
          <label for="email">Email address</label>
          <input type="email" class="form-control" id="email" placeholder="Enter email" ng-model="$reg.credentials.email">
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" class="form-control" id="password" placeholder="Password" ng-model="$reg.credentials.password">
        </div>
        <button type="submit" class="btn btn-default">Sign in!</button>
      </form>
  </div>
</script>
