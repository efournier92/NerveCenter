{"version":3,"sources":["lib.js","main.js","app.min.js/lib.js","app.min.js/main.js","auth/auth.controller.js","auth/auth.service.js","dashboard/dashboard.controller.js","dashboard/dashboard.js","app.min.js/auth/auth.controller.js","app.min.js/auth/auth.service.js","app.min.js/dashboard/dashboard.controller.js","app.min.js/dashboard/dashboard.js","common/directives/clockWidget.directive.js","common/directives/linkWidget.directive.js","common/directives/scrollDown.directive.js","common/directives/selectText.directive.js","common/services/apiData.service.js","dashboard/gridster/allIcons.js","dashboard/gridster/gridster.options.js","dashboard/gridster/gridsterModal.options.js","dashboard/nc-calc/gridster-buttons.options.js","dashboard/nc-calc/nc-calc-buttons.factory.js","dashboard/nc-calc/nc-calc.controller.js","dashboard/nc-calc/nc-calc.directive.js","node_modules/angular-gridster/Gruntfile.js","node_modules/angular-gridster/karma.conf.js","node_modules/angular-gridster/ptor.conf.js","app.min.js/common/directives/clockWidget.directive.js","app.min.js/common/directives/linkWidget.directive.js","app.min.js/common/directives/scrollDown.directive.js","app.min.js/common/directives/selectText.directive.js","app.min.js/common/services/apiData.service.js","app.min.js/dashboard/gridster/allIcons.js","app.min.js/dashboard/gridster/gridster.options.js","app.min.js/dashboard/gridster/gridsterModal.options.js","app.min.js/dashboard/nc-calc/gridster-buttons.options.js","app.min.js/dashboard/nc-calc/nc-calc-buttons.factory.js","app.min.js/dashboard/nc-calc/nc-calc.controller.js","app.min.js/dashboard/nc-calc/nc-calc.directive.js","app.min.js/node_modules/angular-gridster/Gruntfile.js","app.min.js/node_modules/angular-gridster/karma.conf.js","app.min.js/node_modules/angular-gridster/ptor.conf.js","app.min.js/node_modules/angular-gridster/dist/angular-gridster.min.js","app.min.js/node_modules/angular-gridster/src/angular-gridster.js","node_modules/angular-gridster/dist/angular-gridster.min.js","node_modules/angular-gridster/demo/dashboard/script.js","node_modules/angular-gridster/demo/main/script.js","node_modules/angular-gridster/src/angular-gridster.js","app.min.js/node_modules/angular-gridster/demo/dashboard/script.js","app.min.js/node_modules/angular-gridster/demo/main/script.js","app.min.js/node_modules/angular-gridster/test/e2e/gridster.js","app.min.js/node_modules/angular-gridster/test/spec/gridster-directive.js","app.min.js/node_modules/angular-gridster/test/spec/gridster-item.js","app.min.js/node_modules/angular-gridster/test/spec/gridster.js","node_modules/angular-gridster/test/e2e/gridster.js","node_modules/angular-gridster/test/spec/gridster-directive.js","node_modules/angular-gridster/test/spec/gridster-item.js","node_modules/angular-gridster/test/spec/gridster.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.min.js","sourcesContent":["export const karma2 = \"Bitch\";\n// export function square(x) {\n//   return x * x;\n// }\n// export function diag(x, y) {\n//   return sqrt(square(x) + square(y));\n// }\n\n","'use strict';\n\nimport './dashboard/dashboard';\n// import auth from './auth/dashboard';\n\nangular\n  .module('nerveCenter', ['ngRoute', 'ngAnimate', 'ngSanitize', 'ui.bootstrap',\n                          'gridster', 'infinite-scroll', 'ds.clock',\n                          'nerveCenter.dashboard'])\n  .config(['$routeProvider', '$locationProvider', config])\n  .run(['$rootScope', '$location', '$uibModal', 'auth', run]);\n\nfunction config($routeProvider, $locationProvider) {\n  $routeProvider\n    .when('/', {\n      templateUrl: 'dashboard/dashboard.view.html',\n      controller: 'dashboardCtrl',\n    })\n    .otherwise({redirectTo: '/'});\n  // HTML5 History API\n  $locationProvider.html5Mode(true);\n}\n\nfunction run($rootScope, $location, $http, auth) {\n  $rootScope.$on('$routeChangeStart', (event, nextRoute, currentRoute) => {\n    if ($location.path() === '/profile' && !auth.isLoggedIn()) {\n      $location.path('/');\n    }\n  });\n}\n\n","export const karma2 = \"Bitch\";\n// export function square(x) {\n//   return x * x;\n// }\n// export function diag(x, y) {\n//   return sqrt(square(x) + square(y));\n// }","'use strict';\n\nimport './dashboard/dashboard';\n// import auth from './auth/dashboard';\n\nangular.module('nerveCenter', ['ngRoute', 'ngAnimate', 'ngSanitize', 'ui.bootstrap', 'gridster', 'infinite-scroll', 'ds.clock', 'nerveCenter.dashboard']).config(['$routeProvider', '$locationProvider', config]).run(['$rootScope', '$location', '$uibModal', 'auth', run]);\n\nfunction config($routeProvider, $locationProvider) {\n  $routeProvider.when('/', {\n    templateUrl: 'dashboard/dashboard.view.html',\n    controller: 'dashboardCtrl'\n  }).otherwise({ redirectTo: '/' });\n  // HTML5 History API\n  $locationProvider.html5Mode(true);\n}\n\nfunction run($rootScope, $location, $http, auth) {\n  $rootScope.$on('$routeChangeStart', (event, nextRoute, currentRoute) => {\n    if ($location.path() === '/profile' && !auth.isLoggedIn()) {\n      $location.path('/');\n    }\n  });\n}","(function () {\n  angular\n    .module('nerveCenter')\n    .controller('authCtrl', authCtrl);\n\n  authCtrl.$inject = ['$location', 'auth', 'apiData'];\n  function authCtrl($location, auth, apiData) {\n    var $auth = this;\n\n    $auth.credentials = {\n      email : \"\",\n      password : \"\"\n    };\n\n    $auth.onReg = function () {\n      auth\n        .register($auth.credentials)\n        .error(function(err) {\n          alert(\"Sorry, you didn't fill in both fields.\\nPlease try again.\");\n        })\n        .then(function () {\n          auth.login($auth.credentials)\n          $location.path('../dashboard/dashboard.view');\n        });\n    };\n\n    $auth.user = {};\n\n    $auth.onLogin = function () {\n      auth\n        .login($auth.credentials)\n        .error(function(err) {\n          alert(\"Sorry, the username and password you entered don't match.\\nPlease try again.\");\n        })\n        .then(function () {\n          $location.path('../dashboard/dashboard.view');\n        });\n    }\n  }\n\n})();\n","(function () {\n\n  angular\n    .module('nerveCenter')\n    .service('auth', auth);\n\n  auth.$inject = ['$http', '$window'];\n  function auth($http, $window) {\n\n    var saveToken = function(token) {\n      $window.localStorage['mean-token'] = token;\n    };\n\n    var getToken = function () {\n      return $window.localStorage['mean-token'];\n    };\n\n    var isLoggedIn = function () {\n      var token = getToken();\n      var payload;\n\n      if(token){\n        payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n\n        return payload.exp > Date.now() / 1000;\n      } else {\n        return false;\n      }\n    };\n\n    var currentUser = function () {\n      if(isLoggedIn()){\n        var token = getToken();\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        return {\n          id : payload._id,\n          email : payload.email,\n          widgets : payload.widgets\n        };\n      }\n    };\n\n    register = function(user) {\n      return $http.post('/api/register', user).success(function(data){\n      });\n    };\n\n    login = function(user) {\n      return $http.post('/api/login', user).success(function(data) {\n        saveToken(data.token);\n      });\n    };\n\n    logout = function () {\n      $window.localStorage.removeItem('mean-token');\n    };\n\n    return {\n      currentUser : currentUser,\n      saveToken : saveToken,\n      getToken : getToken,\n      isLoggedIn : isLoggedIn,\n      register : register,\n      login : login,\n      logout : logout\n    };\n  }\n\n})();\n\n","(function () {\n\n  angular\n  .module('nerveCenter')\n  .controller('dashboardCtrl', dashboardCtrl);\n\n  function dashboardCtrl($scope, $http, $location,\n    $uibModal, $log, $document, $filter, $window, apiData, auth) {\n\n      var $dshBrd = this;\n\n      $scope.draggable = false;\n      $scope.deleteEnabled = false;\n      $scope.urlsEnabled = true;\n      $scope.areIconsLoaded = false;\n      $scope.deleteIcon = 'img/_x.png';\n      $scope.lockIcon = 'img/_locked.png';\n\n      updateWidgets();\n\n      function instantiateGridster() {\n        var width = this.window.outerWidth;\n        var adjustedGridOptions = gridOptions;\n        if (width > 500) {\n          adjustedGridOptions.columns = 7;\n        } else {\n          adjustedGridOptions.columns = 3;\n        }\n        return adjustedGridOptions;\n      }\n\n      function checkScreenSize() {\n        var start = $window.outerWidth;\n        if (start > 500) {\n          $dshBrd.screenSize = 'lg';\n        } else {\n          $dshBrd.screenSize = 'sm';\n        }\n      }\n\n      function updateToolIconSize() {\n        $scope.toolIconSize =\n        $dshBrd.screenSize == 'sm'\n        ? $scope.toolIconSize = 28 + 'px'\n        : $scope.toolIconSize = 20 + 'px';\n      }\n\n      updateToolIconSize();\n\n      function updateWidgets() {\n        checkScreenSize();\n        $dshBrd.lastScreenSize = inputScreenSize($window.outerWidth);\n        apiData.getProfile()\n        .success(function (user) {\n          $dshBrd.widgetsLg = angular.fromJson(user.widgetsLg);\n          $dshBrd.widgetsSm = angular.fromJson(user.widgetsSm);\n        })\n        .error(function () {\n          $scope.openAuthModal();\n        })\n        .finally(function () {\n          $scope.widgets =\n          $dshBrd.screenSize == 'lg'\n          ? $dshBrd.widgetsLg\n          : $dshBrd.widgetsSm;\n\n          $scope.gridOptions = instantiateGridster();\n          $dshBrd.currentWidth = $window.outerWidth;\n\n          getIcons();\n        });\n      }\n\n      $dshBrd.saveWidgets = function () {\n        checkScreenSize();\n\n        if ($dshBrd.screenSize == 'lg') {\n          $dshBrd.widgetsLg = $scope.widgets;\n        } else {\n          $dshBrd.widgetsSm = $scope.widgets;\n        }\n\n        data = [\n          $dshBrd.widgetsLg,\n          $dshBrd.widgetsSm\n        ];\n\n        apiData.updateWidgets(data)\n        .success(function (data) {\n          console.log('Successfully updated widgets')\n        })\n        .error(function (e) {\n          console.log(e);\n        });\n      }\n\n      $scope.createWidget = function () {\n        var widgetUrl = $scope.widgetUrl;\n        var widgetWeight = $scope.widgetWeight;\n        var widgetIcon = $scope.selectedIcon;\n\n        var defaultIcon = \"img/_blank.png\";\n        // Form validation\n        if (!widgetUrl && widgetIcon === defaultIcon) {\n          window.alert(\"Please Enter URL and Select an Icon\");\n          return;\n        } else if (!widgetUrl) {\n          window.alert(\"Please Enter URL\");\n          return;\n        } else if (widgetIcon === defaultIcon) {\n          window.alert(\"Please Select an Icon\");\n          return;\n        }\n\n        function pushNewWidget(size) {\n          if (size === 'lg') {\n            var len = $dshBrd.widgetsLg.length;\n            var columns = 7;\n            var newWidget = createNewWidget(len, columns);\n            $dshBrd.widgetsLg.push(newWidget);\n          } else if (size === 'sm') {\n            var len = $dshBrd.widgetsSm.length;\n            var columns = 3;\n            var newWidget = createNewWidget(len, columns);\n            $dshBrd.widgetsSm.push(newWidget);\n          }\n        }\n\n        function createNewWidget(len, columns) {\n          var newWidget = {\n            type: 'link-widget',\n            sizeX: 1,\n            sizeY: 1,\n            icon: widgetIcon,\n            url: widgetUrl,\n            row: Math.floor(len / columns),\n            col: (len % columns) + 1\n          }\n          return newWidget;\n        }\n\n        pushNewWidget('lg');\n        pushNewWidget('sm');\n\n        $dshBrd.saveWidgets();\n        $location.path('dashboard.view');\n      }\n\n      $scope.importWidgets = function () {\n        var widgetString = angular.fromJson($scope.widgetString);\n        $scope.widgets = widgetString;\n\n        checkScreenSize();\n        if ($dshBrd.screenSize == 'lg') {\n          $dshBrd.widgetsLg = widgetString;\n        } else {\n          $dshBrd.widgetsSm = widgetString;\n        }\n\n        $dshBrd.saveWidgets();\n        $location.path('dashboard.view');\n      }\n\n      $scope.deleteWidget = function (widget) {\n        $scope.widgets = $scope.widgets.filter(function (element){\n          return element.url != widget.url;\n        });\n\n        $dshBrd.saveWidgets();\n      }\n\n      $scope.toggleDraggable = function () {\n        gridOptions.draggable.enabled = !gridOptions.draggable.enabled;\n        $scope.urlsEnabled = !$scope.urlsEnabled;\n\n        if ($scope.deleteEnabled) {\n          $scope.deleteEnabled = false;\n          $scope.deleteIcon = 'img/_x.png';\n        }\n\n        if (gridOptions.draggable.enabled) {\n          $scope.lockIcon = 'img/_lockedRed.png';\n        } else {\n          $scope.lockIcon = 'img/_locked.png';\n        }\n\n        if (!gridOptions.draggable.enabled)\n        $dshBrd.saveWidgets();\n      }\n\n      $scope.toggleDelete = function () {\n        $scope.deleteEnabled = !$scope.deleteEnabled;\n        $scope.urlsEnabled = !$scope.urlsEnabled;\n\n        if ($scope.deleteEnabled) {\n          $scope.deleteIcon = 'img/_xRed.png';\n        } else {\n          $scope.deleteIcon = 'img/_x.png';\n        }\n\n        if (gridOptions.draggable.enabled) {\n          gridOptions.draggable.enabled = false;\n          $scope.lockIcon = 'img/_locked.png';\n        }\n      }\n\n      function getIcons() {\n        apiData.getIcons()\n        .success(function (icons) {\n          $dshBrd.icons = icons;\n        })\n        .finally(function () {\n          $dshBrd.allIcons = [];\n          var len = $dshBrd.icons.length;\n\n          for (i = 0; i < len; i++) {\n            var iconObj = {};\n            var iconString = 'img/ico/' + $dshBrd.icons[i];\n            iconObj.path = iconString;\n            $dshBrd.allIcons.push(iconObj);\n          }\n          $scope.shownIcons = [];\n          $scope.loadSomeIcons();\n        });\n      }\n\n      $scope.loadAllIcons = function () {\n        var allIcons = [];\n        var totalIcons = $dshBrd.allIcons.length - 1;\n        $scope.areIconsLoaded = true;\n\n        for (var i = 0; i <= totalIcons; i++) {\n          var newIco = $dshBrd.allIcons[i]\n          allIcons.push(newIco);\n        }\n        $scope.shownIcons = allIcons;\n      }\n\n      $scope.loadSomeIcons = function () {\n        for (var i = 0; i <= 24; i++) {\n          var newIco = $dshBrd.allIcons[i]\n          $scope.shownIcons.push(newIco);\n        }\n      }\n\n      $scope.gridsterModalOptions = gridsterModalOptions;\n      $scope.selectedIcon = \"img/_blank.png\";\n\n      $scope.selectIcon = function (iconPath) {\n        $scope.selectedIcon = iconPath;\n      }\n\n      $scope.openMainModal = function (size, parentSelector) {\n        gridOptions.draggable.enabled = false;\n        $scope.deleteEnabled = false;\n\n        var parentElem = parentSelector ?\n        angular.element($document[0].querySelector('.modal-demo')) : undefined;\n\n        var modalInstance = $uibModal.open({\n          templateUrl: 'mainModal.html',\n          controller: 'dashboardCtrl',\n          size: 'lg',\n          appendTo: parentElem\n        });\n      };\n\n      $scope.openAuthModal = function (size, parentSelector) {\n        var parentElem = parentSelector ?\n        angular.element($document[0].querySelector('.main-modal')) : undefined;\n\n        var modalInstance = $uibModal.open({\n          templateUrl: 'authModal.html',\n          controller: 'authCtrl',\n          controllerAs: '$auth',\n          appendTo: parentElem,\n        });\n      };\n\n      $scope.onLogout = function () {\n        auth.logout();\n        $location.path('dashboard.view');\n      }\n\n      $scope.syncWidgets = function () {\n        $dshBrd.widgetsLg = $scope.widgets;\n        $dshBrd.widgetsSm = $scope.widgets;\n        $dshBrd.saveWidgets();\n        $location.path('dashboard.view');\n      }\n\n      $scope.resetWidgets = function () {\n        checkScreenSize();\n\n        apiData.getDefaultGrid()\n        .success(function (defaultGrid) {\n          defaultGrid = angular.fromJson(defaultGrid);\n          $scope.widgets = defaultGrid;\n          if ($dshBrd.screenSize == 'lg') {\n            $dshBrd.widgetsLg = defaultGrid;\n          } else {\n            $dshBrd.widgetsSm = defaultGrid;\n          }\n        })\n        .error(function (e) {\n          console.log(e);\n        })\n        .finally(function () {\n          $dshBrd.saveWidgets();\n          $location.path('dashboard.view');\n        });\n      }\n\n      $scope.clearGrid = function () {\n        $scope.widgets = [];\n        if ($dshBrd.screenSize == 'lg') {\n          $dshBrd.widgetsLg = [];\n        } else {\n          $dshBrd.widgetsSm = [];\n        }\n        $dshBrd.saveWidgets();\n        $location.path('dashboard.view');\n      }\n\n      var resizeBreaks = {\n        'sm' : 500\n      };\n\n      function inputScreenSize(width) {\n        if (width > 500) {\n          return 'lg';\n        } else {\n          return 'sm';\n        }\n      }\n\n      angular.element($window).bind('resize', function () {\n        var oldWidth = $dshBrd.currentWidth;\n        var oldSize = $dshBrd.lastScreenSize;\n        var newWidth = $window.outerWidth;\n        var newSize = inputScreenSize(newWidth);\n\n        if (oldSize !== newSize) {\n          $location.path('dashboard.view');\n        }\n\n        $dshBrd.lastScreenSize = newSize;\n      });\n    };\n  })();\n","'use strict';\n\nimport gridster from 'angular-gridster';\nimport apiData from './common/services/apiData.service';\nimport { dashboardCtrl } from './dashboard/dashboard.controller';\n\nconst dashboard = angular.module('nerveCenter.dashboard', \n  ['$scope', '$http', '$location', '$uibModal', '$log',\n   '$document', '$filter', '$window', apiData, auth]);\n\ndashboard.controller('dashboardCtrl', dashboardCtrl);\n\nexport { dashboard };\n\n","(function () {\n  angular.module('nerveCenter').controller('authCtrl', authCtrl);\n\n  authCtrl.$inject = ['$location', 'auth', 'apiData'];\n  function authCtrl($location, auth, apiData) {\n    var $auth = this;\n\n    $auth.credentials = {\n      email: \"\",\n      password: \"\"\n    };\n\n    $auth.onReg = function () {\n      auth.register($auth.credentials).error(function (err) {\n        alert(\"Sorry, you didn't fill in both fields.\\nPlease try again.\");\n      }).then(function () {\n        auth.login($auth.credentials);\n        $location.path('../dashboard/dashboard.view');\n      });\n    };\n\n    $auth.user = {};\n\n    $auth.onLogin = function () {\n      auth.login($auth.credentials).error(function (err) {\n        alert(\"Sorry, the username and password you entered don't match.\\nPlease try again.\");\n      }).then(function () {\n        $location.path('../dashboard/dashboard.view');\n      });\n    };\n  }\n})();","(function () {\n\n  angular.module('nerveCenter').service('auth', auth);\n\n  auth.$inject = ['$http', '$window'];\n  function auth($http, $window) {\n\n    var saveToken = function (token) {\n      $window.localStorage['mean-token'] = token;\n    };\n\n    var getToken = function () {\n      return $window.localStorage['mean-token'];\n    };\n\n    var isLoggedIn = function () {\n      var token = getToken();\n      var payload;\n\n      if (token) {\n        payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n\n        return payload.exp > Date.now() / 1000;\n      } else {\n        return false;\n      }\n    };\n\n    var currentUser = function () {\n      if (isLoggedIn()) {\n        var token = getToken();\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        return {\n          id: payload._id,\n          email: payload.email,\n          widgets: payload.widgets\n        };\n      }\n    };\n\n    register = function (user) {\n      return $http.post('/api/register', user).success(function (data) {});\n    };\n\n    login = function (user) {\n      return $http.post('/api/login', user).success(function (data) {\n        saveToken(data.token);\n      });\n    };\n\n    logout = function () {\n      $window.localStorage.removeItem('mean-token');\n    };\n\n    return {\n      currentUser: currentUser,\n      saveToken: saveToken,\n      getToken: getToken,\n      isLoggedIn: isLoggedIn,\n      register: register,\n      login: login,\n      logout: logout\n    };\n  }\n})();","(function () {\n\n  angular.module('nerveCenter').controller('dashboardCtrl', dashboardCtrl);\n\n  function dashboardCtrl($scope, $http, $location, $uibModal, $log, $document, $filter, $window, apiData, auth) {\n\n    var $dshBrd = this;\n\n    $scope.draggable = false;\n    $scope.deleteEnabled = false;\n    $scope.urlsEnabled = true;\n    $scope.areIconsLoaded = false;\n    $scope.deleteIcon = 'img/_x.png';\n    $scope.lockIcon = 'img/_locked.png';\n\n    updateWidgets();\n\n    function instantiateGridster() {\n      var width = this.window.outerWidth;\n      var adjustedGridOptions = gridOptions;\n      if (width > 500) {\n        adjustedGridOptions.columns = 7;\n      } else {\n        adjustedGridOptions.columns = 3;\n      }\n      return adjustedGridOptions;\n    }\n\n    function checkScreenSize() {\n      var start = $window.outerWidth;\n      if (start > 500) {\n        $dshBrd.screenSize = 'lg';\n      } else {\n        $dshBrd.screenSize = 'sm';\n      }\n    }\n\n    function updateToolIconSize() {\n      $scope.toolIconSize = $dshBrd.screenSize == 'sm' ? $scope.toolIconSize = 28 + 'px' : $scope.toolIconSize = 20 + 'px';\n    }\n\n    updateToolIconSize();\n\n    function updateWidgets() {\n      checkScreenSize();\n      $dshBrd.lastScreenSize = inputScreenSize($window.outerWidth);\n      apiData.getProfile().success(function (user) {\n        $dshBrd.widgetsLg = angular.fromJson(user.widgetsLg);\n        $dshBrd.widgetsSm = angular.fromJson(user.widgetsSm);\n      }).error(function () {\n        $scope.openAuthModal();\n      }).finally(function () {\n        $scope.widgets = $dshBrd.screenSize == 'lg' ? $dshBrd.widgetsLg : $dshBrd.widgetsSm;\n\n        $scope.gridOptions = instantiateGridster();\n        $dshBrd.currentWidth = $window.outerWidth;\n\n        getIcons();\n      });\n    }\n\n    $dshBrd.saveWidgets = function () {\n      checkScreenSize();\n\n      if ($dshBrd.screenSize == 'lg') {\n        $dshBrd.widgetsLg = $scope.widgets;\n      } else {\n        $dshBrd.widgetsSm = $scope.widgets;\n      }\n\n      data = [$dshBrd.widgetsLg, $dshBrd.widgetsSm];\n\n      apiData.updateWidgets(data).success(function (data) {\n        console.log('Successfully updated widgets');\n      }).error(function (e) {\n        console.log(e);\n      });\n    };\n\n    $scope.createWidget = function () {\n      var widgetUrl = $scope.widgetUrl;\n      var widgetWeight = $scope.widgetWeight;\n      var widgetIcon = $scope.selectedIcon;\n\n      var defaultIcon = \"img/_blank.png\";\n      // Form validation\n      if (!widgetUrl && widgetIcon === defaultIcon) {\n        window.alert(\"Please Enter URL and Select an Icon\");\n        return;\n      } else if (!widgetUrl) {\n        window.alert(\"Please Enter URL\");\n        return;\n      } else if (widgetIcon === defaultIcon) {\n        window.alert(\"Please Select an Icon\");\n        return;\n      }\n\n      function pushNewWidget(size) {\n        if (size === 'lg') {\n          var len = $dshBrd.widgetsLg.length;\n          var columns = 7;\n          var newWidget = createNewWidget(len, columns);\n          $dshBrd.widgetsLg.push(newWidget);\n        } else if (size === 'sm') {\n          var len = $dshBrd.widgetsSm.length;\n          var columns = 3;\n          var newWidget = createNewWidget(len, columns);\n          $dshBrd.widgetsSm.push(newWidget);\n        }\n      }\n\n      function createNewWidget(len, columns) {\n        var newWidget = {\n          type: 'link-widget',\n          sizeX: 1,\n          sizeY: 1,\n          icon: widgetIcon,\n          url: widgetUrl,\n          row: Math.floor(len / columns),\n          col: len % columns + 1\n        };\n        return newWidget;\n      }\n\n      pushNewWidget('lg');\n      pushNewWidget('sm');\n\n      $dshBrd.saveWidgets();\n      $location.path('dashboard.view');\n    };\n\n    $scope.importWidgets = function () {\n      var widgetString = angular.fromJson($scope.widgetString);\n      $scope.widgets = widgetString;\n\n      checkScreenSize();\n      if ($dshBrd.screenSize == 'lg') {\n        $dshBrd.widgetsLg = widgetString;\n      } else {\n        $dshBrd.widgetsSm = widgetString;\n      }\n\n      $dshBrd.saveWidgets();\n      $location.path('dashboard.view');\n    };\n\n    $scope.deleteWidget = function (widget) {\n      $scope.widgets = $scope.widgets.filter(function (element) {\n        return element.url != widget.url;\n      });\n\n      $dshBrd.saveWidgets();\n    };\n\n    $scope.toggleDraggable = function () {\n      gridOptions.draggable.enabled = !gridOptions.draggable.enabled;\n      $scope.urlsEnabled = !$scope.urlsEnabled;\n\n      if ($scope.deleteEnabled) {\n        $scope.deleteEnabled = false;\n        $scope.deleteIcon = 'img/_x.png';\n      }\n\n      if (gridOptions.draggable.enabled) {\n        $scope.lockIcon = 'img/_lockedRed.png';\n      } else {\n        $scope.lockIcon = 'img/_locked.png';\n      }\n\n      if (!gridOptions.draggable.enabled) $dshBrd.saveWidgets();\n    };\n\n    $scope.toggleDelete = function () {\n      $scope.deleteEnabled = !$scope.deleteEnabled;\n      $scope.urlsEnabled = !$scope.urlsEnabled;\n\n      if ($scope.deleteEnabled) {\n        $scope.deleteIcon = 'img/_xRed.png';\n      } else {\n        $scope.deleteIcon = 'img/_x.png';\n      }\n\n      if (gridOptions.draggable.enabled) {\n        gridOptions.draggable.enabled = false;\n        $scope.lockIcon = 'img/_locked.png';\n      }\n    };\n\n    function getIcons() {\n      apiData.getIcons().success(function (icons) {\n        $dshBrd.icons = icons;\n      }).finally(function () {\n        $dshBrd.allIcons = [];\n        var len = $dshBrd.icons.length;\n\n        for (i = 0; i < len; i++) {\n          var iconObj = {};\n          var iconString = 'img/ico/' + $dshBrd.icons[i];\n          iconObj.path = iconString;\n          $dshBrd.allIcons.push(iconObj);\n        }\n        $scope.shownIcons = [];\n        $scope.loadSomeIcons();\n      });\n    }\n\n    $scope.loadAllIcons = function () {\n      var allIcons = [];\n      var totalIcons = $dshBrd.allIcons.length - 1;\n      $scope.areIconsLoaded = true;\n\n      for (var i = 0; i <= totalIcons; i++) {\n        var newIco = $dshBrd.allIcons[i];\n        allIcons.push(newIco);\n      }\n      $scope.shownIcons = allIcons;\n    };\n\n    $scope.loadSomeIcons = function () {\n      for (var i = 0; i <= 24; i++) {\n        var newIco = $dshBrd.allIcons[i];\n        $scope.shownIcons.push(newIco);\n      }\n    };\n\n    $scope.gridsterModalOptions = gridsterModalOptions;\n    $scope.selectedIcon = \"img/_blank.png\";\n\n    $scope.selectIcon = function (iconPath) {\n      $scope.selectedIcon = iconPath;\n    };\n\n    $scope.openMainModal = function (size, parentSelector) {\n      gridOptions.draggable.enabled = false;\n      $scope.deleteEnabled = false;\n\n      var parentElem = parentSelector ? angular.element($document[0].querySelector('.modal-demo')) : undefined;\n\n      var modalInstance = $uibModal.open({\n        templateUrl: 'mainModal.html',\n        controller: 'dashboardCtrl',\n        size: 'lg',\n        appendTo: parentElem\n      });\n    };\n\n    $scope.openAuthModal = function (size, parentSelector) {\n      var parentElem = parentSelector ? angular.element($document[0].querySelector('.main-modal')) : undefined;\n\n      var modalInstance = $uibModal.open({\n        templateUrl: 'authModal.html',\n        controller: 'authCtrl',\n        controllerAs: '$auth',\n        appendTo: parentElem\n      });\n    };\n\n    $scope.onLogout = function () {\n      auth.logout();\n      $location.path('dashboard.view');\n    };\n\n    $scope.syncWidgets = function () {\n      $dshBrd.widgetsLg = $scope.widgets;\n      $dshBrd.widgetsSm = $scope.widgets;\n      $dshBrd.saveWidgets();\n      $location.path('dashboard.view');\n    };\n\n    $scope.resetWidgets = function () {\n      checkScreenSize();\n\n      apiData.getDefaultGrid().success(function (defaultGrid) {\n        defaultGrid = angular.fromJson(defaultGrid);\n        $scope.widgets = defaultGrid;\n        if ($dshBrd.screenSize == 'lg') {\n          $dshBrd.widgetsLg = defaultGrid;\n        } else {\n          $dshBrd.widgetsSm = defaultGrid;\n        }\n      }).error(function (e) {\n        console.log(e);\n      }).finally(function () {\n        $dshBrd.saveWidgets();\n        $location.path('dashboard.view');\n      });\n    };\n\n    $scope.clearGrid = function () {\n      $scope.widgets = [];\n      if ($dshBrd.screenSize == 'lg') {\n        $dshBrd.widgetsLg = [];\n      } else {\n        $dshBrd.widgetsSm = [];\n      }\n      $dshBrd.saveWidgets();\n      $location.path('dashboard.view');\n    };\n\n    var resizeBreaks = {\n      'sm': 500\n    };\n\n    function inputScreenSize(width) {\n      if (width > 500) {\n        return 'lg';\n      } else {\n        return 'sm';\n      }\n    }\n\n    angular.element($window).bind('resize', function () {\n      var oldWidth = $dshBrd.currentWidth;\n      var oldSize = $dshBrd.lastScreenSize;\n      var newWidth = $window.outerWidth;\n      var newSize = inputScreenSize(newWidth);\n\n      if (oldSize !== newSize) {\n        $location.path('dashboard.view');\n      }\n\n      $dshBrd.lastScreenSize = newSize;\n    });\n  };\n})();","'use strict';\n\nimport gridster from 'angular-gridster';\nimport apiData from './common/services/apiData.service';\nimport { dashboardCtrl } from './dashboard/dashboard.controller';\n\nconst dashboard = angular.module('nerveCenter.dashboard', ['$scope', '$http', '$location', '$uibModal', '$log', '$document', '$filter', '$window', apiData, auth]);\n\ndashboard.controller('dashboardCtrl', dashboardCtrl);\n\nexport { dashboard };","(function () {\n\n  angular\n    .module('nerveCenter')\n    .directive('clockWidget', clockWidget);\n\n  function clockWidget() {\n    return {\n      restrict: 'AEC',\n      templateUrl: function (elem, attrs) {\n        return \"/dashboard/widgetTemplates/clock-widget.template.html\";\n      }\n    }\n  };\n})();\n\n","(function () {\n\n  angular\n    .module('nerveCenter')\n    .directive('renderWidget', renderWidget);\n\n  function renderWidget() {\n    return {\n      restrict: 'AEC',\n      templateUrl: function (elem, attrs) {\n        return \"/dashboard/widgetTemplates/\" + attrs.type +\".template.html\";\n      }\n    }\n  };\n})();\n","(function () {\n\n  angular\n  .module('nerveCenter')\n  .directive('scrolly', scrolly);\n\n  function scrolly($window) {\n    return {\n      restrict: 'AEC',\n      link: function (scope, element, attrs) {\n        var raw = element[0];\n\n        element.bind('scroll', function () {\n          if (raw.scrollTop + raw.offsetHeight > raw.scrollHeight) {\n            scope.$apply(attrs.scrolly);\n          }\n        });\n      }\n    };\n  };\n});\n","(function () {\n\n  angular\n    .module('nerveCenter')\n    .directive('selectText', selectText);\n\n  function selectText($window) {\n    return {\n      link: function(scope, element) {\n        element.on('click', function () {\n          var selection = $window.getSelection();        \n          var range = document.createRange();\n          range.selectNodeContents(element[0]);\n          selection.removeAllRanges();\n          selection.addRange(range);\n        });\n      }\n    }\n  }\n\n})();\n\n","const apiData = angular.module('nerveCenter').service('apiData', apiDataService);\napiData.$inject = ['$http', 'auth'];\nexport { apiData };\n\nfunction apiDataService($http, auth) {\n  const getProfile = () => {\n    return $http.get('/api/user', {\n      headers: {\n        Authorization: 'Bearer '+ auth.getToken()\n      }\n    });\n  };\n\n  const updateWidgets = (data) => {\n    return $http.put('/api/user', data, {\n      headers: {\n        Authorization: 'Bearer '+ auth.getToken()\n      }\n    });\n  };\n\n  const getIcons = (data) => {\n    return $http.get('/api/ico', data, {\n      headers: {\n        Authorization: 'Bearer '+ auth.getToken()\n      }\n    });\n  };\n\n  const getDefaultGrid = (data) => {\n    return $http.get('/api/defaultgrid', data, {\n      headers: {\n        Authorization: 'Bearer '+ auth.getToken()\n      }\n    });\n  };\n\n  return {\n    getProfile : getProfile,\n    updateWidgets: updateWidgets,\n    getIcons: getIcons,\n    getDefaultGrid: getDefaultGrid\n  };\n\n}\n\n","var allIcons = [\n  { icon:\"img/BNK.png\" },\n  { icon:\"img/CNN.png\" },\n  { icon:\"img/Drive.png\" },\n  { icon:\"img/FreePress.png\" },\n  { icon:\"img/GitHub.png\" },\n  { icon:\"img/Google.png\" },\n  { icon:\"img/Image.png\" },\n  { icon:\"img/Indeed.png\" },\n  { icon:\"img/Launch.png\" },\n  { icon:\"img/Linked.png\" },\n  { icon:\"img/Notes.png\" },\n  { icon:\"img/ReadLater.png\" },\n  { icon:\"img/RTorrent.png\" },\n  { icon:\"img/Slack.png\" },\n  { icon:\"img/Tape.png\" },\n  { icon:\"img/Trend.png\" },\n  { icon:\"img/Tube.png\" },\n  { icon:\"img/Twitter.png\" },\n  { icon:\"img/Wiki.png\" }\n];\n","var gridOptions = {\n  columns: 7,\n  pushing: true,\n  floating: true,\n  swapping: true,\n  width: 'auto',\n  colWidth: 'auto',\n  rowHeight: 'match',\n  margins: [10, 10],\n  outerMargin: true,\n  sparse: false,\n  isMobile: false,\n  mobileBreakPoint: 600,\n  mobileModeEnabled: false,\n  defaultSizeX: 1,\n  defaultSizeY: 1,\n  resizable: {\n    enabled: false,\n  },\n  draggable: {\n    enabled: false\n  }\n};\n","var gridsterModalOptions = {\n  columns: 6,\n  pushing: true,\n  floating: true,\n  swapping: true,\n  width: 'auto',\n  colWidth: 'auto',\n  rowHeight: 'match',\n  margins: [10, 10],\n  outerMargin: true,\n  sparse: false,\n  isMobile: false,\n  mobileBreakPoint: 600,\n  mobileModeEnabled: false,\n  minColumns: 1,\n  minRows: 1,\n  maxRows: 100,\n  defaultSizeX: 1,\n  defaultSizeY: 1,\n  minSizeX: 1,\n  maxSizeX: null,\n  minSizeY: 1,\n  maxSizeY: null,\n  resizable: {\n    enabled: false,\n    handles: ['n', 'e', 's', 'w', 'ne', 'se', 'sw', 'nw'],\n    start: function(event, $element, widget) {},\n    resize: function(event, $element, widget) {},\n    stop: function(event, $element, widget) {}\n  },\n  draggable: {\n    enabled: false,\n    handle: '.my-class',\n    start: function(event, $element, widget) {},\n    drag: function(event, $element, widget) {},\n    stop: function(event, $element, widget) {}\n  }\n};\n\n","var calcGridOptions = {\n  columns: 6,\n  pushing: true,\n  floating: true,\n  swapping: true,\n  width: 'auto',\n  colWidth: 'auto',\n  rowHeight: 'match',\n  margins: [0, 0],\n  outerMargin: true,\n  sparse: false,\n  isMobile: false,\n  mobileBreakPoint: 600,\n  mobileModeEnabled: false,\n  defaultSizeX: 1,\n  defaultSizeY: 1,\n  resizable: {\n    enabled: false,\n  },\n  draggable: {\n    enabled: false\n  }\n};\n","(function () {\n\n  angular\n    .module('nerveCenter')\n    .factory('ncCalcButtons', ncCalcButtons);\n\n  function ncCalcButtons() {\n    var factory = {};\n\n    factory.digits = function () {\n      var buttonKeys = [\n        '7','8','9','.','+','-',\n        '4','5','6','=','*','/',\n        '1','2','3','0','<','c'\n      ];\n\n      var isSpecialKey = new RegExp(\"[c|<]\");\n      var isOperatorKey = new RegExp(\"([.|=|*|/|+|-])\");\n      var buttons = [];\n      var len = buttonKeys.length - 1;\n      var i;\n\n      for (i = 0; i <= len; i++) {\n        var keyObj = {};\n        keyObj.key = buttonKeys[i];\n        keyObj.col = Math.floor((i + 1) / 6);\n        keyObj.row = i - (6 * keyObj.col);\n\n        if (isSpecialKey.test(keyObj.key)) {\n          keyObj.type = 'specialKey';\n        } else if (isOperatorKey.test(keyObj.key)) {\n          keyObj.type = 'operatorKey';\n        } else {\n          keyObj.type = 'digitKey';\n        }\n\n        buttons.push(keyObj);\n      }\n\n      return buttons;\n    }\n    return factory;\n  }\n\n})();\n","(function () {\n\n  angular\n    .module('nerveCenter')\n    .controller('ncCalcCtrl', ncCalcCtrl);\n\n  function ncCalcCtrl($scope, $window, ncCalcButtons) {\n\n    $scope.calcGridOptions = calcGridOptions;\n    $scope.result = 0;\n    $scope.out = '0';\n    updateCalcKeyHeight();\n\n    $scope.display = function (number) {\n\n      if ($scope.out != 'undefined'\n        && number != '='\n        && number != 'c'\n        && number != '<') {\n        $scope.out = \n          $scope.out === '0' \n          ? number\n          : $scope.out + number;\n      }\n\n      if ($scope.calcInput != '') {\n        switch (number) {\n\n          case 'c':\n            //reset display\n            $scope.out = '0';\n            break;\n\n          case '<':\n            //backspace\n            $scope.out = $scope.out.slice(0, -1);\n            break;\n\n          case '=':\n            //calculate\n            if ($scope.checksymbol($scope.out)) {\n              $scope.out = eval($scope.out).toString();\n            }\n            break;\n\n          default:\n            break\n        }\n      }\n    }\n\n    $scope.checksymbol = function (number) {\n      // check if string contains a restricted charater\n      var notallow = ['+','-','/','*','.',''];\n      if (notallow.indexOf(number.slice(-1))> -1 || notallow.indexOf(number.slice(0,1))>-1) {\n        return false;\n      }\n      return true;\n    }\n\n    $scope.allCalcKeys = ncCalcButtons.digits();\n    $scope.type = true;\n\n    function updateCalcKeyHeight() {\n      var divHeight = angular.element('#widget-icon').height()\n      var calcRowHeight = divHeight / 4.25;\n      var calcKeyFontHeight = divHeight / 10;\n      var calcDisplayFontHeight = divHeight / 6;\n      $scope.calcGridOptions.rowHeight = calcRowHeight;\n\n      var calcDisplay = document.getElementsByClassName('calc-key');\n      calcDisplay = angular.element(calcDisplay);\n      calcDisplay.css('height', calcRowHeight);\n      calcDisplay.css('font-size', calcKeyFontHeight);\n\n      var calcDisplayFont = document.getElementsByClassName('display-inner');\n      calcDisplayFont = angular.element(calcDisplayFont);\n      calcDisplayFont.css('font-size', calcDisplayFontHeight);\n    }\n\n    angular.element($window).bind('resize', function ($scope) {\n      setTimeout(updateCalcKeyHeight, 250);\n    });\n\n  };\n\n})();\n\n","(function () {\n\n  angular\n    .module('nerveCenter')\n    .directive('ncCalc', ncCalc);\n\n  function ncCalc() {\n    return {\n      restrict: 'AEC',\n      controller: 'ncCalcCtrl',\n      templateUrl: '/dashboard/nc-calc/nc-calc.template.html'\n    }\n  }\n})();\n\n","'use_strict';\n\nmodule.exports = function(grunt) {\n\n\trequire('matchdep').filterDev('grunt-*').forEach(grunt.loadNpmTasks);\n\trequire('time-grunt')(grunt);\n\n\tgrunt.initConfig({\n\t\tpkg: grunt.file.readJSON('package.json'),\n\t\tbump: {\n\t\t\toptions: {\n\t\t\t\tfiles: ['package.json', 'bower.json'],\n\t\t\t\tupdateConfigs: [],\n\t\t\t\tcommit: false,\n\t\t\t\tpush: false,\n\t\t\t\tcommitMessage: 'Release v%VERSION%',\n\t\t\t\tcommitFiles: ['package.json', 'bower.json']\n\t\t\t}\n\t\t},\n\t\tconnect: {\n\t\t\toptions: {\n\t\t\t\tport: 9000,\n\t\t\t\thostname: 'localhost'\n\t\t\t},\n\t\t\tdev: {\n\t\t\t\toptions: {\n\t\t\t\t\topen: true,\n\t\t\t\t\tlivereload: 35729\n\t\t\t\t}\n\t\t\t},\n\t\t\tcli: {\n\t\t\t\toptions: {}\n\t\t\t}\n\t\t},\n\t\tjsbeautifier: {\n\t\t\toptions: {\n\t\t\t\tconfig: '.jsbeautifyrc'\n\t\t\t},\n\t\t\tfiles: [\n\t\t\t\t'demo/**/*.js',\n\t\t\t\t'src/**/*.js',\n\t\t\t\t'test/**/*.js',\n\t\t\t\t'Gruntfile.js',\n\t\t\t\t'karma.conf.js',\n\t\t\t\t'bower.json',\n\t\t\t\t'index.html',\n\t\t\t\t'ptor.conf.js'\n\t\t\t]\n\t\t},\n\t\tjshint: {\n\t\t\toptions: {\n\t\t\t\tjshintrc: '.jshintrc'\n\t\t\t},\n\t\t\tfiles: ['src/*.js', 'test/**/*.js']\n\t\t},\n\t\tkarma: {\n\t\t\tunit: {\n\t\t\t\tconfigFile: 'karma.conf.js',\n\t\t\t\tbackground: true,\n\t\t\t\tsingleRun: false\n\t\t\t},\n\t\t\tsingleRun: {\n\t\t\t\tconfigFile: 'karma.conf.js',\n\t\t\t\tsingleRun: true\n\t\t\t}\n\t\t},\n\t\tless: {\n\t\t\tdist: {\n\t\t\t\toptions: {\n\t\t\t\t\tcompress: true\n\t\t\t\t},\n\t\t\t\tfiles: {\n\t\t\t\t\t\"dist/angular-gridster.min.css\": \"src/angular-gridster.less\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tmin: {\n\t\t\t\tfiles: {\n\t\t\t\t\t\"dist/angular-gridster.css\": \"src/angular-gridster.less\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tprotractor: {\n\t\t\te2e: {\n\t\t\t\toptions: {\n\t\t\t\t\tconfigFile: \"ptor.conf.js\",\n\t\t\t\t\targs: {}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tuglify: {\n\t\t\tdist: {\n\t\t\t\toptions: {\n\t\t\t\t\tbanner: ['/*',\n\t\t\t\t\t\t' * <%= pkg.name %>',\n\t\t\t\t\t\t' * <%= pkg.homepage %>',\n\t\t\t\t\t\t' *',\n\t\t\t\t\t\t' * @version: <%= pkg.version %>',\n\t\t\t\t\t\t' * @license: <%= pkg.license %>',\n\t\t\t\t\t\t' */\\n'\n\t\t\t\t\t].join('\\n')\n\t\t\t\t},\n\t\t\t\tfiles: {\n\t\t\t\t\t'dist/angular-gridster.min.js': ['src/angular-gridster.js']\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tdev: {\n\t\t\t\tfiles: ['Gruntfile.js', 'karma.conf.js', 'ptor.conf.js', 'src/*', 'test/**/*.js'],\n\t\t\t\ttasks: ['jsbeautifier', 'jshint', 'uglify', 'less', 'karma:unit:run'],\n\t\t\t\toptions: {\n\t\t\t\t\treload: true,\n\t\t\t\t\tlivereload: true,\n\t\t\t\t\tport: 35729\n\t\t\t\t}\n\t\t\t},\n\t\t\te2e: { // separate e2e so livereload doesn't have to wait for e2e tests\n\t\t\t\tfiles: ['src/*', 'test/**/*.js'],\n\t\t\t\ttasks: ['jsbeautifier', 'jshint', 'uglify', 'protractor']\n\t\t\t}\n\t\t}\n\t});\n\n\tgrunt.registerTask('default', ['jsbeautifier', 'jshint', 'uglify', 'less']);\n\n\tgrunt.registerTask('dev', ['connect:dev', 'karma:unit:start', 'watch:dev']);\n\tgrunt.registerTask('e2e', ['connect:cli', 'protractor', 'watch:e2e']);\n\tgrunt.registerTask('test', ['connect:cli', 'karma:singleRun', 'protractor']);\n\n};\n","// Karma configuration\n// http://karma-runner.github.io/0.10/config/configuration-file.html\n\nmodule.exports = function(config) {\n\tconfig.set({\n\t\t// base path, that will be used to resolve files and exclude\n\t\tbasePath: '',\n\n\t\treporters: ['progress', 'coverage'],\n\n\t\t// testing framework to use (jasmine/mocha/qunit/...)\n\t\tframeworks: ['jasmine'],\n\n\t\t// list of files / patterns to load in the browser\n\t\tfiles: [\n\t\t\t'bower_components/jquery/dist/jquery.js',\n\t\t\t'bower_components/jquery-simulate/jquery.simulate.js',\n\t\t\t'bower_components/javascript-detect-element-resize/jquery.resize.js',\n\t\t\t'bower_components/angular/angular.js',\n\t\t\t'bower_components/angular-mocks/angular-mocks.js',\n\t\t\t'src/angular-gridster.js',\n\t\t\t'test/spec/*.js'\n\t\t],\n\n\t\tpreprocessors: {\n\t\t\t'src/*.js': ['coverage']\n\t\t},\n\n\t\tcoverageReporter: {\n\t\t\ttype: 'html',\n\t\t\tdir: 'coverage/'\n\t\t},\n\n\t\tbackground: false,\n\n\t\t// list of files / patterns to exclude\n\t\texclude: [],\n\n\t\t// web server port\n\t\tport: 9898,\n\n\t\t// level of logging\n\t\t// possible values: LOG_DISABLE || LOG_ERROR || LOG_WARN || LOG_INFO || LOG_DEBUG\n\t\tlogLevel: config.LOG_ERROR,\n\n\n\t\t// enable / disable watching file and executing tests whenever any file changes\n\t\tautoWatch: false,\n\n\n\t\t// Start these browsers, currently available:\n\t\t// - Chrome\n\t\t// - ChromeCanary\n\t\t// - Firefox\n\t\t// - Opera\n\t\t// - Safari (only Mac)\n\t\t// - PhantomJS\n\t\t// - IE (only Windows)\n\t\tbrowsers: ['PhantomJS'],\n\t\t// Continuous Integration mode\n\t\t// if true, it capture browsers, run tests and exit\n\t\tsingleRun: false\n\t});\n};\n","// An example configuration file.\nexports.config = {\n\t// The address of a running selenium server.\n\tseleniumAddress: 'http://localhost:4444/wd/hub',\n\tbaseUrl: 'http://localhost:9000',\n\n\t// Capabilities to be passed to the webdriver instance.\n\tcapabilities: {\n\t\t'browserName': 'phantomjs'\n\t},\n\n\t// Spec patterns are relative to the location of the spec file. They may\n\t// include glob patterns.\n\tspecs: ['test/e2e/*.js'],\n\n\t// Options to be passed to Jasmine-node.\n\tjasmineNodeOpts: {\n\t\tshowColors: true // Use colors in the command line report.\n\t}\n};\n","(function () {\n\n  angular.module('nerveCenter').directive('clockWidget', clockWidget);\n\n  function clockWidget() {\n    return {\n      restrict: 'AEC',\n      templateUrl: function (elem, attrs) {\n        return \"/dashboard/widgetTemplates/clock-widget.template.html\";\n      }\n    };\n  };\n})();","(function () {\n\n  angular.module('nerveCenter').directive('renderWidget', renderWidget);\n\n  function renderWidget() {\n    return {\n      restrict: 'AEC',\n      templateUrl: function (elem, attrs) {\n        return \"/dashboard/widgetTemplates/\" + attrs.type + \".template.html\";\n      }\n    };\n  };\n})();","(function () {\n\n  angular.module('nerveCenter').directive('scrolly', scrolly);\n\n  function scrolly($window) {\n    return {\n      restrict: 'AEC',\n      link: function (scope, element, attrs) {\n        var raw = element[0];\n\n        element.bind('scroll', function () {\n          if (raw.scrollTop + raw.offsetHeight > raw.scrollHeight) {\n            scope.$apply(attrs.scrolly);\n          }\n        });\n      }\n    };\n  };\n});","(function () {\n\n  angular.module('nerveCenter').directive('selectText', selectText);\n\n  function selectText($window) {\n    return {\n      link: function (scope, element) {\n        element.on('click', function () {\n          var selection = $window.getSelection();\n          var range = document.createRange();\n          range.selectNodeContents(element[0]);\n          selection.removeAllRanges();\n          selection.addRange(range);\n        });\n      }\n    };\n  }\n})();","const apiData = angular.module('nerveCenter').service('apiData', apiDataService);\napiData.$inject = ['$http', 'auth'];\nexport { apiData };\n\nfunction apiDataService($http, auth) {\n  const getProfile = () => {\n    return $http.get('/api/user', {\n      headers: {\n        Authorization: 'Bearer ' + auth.getToken()\n      }\n    });\n  };\n\n  const updateWidgets = data => {\n    return $http.put('/api/user', data, {\n      headers: {\n        Authorization: 'Bearer ' + auth.getToken()\n      }\n    });\n  };\n\n  const getIcons = data => {\n    return $http.get('/api/ico', data, {\n      headers: {\n        Authorization: 'Bearer ' + auth.getToken()\n      }\n    });\n  };\n\n  const getDefaultGrid = data => {\n    return $http.get('/api/defaultgrid', data, {\n      headers: {\n        Authorization: 'Bearer ' + auth.getToken()\n      }\n    });\n  };\n\n  return {\n    getProfile: getProfile,\n    updateWidgets: updateWidgets,\n    getIcons: getIcons,\n    getDefaultGrid: getDefaultGrid\n  };\n}","var allIcons = [{ icon: \"img/BNK.png\" }, { icon: \"img/CNN.png\" }, { icon: \"img/Drive.png\" }, { icon: \"img/FreePress.png\" }, { icon: \"img/GitHub.png\" }, { icon: \"img/Google.png\" }, { icon: \"img/Image.png\" }, { icon: \"img/Indeed.png\" }, { icon: \"img/Launch.png\" }, { icon: \"img/Linked.png\" }, { icon: \"img/Notes.png\" }, { icon: \"img/ReadLater.png\" }, { icon: \"img/RTorrent.png\" }, { icon: \"img/Slack.png\" }, { icon: \"img/Tape.png\" }, { icon: \"img/Trend.png\" }, { icon: \"img/Tube.png\" }, { icon: \"img/Twitter.png\" }, { icon: \"img/Wiki.png\" }];","var gridOptions = {\n  columns: 7,\n  pushing: true,\n  floating: true,\n  swapping: true,\n  width: 'auto',\n  colWidth: 'auto',\n  rowHeight: 'match',\n  margins: [10, 10],\n  outerMargin: true,\n  sparse: false,\n  isMobile: false,\n  mobileBreakPoint: 600,\n  mobileModeEnabled: false,\n  defaultSizeX: 1,\n  defaultSizeY: 1,\n  resizable: {\n    enabled: false\n  },\n  draggable: {\n    enabled: false\n  }\n};","var gridsterModalOptions = {\n  columns: 6,\n  pushing: true,\n  floating: true,\n  swapping: true,\n  width: 'auto',\n  colWidth: 'auto',\n  rowHeight: 'match',\n  margins: [10, 10],\n  outerMargin: true,\n  sparse: false,\n  isMobile: false,\n  mobileBreakPoint: 600,\n  mobileModeEnabled: false,\n  minColumns: 1,\n  minRows: 1,\n  maxRows: 100,\n  defaultSizeX: 1,\n  defaultSizeY: 1,\n  minSizeX: 1,\n  maxSizeX: null,\n  minSizeY: 1,\n  maxSizeY: null,\n  resizable: {\n    enabled: false,\n    handles: ['n', 'e', 's', 'w', 'ne', 'se', 'sw', 'nw'],\n    start: function (event, $element, widget) {},\n    resize: function (event, $element, widget) {},\n    stop: function (event, $element, widget) {}\n  },\n  draggable: {\n    enabled: false,\n    handle: '.my-class',\n    start: function (event, $element, widget) {},\n    drag: function (event, $element, widget) {},\n    stop: function (event, $element, widget) {}\n  }\n};","var calcGridOptions = {\n  columns: 6,\n  pushing: true,\n  floating: true,\n  swapping: true,\n  width: 'auto',\n  colWidth: 'auto',\n  rowHeight: 'match',\n  margins: [0, 0],\n  outerMargin: true,\n  sparse: false,\n  isMobile: false,\n  mobileBreakPoint: 600,\n  mobileModeEnabled: false,\n  defaultSizeX: 1,\n  defaultSizeY: 1,\n  resizable: {\n    enabled: false\n  },\n  draggable: {\n    enabled: false\n  }\n};","(function () {\n\n  angular.module('nerveCenter').factory('ncCalcButtons', ncCalcButtons);\n\n  function ncCalcButtons() {\n    var factory = {};\n\n    factory.digits = function () {\n      var buttonKeys = ['7', '8', '9', '.', '+', '-', '4', '5', '6', '=', '*', '/', '1', '2', '3', '0', '<', 'c'];\n\n      var isSpecialKey = new RegExp(\"[c|<]\");\n      var isOperatorKey = new RegExp(\"([.|=|*|/|+|-])\");\n      var buttons = [];\n      var len = buttonKeys.length - 1;\n      var i;\n\n      for (i = 0; i <= len; i++) {\n        var keyObj = {};\n        keyObj.key = buttonKeys[i];\n        keyObj.col = Math.floor((i + 1) / 6);\n        keyObj.row = i - 6 * keyObj.col;\n\n        if (isSpecialKey.test(keyObj.key)) {\n          keyObj.type = 'specialKey';\n        } else if (isOperatorKey.test(keyObj.key)) {\n          keyObj.type = 'operatorKey';\n        } else {\n          keyObj.type = 'digitKey';\n        }\n\n        buttons.push(keyObj);\n      }\n\n      return buttons;\n    };\n    return factory;\n  }\n})();","(function () {\n\n  angular.module('nerveCenter').controller('ncCalcCtrl', ncCalcCtrl);\n\n  function ncCalcCtrl($scope, $window, ncCalcButtons) {\n\n    $scope.calcGridOptions = calcGridOptions;\n    $scope.result = 0;\n    $scope.out = '0';\n    updateCalcKeyHeight();\n\n    $scope.display = function (number) {\n\n      if ($scope.out != 'undefined' && number != '=' && number != 'c' && number != '<') {\n        $scope.out = $scope.out === '0' ? number : $scope.out + number;\n      }\n\n      if ($scope.calcInput != '') {\n        switch (number) {\n\n          case 'c':\n            //reset display\n            $scope.out = '0';\n            break;\n\n          case '<':\n            //backspace\n            $scope.out = $scope.out.slice(0, -1);\n            break;\n\n          case '=':\n            //calculate\n            if ($scope.checksymbol($scope.out)) {\n              $scope.out = eval($scope.out).toString();\n            }\n            break;\n\n          default:\n            break;\n        }\n      }\n    };\n\n    $scope.checksymbol = function (number) {\n      // check if string contains a restricted charater\n      var notallow = ['+', '-', '/', '*', '.', ''];\n      if (notallow.indexOf(number.slice(-1)) > -1 || notallow.indexOf(number.slice(0, 1)) > -1) {\n        return false;\n      }\n      return true;\n    };\n\n    $scope.allCalcKeys = ncCalcButtons.digits();\n    $scope.type = true;\n\n    function updateCalcKeyHeight() {\n      var divHeight = angular.element('#widget-icon').height();\n      var calcRowHeight = divHeight / 4.25;\n      var calcKeyFontHeight = divHeight / 10;\n      var calcDisplayFontHeight = divHeight / 6;\n      $scope.calcGridOptions.rowHeight = calcRowHeight;\n\n      var calcDisplay = document.getElementsByClassName('calc-key');\n      calcDisplay = angular.element(calcDisplay);\n      calcDisplay.css('height', calcRowHeight);\n      calcDisplay.css('font-size', calcKeyFontHeight);\n\n      var calcDisplayFont = document.getElementsByClassName('display-inner');\n      calcDisplayFont = angular.element(calcDisplayFont);\n      calcDisplayFont.css('font-size', calcDisplayFontHeight);\n    }\n\n    angular.element($window).bind('resize', function ($scope) {\n      setTimeout(updateCalcKeyHeight, 250);\n    });\n  };\n})();","(function () {\n\n  angular.module('nerveCenter').directive('ncCalc', ncCalc);\n\n  function ncCalc() {\n    return {\n      restrict: 'AEC',\n      controller: 'ncCalcCtrl',\n      templateUrl: '/dashboard/nc-calc/nc-calc.template.html'\n    };\n  }\n})();","'use_strict';\n\nmodule.exports = function (grunt) {\n\n\trequire('matchdep').filterDev('grunt-*').forEach(grunt.loadNpmTasks);\n\trequire('time-grunt')(grunt);\n\n\tgrunt.initConfig({\n\t\tpkg: grunt.file.readJSON('package.json'),\n\t\tbump: {\n\t\t\toptions: {\n\t\t\t\tfiles: ['package.json', 'bower.json'],\n\t\t\t\tupdateConfigs: [],\n\t\t\t\tcommit: false,\n\t\t\t\tpush: false,\n\t\t\t\tcommitMessage: 'Release v%VERSION%',\n\t\t\t\tcommitFiles: ['package.json', 'bower.json']\n\t\t\t}\n\t\t},\n\t\tconnect: {\n\t\t\toptions: {\n\t\t\t\tport: 9000,\n\t\t\t\thostname: 'localhost'\n\t\t\t},\n\t\t\tdev: {\n\t\t\t\toptions: {\n\t\t\t\t\topen: true,\n\t\t\t\t\tlivereload: 35729\n\t\t\t\t}\n\t\t\t},\n\t\t\tcli: {\n\t\t\t\toptions: {}\n\t\t\t}\n\t\t},\n\t\tjsbeautifier: {\n\t\t\toptions: {\n\t\t\t\tconfig: '.jsbeautifyrc'\n\t\t\t},\n\t\t\tfiles: ['demo/**/*.js', 'src/**/*.js', 'test/**/*.js', 'Gruntfile.js', 'karma.conf.js', 'bower.json', 'index.html', 'ptor.conf.js']\n\t\t},\n\t\tjshint: {\n\t\t\toptions: {\n\t\t\t\tjshintrc: '.jshintrc'\n\t\t\t},\n\t\t\tfiles: ['src/*.js', 'test/**/*.js']\n\t\t},\n\t\tkarma: {\n\t\t\tunit: {\n\t\t\t\tconfigFile: 'karma.conf.js',\n\t\t\t\tbackground: true,\n\t\t\t\tsingleRun: false\n\t\t\t},\n\t\t\tsingleRun: {\n\t\t\t\tconfigFile: 'karma.conf.js',\n\t\t\t\tsingleRun: true\n\t\t\t}\n\t\t},\n\t\tless: {\n\t\t\tdist: {\n\t\t\t\toptions: {\n\t\t\t\t\tcompress: true\n\t\t\t\t},\n\t\t\t\tfiles: {\n\t\t\t\t\t\"dist/angular-gridster.min.css\": \"src/angular-gridster.less\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tmin: {\n\t\t\t\tfiles: {\n\t\t\t\t\t\"dist/angular-gridster.css\": \"src/angular-gridster.less\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tprotractor: {\n\t\t\te2e: {\n\t\t\t\toptions: {\n\t\t\t\t\tconfigFile: \"ptor.conf.js\",\n\t\t\t\t\targs: {}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tuglify: {\n\t\t\tdist: {\n\t\t\t\toptions: {\n\t\t\t\t\tbanner: ['/*', ' * <%= pkg.name %>', ' * <%= pkg.homepage %>', ' *', ' * @version: <%= pkg.version %>', ' * @license: <%= pkg.license %>', ' */\\n'].join('\\n')\n\t\t\t\t},\n\t\t\t\tfiles: {\n\t\t\t\t\t'dist/angular-gridster.min.js': ['src/angular-gridster.js']\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tdev: {\n\t\t\t\tfiles: ['Gruntfile.js', 'karma.conf.js', 'ptor.conf.js', 'src/*', 'test/**/*.js'],\n\t\t\t\ttasks: ['jsbeautifier', 'jshint', 'uglify', 'less', 'karma:unit:run'],\n\t\t\t\toptions: {\n\t\t\t\t\treload: true,\n\t\t\t\t\tlivereload: true,\n\t\t\t\t\tport: 35729\n\t\t\t\t}\n\t\t\t},\n\t\t\te2e: { // separate e2e so livereload doesn't have to wait for e2e tests\n\t\t\t\tfiles: ['src/*', 'test/**/*.js'],\n\t\t\t\ttasks: ['jsbeautifier', 'jshint', 'uglify', 'protractor']\n\t\t\t}\n\t\t}\n\t});\n\n\tgrunt.registerTask('default', ['jsbeautifier', 'jshint', 'uglify', 'less']);\n\n\tgrunt.registerTask('dev', ['connect:dev', 'karma:unit:start', 'watch:dev']);\n\tgrunt.registerTask('e2e', ['connect:cli', 'protractor', 'watch:e2e']);\n\tgrunt.registerTask('test', ['connect:cli', 'karma:singleRun', 'protractor']);\n};","// Karma configuration\n// http://karma-runner.github.io/0.10/config/configuration-file.html\n\nmodule.exports = function (config) {\n\tconfig.set({\n\t\t// base path, that will be used to resolve files and exclude\n\t\tbasePath: '',\n\n\t\treporters: ['progress', 'coverage'],\n\n\t\t// testing framework to use (jasmine/mocha/qunit/...)\n\t\tframeworks: ['jasmine'],\n\n\t\t// list of files / patterns to load in the browser\n\t\tfiles: ['bower_components/jquery/dist/jquery.js', 'bower_components/jquery-simulate/jquery.simulate.js', 'bower_components/javascript-detect-element-resize/jquery.resize.js', 'bower_components/angular/angular.js', 'bower_components/angular-mocks/angular-mocks.js', 'src/angular-gridster.js', 'test/spec/*.js'],\n\n\t\tpreprocessors: {\n\t\t\t'src/*.js': ['coverage']\n\t\t},\n\n\t\tcoverageReporter: {\n\t\t\ttype: 'html',\n\t\t\tdir: 'coverage/'\n\t\t},\n\n\t\tbackground: false,\n\n\t\t// list of files / patterns to exclude\n\t\texclude: [],\n\n\t\t// web server port\n\t\tport: 9898,\n\n\t\t// level of logging\n\t\t// possible values: LOG_DISABLE || LOG_ERROR || LOG_WARN || LOG_INFO || LOG_DEBUG\n\t\tlogLevel: config.LOG_ERROR,\n\n\t\t// enable / disable watching file and executing tests whenever any file changes\n\t\tautoWatch: false,\n\n\t\t// Start these browsers, currently available:\n\t\t// - Chrome\n\t\t// - ChromeCanary\n\t\t// - Firefox\n\t\t// - Opera\n\t\t// - Safari (only Mac)\n\t\t// - PhantomJS\n\t\t// - IE (only Windows)\n\t\tbrowsers: ['PhantomJS'],\n\t\t// Continuous Integration mode\n\t\t// if true, it capture browsers, run tests and exit\n\t\tsingleRun: false\n\t});\n};","// An example configuration file.\nexports.config = {\n\t// The address of a running selenium server.\n\tseleniumAddress: 'http://localhost:4444/wd/hub',\n\tbaseUrl: 'http://localhost:9000',\n\n\t// Capabilities to be passed to the webdriver instance.\n\tcapabilities: {\n\t\t'browserName': 'phantomjs'\n\t},\n\n\t// Spec patterns are relative to the location of the spec file. They may\n\t// include glob patterns.\n\tspecs: ['test/e2e/*.js'],\n\n\t// Options to be passed to Jasmine-node.\n\tjasmineNodeOpts: {\n\t\tshowColors: true // Use colors in the command line report.\n\t}\n};","/*\n * angular-gridster\n * http://manifestwebdesign.github.io/angular-gridster\n *\n * @version: 0.13.14\n * @license: MIT\n */\n!function (a, b) {\n  \"use strict\";\n  \"function\" == typeof define && define.amd ? define([\"angular\"], b) : \"object\" == typeof exports ? module.exports = b(require(\"angular\")) : b(a.angular);\n}(this, function (a) {\n  \"use strict\";\n  return a.module(\"gridster\", []).constant(\"gridsterConfig\", { columns: 6, pushing: !0, floating: !0, swapping: !1, width: \"auto\", colWidth: \"auto\", rowHeight: \"match\", margins: [10, 10], outerMargin: !0, isMobile: !1, mobileBreakPoint: 600, mobileModeEnabled: !0, minColumns: 1, minRows: 1, maxRows: 100, defaultSizeX: 2, defaultSizeY: 1, minSizeX: 1, maxSizeX: null, minSizeY: 1, maxSizeY: null, saveGridItemCalculatedHeightInMobile: !1, resizable: { enabled: !0, handles: [\"s\", \"e\", \"n\", \"w\", \"se\", \"ne\", \"sw\", \"nw\"] }, draggable: { enabled: !0, scrollSensitivity: 20, scrollSpeed: 15 } }).controller(\"GridsterCtrl\", [\"gridsterConfig\", \"$timeout\", function (b, c) {\n    var d = this;a.extend(this, b), this.resizable = a.extend({}, b.resizable || {}), this.draggable = a.extend({}, b.draggable || {});var e = !1;this.layoutChanged = function () {\n      e || (e = !0, c(function () {\n        e = !1, d.loaded && d.floatItemsUp(), d.updateHeight(d.movingItem ? d.movingItem.sizeY : 0);\n      }, 30));\n    }, this.grid = [], this.destroy = function () {\n      this.grid && (this.grid = []), this.$element = null;\n    }, this.setOptions = function (b) {\n      if (b) if (b = a.extend({}, b), b.draggable && (a.extend(this.draggable, b.draggable), delete b.draggable), b.resizable && (a.extend(this.resizable, b.resizable), delete b.resizable), a.extend(this, b), this.margins && 2 === this.margins.length) for (var c = 0, d = this.margins.length; c < d; ++c) this.margins[c] = parseInt(this.margins[c], 10), isNaN(this.margins[c]) && (this.margins[c] = 0);else this.margins = [0, 0];\n    }, this.canItemOccupy = function (a, b, c) {\n      return b > -1 && c > -1 && a.sizeX + c <= this.columns && a.sizeY + b <= this.maxRows;\n    }, this.autoSetItemPosition = function (a) {\n      for (var b = 0; b < this.maxRows; ++b) for (var c = 0; c < this.columns; ++c) {\n        var d = this.getItems(b, c, a.sizeX, a.sizeY, a);if (0 === d.length && this.canItemOccupy(a, b, c)) return void this.putItem(a, b, c);\n      }throw new Error(\"Unable to place item!\");\n    }, this.getItems = function (a, b, c, d, e) {\n      var f = [];c && d || (c = d = 1), !e || e instanceof Array || (e = [e]);for (var g = 0; g < d; ++g) for (var h = 0; h < c; ++h) {\n        var i = this.getItem(a + g, b + h, e);!i || e && e.indexOf(i) !== -1 || f.indexOf(i) !== -1 || f.push(i);\n      }return f;\n    }, this.getBoundingBox = function (a) {\n      if (0 === a.length) return null;if (1 === a.length) return { row: a[0].row, col: a[0].col, sizeY: a[0].sizeY, sizeX: a[0].sizeX };for (var b = 0, c = 0, d = 9999, e = 9999, f = 0, g = a.length; f < g; ++f) {\n        var h = a[f];d = Math.min(h.row, d), e = Math.min(h.col, e), b = Math.max(h.row + h.sizeY, b), c = Math.max(h.col + h.sizeX, c);\n      }return { row: d, col: e, sizeY: b - d, sizeX: c - e };\n    }, this.removeItem = function (a) {\n      for (var b = 0, c = this.grid.length; b < c; ++b) {\n        var d = this.grid[b];if (d) {\n          var e = d.indexOf(a);if (e !== -1) {\n            d[e] = null;break;\n          }\n        }\n      }this.layoutChanged();\n    }, this.getItem = function (a, b, c) {\n      !c || c instanceof Array || (c = [c]);for (var d = 1; a > -1;) {\n        for (var e = 1, f = b; f > -1;) {\n          var g = this.grid[a];if (g) {\n            var h = g[f];if (h && (!c || c.indexOf(h) === -1) && h.sizeX >= e && h.sizeY >= d) return h;\n          }++e, --f;\n        }--a, ++d;\n      }return null;\n    }, this.putItems = function (a) {\n      for (var b = 0, c = a.length; b < c; ++b) this.putItem(a[b]);\n    }, this.putItem = function (a, b, c, d) {\n      if ((\"undefined\" == typeof b || null === b) && (b = a.row, c = a.col, \"undefined\" == typeof b || null === b)) return void this.autoSetItemPosition(a);if (this.canItemOccupy(a, b, c) || (c = Math.min(this.columns - a.sizeX, Math.max(0, c)), b = Math.min(this.maxRows - a.sizeY, Math.max(0, b))), null !== a.oldRow && \"undefined\" != typeof a.oldRow) {\n        var e = a.oldRow === b && a.oldColumn === c,\n            f = this.grid[b] && this.grid[b][c] === a;if (e && f) return a.row = b, void (a.col = c);var g = this.grid[a.oldRow];g && g[a.oldColumn] === a && delete g[a.oldColumn];\n      }a.oldRow = a.row = b, a.oldColumn = a.col = c, this.moveOverlappingItems(a, d), this.grid[b] || (this.grid[b] = []), this.grid[b][c] = a, this.movingItem === a && this.floatItemUp(a), this.layoutChanged();\n    }, this.swapItems = function (a, b) {\n      this.grid[a.row][a.col] = b, this.grid[b.row][b.col] = a;var c = a.row,\n          d = a.col;a.row = b.row, a.col = b.col, b.row = c, b.col = d;\n    }, this.moveOverlappingItems = function (a, b) {\n      b ? b.indexOf(a) === -1 && (b = b.slice(0), b.push(a)) : b = [a];var c = this.getItems(a.row, a.col, a.sizeX, a.sizeY, b);this.moveItemsDown(c, a.row + a.sizeY, b);\n    }, this.moveItemsDown = function (a, b, c) {\n      if (a && 0 !== a.length) {\n        a.sort(function (a, b) {\n          return a.row - b.row;\n        }), c = c ? c.slice(0) : [];var d,\n            e,\n            f,\n            g = {};for (e = 0, f = a.length; e < f; ++e) {\n          d = a[e];var h = g[d.col];(\"undefined\" == typeof h || d.row < h) && (g[d.col] = d.row);\n        }for (e = 0, f = a.length; e < f; ++e) {\n          d = a[e];var i = b - g[d.col];this.moveItemDown(d, d.row + i, c), c.push(d);\n        }\n      }\n    }, this.moveItemDown = function (a, b, c) {\n      if (!(a.row >= b)) {\n        for (; a.row < b;) ++a.row, this.moveOverlappingItems(a, c);this.putItem(a, a.row, a.col, c);\n      }\n    }, this.floatItemsUp = function () {\n      if (this.floating !== !1) for (var a = 0, b = this.grid.length; a < b; ++a) {\n        var c = this.grid[a];if (c) for (var d = 0, e = c.length; d < e; ++d) {\n          var f = c[d];f && this.floatItemUp(f);\n        }\n      }\n    }, this.floatItemUp = function (a) {\n      if (this.floating !== !1) {\n        for (var b = a.col, c = a.sizeY, d = a.sizeX, e = null, f = null, g = a.row - 1; g > -1;) {\n          var h = this.getItems(g, b, d, c, a);if (0 !== h.length) break;e = g, f = b, --g;\n        }null !== e && this.putItem(a, e, f);\n      }\n    }, this.updateHeight = function (a) {\n      var b = this.minRows;a = a || 0;for (var c = this.grid.length; c >= 0; --c) {\n        var d = this.grid[c];if (d) for (var e = 0, f = d.length; e < f; ++e) d[e] && (b = Math.max(b, c + a + d[e].sizeY));\n      }this.gridHeight = this.maxRows - b > 0 ? Math.min(this.maxRows, b) : Math.max(this.maxRows, b);\n    }, this.pixelsToRows = function (a, b) {\n      return this.outerMargin || (a += this.margins[0] / 2), b === !0 ? Math.ceil(a / this.curRowHeight) : b === !1 ? Math.floor(a / this.curRowHeight) : Math.round(a / this.curRowHeight);\n    }, this.pixelsToColumns = function (a, b) {\n      return this.outerMargin || (a += this.margins[1] / 2), b === !0 ? Math.ceil(a / this.curColWidth) : b === !1 ? Math.floor(a / this.curColWidth) : Math.round(a / this.curColWidth);\n    };\n  }]).directive(\"gridsterPreview\", function () {\n    return { replace: !0, scope: !0, require: \"^gridster\", template: '<div ng-style=\"previewStyle()\" class=\"gridster-item gridster-preview-holder\"></div>', link: function (a, b, c, d) {\n        a.previewStyle = function () {\n          return d.movingItem ? { display: \"block\", height: d.movingItem.sizeY * d.curRowHeight - d.margins[0] + \"px\", width: d.movingItem.sizeX * d.curColWidth - d.margins[1] + \"px\", top: d.movingItem.row * d.curRowHeight + (d.outerMargin ? d.margins[0] : 0) + \"px\", left: d.movingItem.col * d.curColWidth + (d.outerMargin ? d.margins[1] : 0) + \"px\" } : { display: \"none\" };\n        };\n      } };\n  }).directive(\"gridster\", [\"$timeout\", \"$window\", \"$rootScope\", \"gridsterDebounce\", function (b, c, d, e) {\n    return { scope: !0, restrict: \"EAC\", controller: \"GridsterCtrl\", controllerAs: \"gridster\", compile: function (f) {\n        return f.prepend('<div ng-if=\"gridster.movingItem\" gridster-preview></div>'), function (f, g, h, i) {\n          function j() {\n            g.css(\"height\", i.gridHeight * i.curRowHeight + (i.outerMargin ? i.margins[0] : -i.margins[0]) + \"px\");\n          }function k(a) {\n            if (i.setOptions(a), l(g[0])) {\n              \"auto\" === i.width ? i.curWidth = g[0].offsetWidth || parseInt(g.css(\"width\"), 10) : i.curWidth = i.width, \"auto\" === i.colWidth ? i.curColWidth = (i.curWidth + (i.outerMargin ? -i.margins[1] : i.margins[1])) / i.columns : i.curColWidth = i.colWidth, i.curRowHeight = i.rowHeight, \"string\" == typeof i.rowHeight && (\"match\" === i.rowHeight ? i.curRowHeight = Math.round(i.curColWidth) : i.rowHeight.indexOf(\"*\") !== -1 ? i.curRowHeight = Math.round(i.curColWidth * i.rowHeight.replace(\"*\", \"\").replace(\" \", \"\")) : i.rowHeight.indexOf(\"/\") !== -1 && (i.curRowHeight = Math.round(i.curColWidth / i.rowHeight.replace(\"/\", \"\").replace(\" \", \"\")))), i.isMobile = i.mobileModeEnabled && i.curWidth <= i.mobileBreakPoint;for (var b = 0, c = i.grid.length; b < c; ++b) {\n                var d = i.grid[b];if (d) for (var e = 0, f = d.length; e < f; ++e) if (d[e]) {\n                  var h = d[e];h.setElementPosition(), h.setElementSizeY(), h.setElementSizeX();\n                }\n              }j();\n            }\n          }i.loaded = !1, i.$element = g, f.gridster = i, g.addClass(\"gridster\");var l = function (a) {\n            return \"hidden\" !== a.style.visibility && \"none\" !== a.style.display;\n          };f.$watch(function () {\n            return i.gridHeight;\n          }, j), f.$watch(function () {\n            return i.movingItem;\n          }, function () {\n            i.updateHeight(i.movingItem ? i.movingItem.sizeY : 0);\n          });var m = h.gridster;m ? f.$parent.$watch(m, function (a) {\n            k(a);\n          }, !0) : k({}), f.$watch(function () {\n            return i.loaded;\n          }, function () {\n            i.loaded ? (g.addClass(\"gridster-loaded\"), d.$broadcast(\"gridster-loaded\", i)) : g.removeClass(\"gridster-loaded\");\n          }), f.$watch(function () {\n            return i.isMobile;\n          }, function () {\n            i.isMobile ? g.addClass(\"gridster-mobile\").removeClass(\"gridster-desktop\") : g.removeClass(\"gridster-mobile\").addClass(\"gridster-desktop\"), d.$broadcast(\"gridster-mobile-changed\", i);\n          }), f.$watch(function () {\n            return i.draggable;\n          }, function () {\n            d.$broadcast(\"gridster-draggable-changed\", i);\n          }, !0), f.$watch(function () {\n            return i.resizable;\n          }, function () {\n            d.$broadcast(\"gridster-resizable-changed\", i);\n          }, !0);var n = g[0].offsetWidth || parseInt(g.css(\"width\"), 10),\n              o = function () {\n            var a = g[0].offsetWidth || parseInt(g.css(\"width\"), 10);a && a !== n && !i.movingItem && (n = a, i.loaded && g.removeClass(\"gridster-loaded\"), k(), i.loaded && g.addClass(\"gridster-loaded\"), d.$broadcast(\"gridster-resized\", [a, g[0].offsetHeight], i));\n          },\n              p = e(function () {\n            o(), b(function () {\n              f.$apply();\n            });\n          }, 100);f.$watch(function () {\n            return l(g[0]);\n          }, p), \"function\" == typeof window.addResizeListener ? window.addResizeListener(g[0], p) : f.$watch(function () {\n            return g[0].offsetWidth || parseInt(g.css(\"width\"), 10);\n          }, o);var q = a.element(c);q.on(\"resize\", p), f.$on(\"$destroy\", function () {\n            i.destroy(), q.off(\"resize\", p), \"function\" == typeof window.removeResizeListener && window.removeResizeListener(g[0], p);\n          }), b(function () {\n            f.$watch(\"gridster.floating\", function () {\n              i.floatItemsUp();\n            }), i.loaded = !0;\n          }, 100);\n        };\n      } };\n  }]).controller(\"GridsterItemCtrl\", function () {\n    this.$element = null, this.gridster = null, this.row = null, this.col = null, this.sizeX = null, this.sizeY = null, this.minSizeX = 0, this.minSizeY = 0, this.maxSizeX = null, this.maxSizeY = null, this.init = function (a, b) {\n      this.$element = a, this.gridster = b, this.sizeX = b.defaultSizeX, this.sizeY = b.defaultSizeY;\n    }, this.destroy = function () {\n      this.gridster = null, this.$element = null;\n    }, this.toJSON = function () {\n      return { row: this.row, col: this.col, sizeY: this.sizeY, sizeX: this.sizeX };\n    }, this.isMoving = function () {\n      return this.gridster.movingItem === this;\n    }, this.setPosition = function (a, b) {\n      this.gridster.putItem(this, a, b), this.isMoving() || this.setElementPosition();\n    }, this.setSize = function (a, b, c) {\n      a = a.toUpperCase();var d = \"size\" + a,\n          e = \"Size\" + a;if (\"\" !== b) {\n        b = parseInt(b, 10), (isNaN(b) || 0 === b) && (b = this.gridster[\"default\" + e]);var f = \"X\" === a ? this.gridster.columns : this.gridster.maxRows;this[\"max\" + e] && (f = Math.min(this[\"max\" + e], f)), this.gridster[\"max\" + e] && (f = Math.min(this.gridster[\"max\" + e], f)), \"X\" === a && this.cols ? f -= this.cols : \"Y\" === a && this.rows && (f -= this.rows);var g = 0;this[\"min\" + e] && (g = Math.max(this[\"min\" + e], g)), this.gridster[\"min\" + e] && (g = Math.max(this.gridster[\"min\" + e], g)), b = Math.max(Math.min(b, f), g);var h = this[d] !== b || this[\"old\" + e] && this[\"old\" + e] !== b;return this[\"old\" + e] = this[d] = b, this.isMoving() || this[\"setElement\" + e](), !c && h && (this.gridster.moveOverlappingItems(this), this.gridster.layoutChanged()), h;\n      }\n    }, this.setSizeY = function (a, b) {\n      return this.setSize(\"Y\", a, b);\n    }, this.setSizeX = function (a, b) {\n      return this.setSize(\"X\", a, b);\n    }, this.setElementPosition = function () {\n      this.gridster.isMobile ? this.$element.css({ marginLeft: this.gridster.margins[0] + \"px\", marginRight: this.gridster.margins[0] + \"px\", marginTop: this.gridster.margins[1] + \"px\", marginBottom: this.gridster.margins[1] + \"px\", top: \"\", left: \"\" }) : this.$element.css({ margin: 0, top: this.row * this.gridster.curRowHeight + (this.gridster.outerMargin ? this.gridster.margins[0] : 0) + \"px\", left: this.col * this.gridster.curColWidth + (this.gridster.outerMargin ? this.gridster.margins[1] : 0) + \"px\" });\n    }, this.setElementSizeY = function () {\n      this.gridster.isMobile && !this.gridster.saveGridItemCalculatedHeightInMobile ? this.$element.css(\"height\", \"\") : this.$element.css(\"height\", this.sizeY * this.gridster.curRowHeight - this.gridster.margins[0] + \"px\");\n    }, this.setElementSizeX = function () {\n      this.gridster.isMobile ? this.$element.css(\"width\", \"\") : this.$element.css(\"width\", this.sizeX * this.gridster.curColWidth - this.gridster.margins[1] + \"px\");\n    }, this.getElementSizeX = function () {\n      return this.sizeX * this.gridster.curColWidth - this.gridster.margins[1];\n    }, this.getElementSizeY = function () {\n      return this.sizeY * this.gridster.curRowHeight - this.gridster.margins[0];\n    };\n  }).factory(\"GridsterTouch\", [function () {\n    return function (a, b, c, d) {\n      var e,\n          f,\n          g = {},\n          h = function (a) {\n        if (Object.keys) return Object.keys(a).length;var b,\n            c = 0;for (b in a) ++c;return c;\n      },\n          i = function (a) {\n        for (var b = 0, c = 0, d = navigator.userAgent.match(/\\bMSIE\\b/), e = a; null != e; e = e.offsetParent) d && (!document.documentMode || document.documentMode < 8) && \"relative\" === e.currentStyle.position && e.offsetParent && \"relative\" === e.offsetParent.currentStyle.position && e.offsetLeft === e.offsetParent.offsetLeft ? c += e.offsetTop : (b += e.offsetLeft, c += e.offsetTop);return { x: b, y: c };\n      },\n          j = i(a),\n          k = !1,\n          l = function (e) {\n        if (\"mousemove\" !== e.type || 0 !== h(g)) {\n          for (var f = !0, m = e.changedTouches ? e.changedTouches : [e], n = 0; n < m.length; ++n) {\n            var o = m[n],\n                p = \"undefined\" != typeof o.identifier ? o.identifier : \"undefined\" != typeof o.pointerId ? o.pointerId : 1;if (\"undefined\" == typeof o.pageX) if (o.pageX = o.offsetX + j.x, o.pageY = o.offsetY + j.y, o.srcElement.offsetParent === a && document.documentMode && 8 === document.documentMode && \"mousedown\" === o.type) o.pageX += o.srcElement.offsetLeft, o.pageY += o.srcElement.offsetTop;else if (o.srcElement !== a && !document.documentMode || document.documentMode < 8) {\n              for (var q = -2, r = -2, s = o.srcElement; null !== s; s = s.parentNode) q += s.scrollLeft ? s.scrollLeft : 0, r += s.scrollTop ? s.scrollTop : 0;o.pageX = o.clientX + q, o.pageY = o.clientY + r;\n            }var t = o.pageX,\n                u = o.pageY;e.type.match(/(start|down)$/i) ? (j = i(a), g[p] && (d && d({ target: e.target, which: e.which, pointerId: p, pageX: t, pageY: u }), delete g[p]), b && f && (f = b({ target: e.target, which: e.which, pointerId: p, pageX: t, pageY: u })), g[p] = { x: t, y: u }, a.msSetPointerCapture && f ? a.msSetPointerCapture(p) : \"mousedown\" === e.type && 1 === h(g) && (k ? a.setCapture(!0) : (document.addEventListener(\"mousemove\", l, !1), document.addEventListener(\"mouseup\", l, !1)))) : e.type.match(/move$/i) ? !g[p] || g[p].x === t && g[p].y === u || (c && f && (f = c({ target: e.target, which: e.which, pointerId: p, pageX: t, pageY: u })), g[p].x = t, g[p].y = u) : g[p] && e.type.match(/(up|end|cancel)$/i) && (d && f && (f = d({ target: e.target, which: e.which, pointerId: p, pageX: t, pageY: u })), delete g[p], a.msReleasePointerCapture ? a.msReleasePointerCapture(p) : \"mouseup\" === e.type && 0 === h(g) && (k ? a.releaseCapture() : (document.removeEventListener(\"mousemove\", l, !1), document.removeEventListener(\"mouseup\", l, !1))));\n          }f && (e.preventDefault && e.preventDefault(), e.preventManipulation && e.preventManipulation(), e.preventMouseEvent && e.preventMouseEvent());\n        }\n      };return this.enable = function () {\n        window.navigator.msPointerEnabled ? (a.addEventListener(\"MSPointerDown\", l, !1), a.addEventListener(\"MSPointerMove\", l, !1), a.addEventListener(\"MSPointerUp\", l, !1), a.addEventListener(\"MSPointerCancel\", l, !1), \"undefined\" != typeof a.style.msContentZooming && (e = a.style.msContentZooming, a.style.msContentZooming = \"none\"), \"undefined\" != typeof a.style.msTouchAction && (f = a.style.msTouchAction, a.style.msTouchAction = \"none\")) : a.addEventListener ? (a.addEventListener(\"touchstart\", l, !1), a.addEventListener(\"touchmove\", l, !1), a.addEventListener(\"touchend\", l, !1), a.addEventListener(\"touchcancel\", l, !1), a.addEventListener(\"mousedown\", l, !1), a.setCapture && !window.navigator.userAgent.match(/\\bGecko\\b/) && (k = !0, a.addEventListener(\"mousemove\", l, !1), a.addEventListener(\"mouseup\", l, !1))) : a.attachEvent && a.setCapture && (k = !0, a.attachEvent(\"onmousedown\", function () {\n          return l(window.event), window.event.returnValue = !1, !1;\n        }), a.attachEvent(\"onmousemove\", function () {\n          return l(window.event), window.event.returnValue = !1, !1;\n        }), a.attachEvent(\"onmouseup\", function () {\n          return l(window.event), window.event.returnValue = !1, !1;\n        }));\n      }, this.disable = function () {\n        window.navigator.msPointerEnabled ? (a.removeEventListener(\"MSPointerDown\", l, !1), a.removeEventListener(\"MSPointerMove\", l, !1), a.removeEventListener(\"MSPointerUp\", l, !1), a.removeEventListener(\"MSPointerCancel\", l, !1), e && (a.style.msContentZooming = e), f && (a.style.msTouchAction = f)) : a.removeEventListener ? (a.removeEventListener(\"touchstart\", l, !1), a.removeEventListener(\"touchmove\", l, !1), a.removeEventListener(\"touchend\", l, !1), a.removeEventListener(\"touchcancel\", l, !1), a.removeEventListener(\"mousedown\", l, !1), a.setCapture && !window.navigator.userAgent.match(/\\bGecko\\b/) && (k = !0, a.removeEventListener(\"mousemove\", l, !1), a.removeEventListener(\"mouseup\", l, !1))) : a.detachEvent && a.setCapture && (k = !0, a.detachEvent(\"onmousedown\"), a.detachEvent(\"onmousemove\"), a.detachEvent(\"onmouseup\"));\n      }, this;\n    };\n  }]).factory(\"GridsterDraggable\", [\"$document\", \"$window\", \"GridsterTouch\", function (b, c, d) {\n    function e(e, f, g, h, i) {\n      function j(a) {\n        e.addClass(\"gridster-item-moving\"), g.movingItem = h, g.updateHeight(h.sizeY), f.$apply(function () {\n          g.draggable && g.draggable.start && g.draggable.start(a, e, i);\n        });\n      }function k(a) {\n        var b = h.row,\n            d = h.col,\n            j = g.draggable && g.draggable.drag,\n            k = g.draggable.scrollSensitivity,\n            l = g.draggable.scrollSpeed,\n            m = Math.min(g.pixelsToRows(q), g.maxRows - 1),\n            n = Math.min(g.pixelsToColumns(p), g.columns - 1),\n            o = g.getItems(m, n, h.sizeX, h.sizeY, h),\n            r = 0 !== o.length;if (g.swapping === !0 && r) {\n          var s = g.getBoundingBox(o),\n              t = s.sizeX === h.sizeX && s.sizeY === h.sizeY,\n              u = s.row === b,\n              v = s.col === d,\n              w = s.row === m && s.col === n,\n              x = u || v;if (t && 1 === o.length) {\n            if (w) g.swapItems(h, o[0]);else if (x) return;\n          } else if (s.sizeX <= h.sizeX && s.sizeY <= h.sizeY && x) for (var y = h.row <= m ? h.row : m + h.sizeY, z = h.col <= n ? h.col : n + h.sizeX, A = y - s.row, B = z - s.col, C = 0, E = o.length; C < E; ++C) {\n            var F = o[C],\n                G = g.getItems(F.row + A, F.col + B, F.sizeX, F.sizeY, h);0 === G.length && g.putItem(F, F.row + A, F.col + B);\n          }\n        }g.pushing === !1 && r || (h.row = m, h.col = n), a.pageY - D.body.scrollTop < k ? D.body.scrollTop = D.body.scrollTop - l : c.innerHeight - (a.pageY - D.body.scrollTop) < k && (D.body.scrollTop = D.body.scrollTop + l), a.pageX - D.body.scrollLeft < k ? D.body.scrollLeft = D.body.scrollLeft - l : c.innerWidth - (a.pageX - D.body.scrollLeft) < k && (D.body.scrollLeft = D.body.scrollLeft + l), (j || b !== h.row || d !== h.col) && f.$apply(function () {\n          j && g.draggable.drag(a, e, i);\n        });\n      }function l(a) {\n        e.removeClass(\"gridster-item-moving\");var b = Math.min(g.pixelsToRows(q), g.maxRows - 1),\n            c = Math.min(g.pixelsToColumns(p), g.columns - 1);g.pushing === !1 && 0 !== g.getItems(b, c, h.sizeX, h.sizeY, h).length || (h.row = b, h.col = c), g.movingItem = null, h.setPosition(h.row, h.col), f.$apply(function () {\n          g.draggable && g.draggable.stop && g.draggable.stop(a, e, i);\n        });\n      }function m(b) {\n        if (E.indexOf(b.target.nodeName.toLowerCase()) !== -1) return !1;var c = a.element(b.target);if (c.hasClass(\"gridster-item-resizable-handler\")) return !1;if (c.attr(\"onclick\") || c.attr(\"ng-click\")) return !1;if (c.closest && c.closest(\".gridster-no-drag\").length) return !1;if (g.draggable && g.draggable.handle) {\n          var d = a.element(e[0].querySelectorAll(g.draggable.handle)),\n              f = !1;a: for (var i = 0, k = d.length; i < k; ++i) {\n            var l = d[i];if (l === b.target) {\n              f = !0;break;\n            }for (var m = b.target, n = 0; n < 20; ++n) {\n              var o = m.parentNode;if (o === e[0] || !o) break;if (o === l) {\n                f = !0;break a;\n              }m = o;\n            }\n          }if (!f) return !1;\n        }switch (b.which) {case 1:\n            break;case 2:case 3:\n            return;}return x = b.pageX, y = b.pageY, p = parseInt(e.css(\"left\"), 10), q = parseInt(e.css(\"top\"), 10), r = e[0].offsetWidth, s = e[0].offsetHeight, t = h.col, u = h.row, j(b), !0;\n      }function n(a) {\n        if (!e.hasClass(\"gridster-item-moving\") || e.hasClass(\"gridster-item-resizing\")) return !1;var b = g.curWidth - 1,\n            c = g.curRowHeight * g.maxRows - 1;v = a.pageX, w = a.pageY;var d = v - x + z,\n            f = w - y + A;z = A = 0, x = v, y = w;var h = d,\n            i = f;return p + h < C ? (d = C - p, z = h - d) : p + r + h > b && (d = b - p - r, z = h - d), q + i < B ? (f = B - q, A = i - f) : q + s + i > c && (f = c - q - s, A = i - f), p += d, q += f, e.css({ top: q + \"px\", left: p + \"px\" }), k(a), !0;\n      }function o(a) {\n        return !(!e.hasClass(\"gridster-item-moving\") || e.hasClass(\"gridster-item-resizing\")) && (z = A = 0, l(a), !0);\n      }var p,\n          q,\n          r,\n          s,\n          t,\n          u,\n          v = 0,\n          w = 0,\n          x = 0,\n          y = 0,\n          z = 0,\n          A = 0,\n          B = 0,\n          C = 0,\n          D = b[0],\n          E = [\"select\", \"option\", \"input\", \"textarea\", \"button\"],\n          F = null,\n          G = null;this.enable = function () {\n        if (F !== !0) {\n          if (F = !0, G) return void G.enable();G = new d(e[0], m, n, o), G.enable();\n        }\n      }, this.disable = function () {\n        F !== !1 && (F = !1, G && G.disable());\n      }, this.toggle = function (a) {\n        a ? this.enable() : this.disable();\n      }, this.destroy = function () {\n        this.disable();\n      };\n    }return e;\n  }]).factory(\"GridsterResizable\", [\"GridsterTouch\", function (b) {\n    function c(c, d, e, f, g) {\n      function h(h) {\n        function i(a) {\n          c.addClass(\"gridster-item-moving\"), c.addClass(\"gridster-item-resizing\"), e.movingItem = f, f.setElementSizeX(), f.setElementSizeY(), f.setElementPosition(), e.updateHeight(1), d.$apply(function () {\n            e.resizable && e.resizable.start && e.resizable.start(a, c, g);\n          });\n        }function j(a) {\n          var b = f.row,\n              i = f.col,\n              j = f.sizeX,\n              k = f.sizeY,\n              l = e.resizable && e.resizable.resize,\n              m = f.col;[\"w\", \"nw\", \"sw\"].indexOf(h) !== -1 && (m = e.pixelsToColumns(o, !1));var n = f.row;[\"n\", \"ne\", \"nw\"].indexOf(h) !== -1 && (n = e.pixelsToRows(p, !1));var s = f.sizeX;[\"n\", \"s\"].indexOf(h) === -1 && (s = e.pixelsToColumns(q, !0));var t = f.sizeY;[\"e\", \"w\"].indexOf(h) === -1 && (t = e.pixelsToRows(r, !0));var u = n > -1 && m > -1 && s + m <= e.columns && t + n <= e.maxRows;!u || e.pushing === !1 && 0 !== e.getItems(n, m, s, t, f).length || (f.row = n, f.col = m, f.sizeX = s, f.sizeY = t);var v = f.row !== b || f.col !== i || f.sizeX !== j || f.sizeY !== k;(l || v) && d.$apply(function () {\n            l && e.resizable.resize(a, c, g);\n          });\n        }function k(a) {\n          c.removeClass(\"gridster-item-moving\"), c.removeClass(\"gridster-item-resizing\"), e.movingItem = null, f.setPosition(f.row, f.col), f.setSizeY(f.sizeY), f.setSizeX(f.sizeX), d.$apply(function () {\n            e.resizable && e.resizable.stop && e.resizable.stop(a, c, g);\n          });\n        }function l(a) {\n          switch (a.which) {case 1:\n              break;case 2:case 3:\n              return;}return u = e.draggable.enabled, u && (e.draggable.enabled = !1, d.$broadcast(\"gridster-draggable-changed\", e)), z = a.pageX, A = a.pageY, o = parseInt(c.css(\"left\"), 10), p = parseInt(c.css(\"top\"), 10), q = c[0].offsetWidth, r = c[0].offsetHeight, s = f.sizeX, t = f.sizeY, i(a), !0;\n        }function m(a) {\n          var b = e.curWidth - 1;x = a.pageX, y = a.pageY;var d = x - z + B,\n              f = y - A + C;B = C = 0, z = x, A = y;var g = f,\n              h = d;return w.indexOf(\"n\") >= 0 && (r - g < G() ? (f = r - G(), C = g - f) : p + g < D && (f = D - p, C = g - f), p += f, r -= f), w.indexOf(\"s\") >= 0 && (r + g < G() ? (f = G() - r, C = g - f) : p + r + g > E && (f = E - p - r, C = g - f), r += f), w.indexOf(\"w\") >= 0 && (q - h < H() ? (d = q - H(), B = h - d) : o + h < F && (d = F - o, B = h - d), o += d, q -= d), w.indexOf(\"e\") >= 0 && (q + h < H() ? (d = H() - q, B = h - d) : o + q + h > b && (d = b - o - q, B = h - d), q += d), c.css({ top: p + \"px\", left: o + \"px\", width: q + \"px\", height: r + \"px\" }), j(a), !0;\n        }function n(a) {\n          return e.draggable.enabled !== u && (e.draggable.enabled = u, d.$broadcast(\"gridster-draggable-changed\", e)), B = C = 0, k(a), !0;\n        }var o,\n            p,\n            q,\n            r,\n            s,\n            t,\n            u,\n            v,\n            w = h,\n            x = 0,\n            y = 0,\n            z = 0,\n            A = 0,\n            B = 0,\n            C = 0,\n            D = 0,\n            E = 9999,\n            F = 0,\n            G = function () {\n          return (f.minSizeY ? f.minSizeY : 1) * e.curRowHeight - e.margins[0];\n        },\n            H = function () {\n          return (f.minSizeX ? f.minSizeX : 1) * e.curColWidth - e.margins[1];\n        },\n            I = null;this.enable = function () {\n          I || (I = a.element('<div class=\"gridster-item-resizable-handler handle-' + w + '\"></div>'), c.append(I)), v = new b(I[0], l, m, n), v.enable();\n        }, this.disable = function () {\n          I && (I.remove(), I = null), v.disable(), v = void 0;\n        }, this.destroy = function () {\n          this.disable();\n        };\n      }var i = [],\n          j = e.resizable.handles;\"string\" == typeof j && (j = e.resizable.handles.split(\",\"));for (var k = !1, l = 0, m = j.length; l < m; l++) i.push(new h(j[l]));this.enable = function () {\n        if (!k) {\n          for (var a = 0, b = i.length; a < b; a++) i[a].enable();k = !0;\n        }\n      }, this.disable = function () {\n        if (k) {\n          for (var a = 0, b = i.length; a < b; a++) i[a].disable();k = !1;\n        }\n      }, this.toggle = function (a) {\n        a ? this.enable() : this.disable();\n      }, this.destroy = function () {\n        for (var a = 0, b = i.length; a < b; a++) i[a].destroy();\n      };\n    }return c;\n  }]).factory(\"gridsterDebounce\", function () {\n    return function (a, b, c) {\n      var d;return function () {\n        var e = this,\n            f = arguments,\n            g = function () {\n          d = null, c || a.apply(e, f);\n        },\n            h = c && !d;clearTimeout(d), d = setTimeout(g, b), h && a.apply(e, f);\n      };\n    };\n  }).directive(\"gridsterItem\", [\"$parse\", \"GridsterDraggable\", \"GridsterResizable\", \"gridsterDebounce\", function (a, b, c, d) {\n    return { scope: !0, restrict: \"EA\", controller: \"GridsterItemCtrl\", controllerAs: \"gridsterItem\", require: [\"^gridster\", \"gridsterItem\"], link: function (e, f, g, h) {\n        function i() {\n          o.setPosition(o.row, o.col), r.row && r.row.assign && r.row.assign(e, o.row), r.col && r.col.assign && r.col.assign(e, o.col);\n        }function j() {\n          var a = o.setSizeX(o.sizeX, !0);a && r.sizeX && r.sizeX.assign && r.sizeX.assign(e, o.sizeX);var b = o.setSizeY(o.sizeY, !0);b && r.sizeY && r.sizeY.assign && r.sizeY.assign(e, o.sizeY), (a || b) && (o.gridster.moveOverlappingItems(o), n.layoutChanged(), e.$broadcast(\"gridster-item-resized\", o));\n        }function k() {\n          var a = document.createElement(\"div\"),\n              b = { transition: \"transitionend\", OTransition: \"oTransitionEnd\", MozTransition: \"transitionend\", WebkitTransition: \"webkitTransitionEnd\" };for (var c in b) if (void 0 !== a.style[c]) return b[c];\n        }var l,\n            m = g.gridsterItem,\n            n = h[0],\n            o = h[1];if (e.gridster = n, m) {\n          var p = a(m);l = p(e) || {}, !l && p.assign && (l = { row: o.row, col: o.col, sizeX: o.sizeX, sizeY: o.sizeY, minSizeX: 0, minSizeY: 0, maxSizeX: null, maxSizeY: null }, p.assign(e, l));\n        } else l = g;o.init(f, n), f.addClass(\"gridster-item\");for (var q = [\"minSizeX\", \"maxSizeX\", \"minSizeY\", \"maxSizeY\", \"sizeX\", \"sizeY\", \"row\", \"col\"], r = {}, s = [], t = function (b) {\n          var c;if (\"string\" == typeof l[b]) c = l[b];else if (\"string\" == typeof l[b.toLowerCase()]) c = l[b.toLowerCase()];else {\n            if (!m) return;c = m + \".\" + b;\n          }s.push('\"' + b + '\":' + c), r[b] = a(c);var d = r[b](e);\"number\" == typeof d && (o[b] = d);\n        }, u = 0, v = q.length; u < v; ++u) t(q[u]);var w = \"{\" + s.join(\",\") + \"}\";e.$watchCollection(w, function (a, b) {\n          for (var c in a) {\n            var d = a[c],\n                e = b[c];e !== d && (d = parseInt(d, 10), isNaN(d) || (o[c] = d));\n          }\n        }), e.$watch(function () {\n          return o.row + \",\" + o.col;\n        }, i), e.$watch(function () {\n          return o.sizeY + \",\" + o.sizeX + \",\" + o.minSizeX + \",\" + o.maxSizeX + \",\" + o.minSizeY + \",\" + o.maxSizeY;\n        }, j);var x = new b(f, e, n, o, l),\n            y = new c(f, e, n, o, l),\n            z = function () {\n          y.toggle(!n.isMobile && n.resizable && n.resizable.enabled);\n        };z();var A = function () {\n          x.toggle(!n.isMobile && n.draggable && n.draggable.enabled);\n        };A(), e.$on(\"gridster-draggable-changed\", A), e.$on(\"gridster-resizable-changed\", z), e.$on(\"gridster-resized\", z), e.$on(\"gridster-mobile-changed\", function () {\n          z(), A();\n        });var B = d(function () {\n          e.$apply(function () {\n            e.$broadcast(\"gridster-item-transition-end\", o);\n          });\n        }, 50);return f.on(k(), B), e.$broadcast(\"gridster-item-initialized\", o), e.$on(\"$destroy\", function () {\n          try {\n            y.destroy(), x.destroy();\n          } catch (a) {}try {\n            n.removeItem(o);\n          } catch (a) {}try {\n            o.destroy();\n          } catch (a) {}\n        });\n      } };\n  }]).directive(\"gridsterNoDrag\", function () {\n    return { restrict: \"A\", link: function (a, b) {\n        b.addClass(\"gridster-no-drag\");\n      } };\n  });\n});","/*global define:true*/\n(function (root, factory) {\n\n\t'use strict';\n\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD\n\t\tdefine(['angular'], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// CommonJS\n\t\tmodule.exports = factory(require('angular'));\n\t} else {\n\t\t// Browser, nothing \"exported\". Only registered as a module with angular.\n\t\tfactory(root.angular);\n\t}\n})(this, function (angular) {\n\n\t'use strict';\n\n\t// This returned angular module 'gridster' is what is exported.\n\n\treturn angular.module('gridster', []).constant('gridsterConfig', {\n\t\tcolumns: 6, // number of columns in the grid\n\t\tpushing: true, // whether to push other items out of the way\n\t\tfloating: true, // whether to automatically float items up so they stack\n\t\tswapping: false, // whether or not to have items switch places instead of push down if they are the same size\n\t\twidth: 'auto', // width of the grid. \"auto\" will expand the grid to its parent container\n\t\tcolWidth: 'auto', // width of grid columns. \"auto\" will divide the width of the grid evenly among the columns\n\t\trowHeight: 'match', // height of grid rows. 'match' will make it the same as the column width, a numeric value will be interpreted as pixels, '/2' is half the column width, '*5' is five times the column width, etc.\n\t\tmargins: [10, 10], // margins in between grid items\n\t\touterMargin: true,\n\t\tisMobile: false, // toggle mobile view\n\t\tmobileBreakPoint: 600, // width threshold to toggle mobile mode\n\t\tmobileModeEnabled: true, // whether or not to toggle mobile mode when screen width is less than mobileBreakPoint\n\t\tminColumns: 1, // minimum amount of columns the grid can scale down to\n\t\tminRows: 1, // minimum amount of rows to show if the grid is empty\n\t\tmaxRows: 100, // maximum amount of rows in the grid\n\t\tdefaultSizeX: 2, // default width of an item in columns\n\t\tdefaultSizeY: 1, // default height of an item in rows\n\t\tminSizeX: 1, // minimum column width of an item\n\t\tmaxSizeX: null, // maximum column width of an item\n\t\tminSizeY: 1, // minumum row height of an item\n\t\tmaxSizeY: null, // maximum row height of an item\n\t\tsaveGridItemCalculatedHeightInMobile: false, // grid item height in mobile display. true- to use the calculated height by sizeY given\n\t\tresizable: { // options to pass to resizable handler\n\t\t\tenabled: true,\n\t\t\thandles: ['s', 'e', 'n', 'w', 'se', 'ne', 'sw', 'nw']\n\t\t},\n\t\tdraggable: { // options to pass to draggable handler\n\t\t\tenabled: true,\n\t\t\tscrollSensitivity: 20, // Distance in pixels from the edge of the viewport after which the viewport should scroll, relative to pointer\n\t\t\tscrollSpeed: 15 // Speed at which the window should scroll once the mouse pointer gets within scrollSensitivity distance\n\t\t}\n\t}).controller('GridsterCtrl', ['gridsterConfig', '$timeout', function (gridsterConfig, $timeout) {\n\n\t\tvar gridster = this;\n\n\t\t/**\n   * Create options from gridsterConfig constant\n   */\n\t\tangular.extend(this, gridsterConfig);\n\n\t\tthis.resizable = angular.extend({}, gridsterConfig.resizable || {});\n\t\tthis.draggable = angular.extend({}, gridsterConfig.draggable || {});\n\n\t\tvar flag = false;\n\t\tthis.layoutChanged = function () {\n\t\t\tif (flag) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tflag = true;\n\t\t\t$timeout(function () {\n\t\t\t\tflag = false;\n\t\t\t\tif (gridster.loaded) {\n\t\t\t\t\tgridster.floatItemsUp();\n\t\t\t\t}\n\t\t\t\tgridster.updateHeight(gridster.movingItem ? gridster.movingItem.sizeY : 0);\n\t\t\t}, 30);\n\t\t};\n\n\t\t/**\n   * A positional array of the items in the grid\n   */\n\t\tthis.grid = [];\n\n\t\t/**\n   * Clean up after yourself\n   */\n\t\tthis.destroy = function () {\n\t\t\t// empty the grid to cut back on the possibility\n\t\t\t// of circular references\n\t\t\tif (this.grid) {\n\t\t\t\tthis.grid = [];\n\t\t\t}\n\t\t\tthis.$element = null;\n\t\t};\n\n\t\t/**\n   * Overrides default options\n   *\n   * @param {Object} options The options to override\n   */\n\t\tthis.setOptions = function (options) {\n\t\t\tif (!options) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\toptions = angular.extend({}, options);\n\n\t\t\t// all this to avoid using jQuery...\n\t\t\tif (options.draggable) {\n\t\t\t\tangular.extend(this.draggable, options.draggable);\n\t\t\t\tdelete options.draggable;\n\t\t\t}\n\t\t\tif (options.resizable) {\n\t\t\t\tangular.extend(this.resizable, options.resizable);\n\t\t\t\tdelete options.resizable;\n\t\t\t}\n\n\t\t\tangular.extend(this, options);\n\n\t\t\tif (!this.margins || this.margins.length !== 2) {\n\t\t\t\tthis.margins = [0, 0];\n\t\t\t} else {\n\t\t\t\tfor (var x = 0, l = this.margins.length; x < l; ++x) {\n\t\t\t\t\tthis.margins[x] = parseInt(this.margins[x], 10);\n\t\t\t\t\tif (isNaN(this.margins[x])) {\n\t\t\t\t\t\tthis.margins[x] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n   * Check if item can occupy a specified position in the grid\n   *\n   * @param {Object} item The item in question\n   * @param {Number} row The row index\n   * @param {Number} column The column index\n   * @returns {Boolean} True if if item fits\n   */\n\t\tthis.canItemOccupy = function (item, row, column) {\n\t\t\treturn row > -1 && column > -1 && item.sizeX + column <= this.columns && item.sizeY + row <= this.maxRows;\n\t\t};\n\n\t\t/**\n   * Set the item in the first suitable position\n   *\n   * @param {Object} item The item to insert\n   */\n\t\tthis.autoSetItemPosition = function (item) {\n\t\t\t// walk through each row and column looking for a place it will fit\n\t\t\tfor (var rowIndex = 0; rowIndex < this.maxRows; ++rowIndex) {\n\t\t\t\tfor (var colIndex = 0; colIndex < this.columns; ++colIndex) {\n\t\t\t\t\t// only insert if position is not already taken and it can fit\n\t\t\t\t\tvar items = this.getItems(rowIndex, colIndex, item.sizeX, item.sizeY, item);\n\t\t\t\t\tif (items.length === 0 && this.canItemOccupy(item, rowIndex, colIndex)) {\n\t\t\t\t\t\tthis.putItem(item, rowIndex, colIndex);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow new Error('Unable to place item!');\n\t\t};\n\n\t\t/**\n   * Gets items at a specific coordinate\n   *\n   * @param {Number} row\n   * @param {Number} column\n   * @param {Number} sizeX\n   * @param {Number} sizeY\n   * @param {Array} excludeItems An array of items to exclude from selection\n   * @returns {Array} Items that match the criteria\n   */\n\t\tthis.getItems = function (row, column, sizeX, sizeY, excludeItems) {\n\t\t\tvar items = [];\n\t\t\tif (!sizeX || !sizeY) {\n\t\t\t\tsizeX = sizeY = 1;\n\t\t\t}\n\t\t\tif (excludeItems && !(excludeItems instanceof Array)) {\n\t\t\t\texcludeItems = [excludeItems];\n\t\t\t}\n\t\t\tfor (var h = 0; h < sizeY; ++h) {\n\t\t\t\tfor (var w = 0; w < sizeX; ++w) {\n\t\t\t\t\tvar item = this.getItem(row + h, column + w, excludeItems);\n\t\t\t\t\tif (item && (!excludeItems || excludeItems.indexOf(item) === -1) && items.indexOf(item) === -1) {\n\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn items;\n\t\t};\n\n\t\t/**\n   * @param {Array} items\n   * @returns {Object} An item that represents the bounding box of the items\n   */\n\t\tthis.getBoundingBox = function (items) {\n\n\t\t\tif (items.length === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (items.length === 1) {\n\t\t\t\treturn {\n\t\t\t\t\trow: items[0].row,\n\t\t\t\t\tcol: items[0].col,\n\t\t\t\t\tsizeY: items[0].sizeY,\n\t\t\t\t\tsizeX: items[0].sizeX\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar maxRow = 0;\n\t\t\tvar maxCol = 0;\n\t\t\tvar minRow = 9999;\n\t\t\tvar minCol = 9999;\n\n\t\t\tfor (var i = 0, l = items.length; i < l; ++i) {\n\t\t\t\tvar item = items[i];\n\t\t\t\tminRow = Math.min(item.row, minRow);\n\t\t\t\tminCol = Math.min(item.col, minCol);\n\t\t\t\tmaxRow = Math.max(item.row + item.sizeY, maxRow);\n\t\t\t\tmaxCol = Math.max(item.col + item.sizeX, maxCol);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\trow: minRow,\n\t\t\t\tcol: minCol,\n\t\t\t\tsizeY: maxRow - minRow,\n\t\t\t\tsizeX: maxCol - minCol\n\t\t\t};\n\t\t};\n\n\t\t/**\n   * Removes an item from the grid\n   *\n   * @param {Object} item\n   */\n\t\tthis.removeItem = function (item) {\n\t\t\tfor (var rowIndex = 0, l = this.grid.length; rowIndex < l; ++rowIndex) {\n\t\t\t\tvar columns = this.grid[rowIndex];\n\t\t\t\tif (!columns) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar index = columns.indexOf(item);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tcolumns[index] = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.layoutChanged();\n\t\t};\n\n\t\t/**\n   * Returns the item at a specified coordinate\n   *\n   * @param {Number} row\n   * @param {Number} column\n   * @param {Array} excludeItems Items to exclude from selection\n   * @returns {Object} The matched item or null\n   */\n\t\tthis.getItem = function (row, column, excludeItems) {\n\t\t\tif (excludeItems && !(excludeItems instanceof Array)) {\n\t\t\t\texcludeItems = [excludeItems];\n\t\t\t}\n\t\t\tvar sizeY = 1;\n\t\t\twhile (row > -1) {\n\t\t\t\tvar sizeX = 1,\n\t\t\t\t    col = column;\n\t\t\t\twhile (col > -1) {\n\t\t\t\t\tvar items = this.grid[row];\n\t\t\t\t\tif (items) {\n\t\t\t\t\t\tvar item = items[col];\n\t\t\t\t\t\tif (item && (!excludeItems || excludeItems.indexOf(item) === -1) && item.sizeX >= sizeX && item.sizeY >= sizeY) {\n\t\t\t\t\t\t\treturn item;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t++sizeX;\n\t\t\t\t\t--col;\n\t\t\t\t}\n\t\t\t\t--row;\n\t\t\t\t++sizeY;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\t/**\n   * Insert an array of items into the grid\n   *\n   * @param {Array} items An array of items to insert\n   */\n\t\tthis.putItems = function (items) {\n\t\t\tfor (var i = 0, l = items.length; i < l; ++i) {\n\t\t\t\tthis.putItem(items[i]);\n\t\t\t}\n\t\t};\n\n\t\t/**\n   * Insert a single item into the grid\n   *\n   * @param {Object} item The item to insert\n   * @param {Number} row (Optional) Specifies the items row index\n   * @param {Number} column (Optional) Specifies the items column index\n   * @param {Array} ignoreItems\n   */\n\t\tthis.putItem = function (item, row, column, ignoreItems) {\n\t\t\t// auto place item if no row specified\n\t\t\tif (typeof row === 'undefined' || row === null) {\n\t\t\t\trow = item.row;\n\t\t\t\tcolumn = item.col;\n\t\t\t\tif (typeof row === 'undefined' || row === null) {\n\t\t\t\t\tthis.autoSetItemPosition(item);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// keep item within allowed bounds\n\t\t\tif (!this.canItemOccupy(item, row, column)) {\n\t\t\t\tcolumn = Math.min(this.columns - item.sizeX, Math.max(0, column));\n\t\t\t\trow = Math.min(this.maxRows - item.sizeY, Math.max(0, row));\n\t\t\t}\n\n\t\t\t// check if item is already in grid\n\t\t\tif (item.oldRow !== null && typeof item.oldRow !== 'undefined') {\n\t\t\t\tvar samePosition = item.oldRow === row && item.oldColumn === column;\n\t\t\t\tvar inGrid = this.grid[row] && this.grid[row][column] === item;\n\t\t\t\tif (samePosition && inGrid) {\n\t\t\t\t\titem.row = row;\n\t\t\t\t\titem.col = column;\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// remove from old position\n\t\t\t\t\tvar oldRow = this.grid[item.oldRow];\n\t\t\t\t\tif (oldRow && oldRow[item.oldColumn] === item) {\n\t\t\t\t\t\tdelete oldRow[item.oldColumn];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\titem.oldRow = item.row = row;\n\t\t\titem.oldColumn = item.col = column;\n\n\t\t\tthis.moveOverlappingItems(item, ignoreItems);\n\n\t\t\tif (!this.grid[row]) {\n\t\t\t\tthis.grid[row] = [];\n\t\t\t}\n\t\t\tthis.grid[row][column] = item;\n\n\t\t\tif (this.movingItem === item) {\n\t\t\t\tthis.floatItemUp(item);\n\t\t\t}\n\t\t\tthis.layoutChanged();\n\t\t};\n\n\t\t/**\n   * Trade row and column if item1 with item2\n   *\n   * @param {Object} item1\n   * @param {Object} item2\n   */\n\t\tthis.swapItems = function (item1, item2) {\n\t\t\tthis.grid[item1.row][item1.col] = item2;\n\t\t\tthis.grid[item2.row][item2.col] = item1;\n\n\t\t\tvar item1Row = item1.row;\n\t\t\tvar item1Col = item1.col;\n\t\t\titem1.row = item2.row;\n\t\t\titem1.col = item2.col;\n\t\t\titem2.row = item1Row;\n\t\t\titem2.col = item1Col;\n\t\t};\n\n\t\t/**\n   * Prevents items from being overlapped\n   *\n   * @param {Object} item The item that should remain\n   * @param {Array} ignoreItems\n   */\n\t\tthis.moveOverlappingItems = function (item, ignoreItems) {\n\t\t\t// don't move item, so ignore it\n\t\t\tif (!ignoreItems) {\n\t\t\t\tignoreItems = [item];\n\t\t\t} else if (ignoreItems.indexOf(item) === -1) {\n\t\t\t\tignoreItems = ignoreItems.slice(0);\n\t\t\t\tignoreItems.push(item);\n\t\t\t}\n\n\t\t\t// get the items in the space occupied by the item's coordinates\n\t\t\tvar overlappingItems = this.getItems(item.row, item.col, item.sizeX, item.sizeY, ignoreItems);\n\t\t\tthis.moveItemsDown(overlappingItems, item.row + item.sizeY, ignoreItems);\n\t\t};\n\n\t\t/**\n   * Moves an array of items to a specified row\n   *\n   * @param {Array} items The items to move\n   * @param {Number} newRow The target row\n   * @param {Array} ignoreItems\n   */\n\t\tthis.moveItemsDown = function (items, newRow, ignoreItems) {\n\t\t\tif (!items || items.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\titems.sort(function (a, b) {\n\t\t\t\treturn a.row - b.row;\n\t\t\t});\n\n\t\t\tignoreItems = ignoreItems ? ignoreItems.slice(0) : [];\n\t\t\tvar topRows = {},\n\t\t\t    item,\n\t\t\t    i,\n\t\t\t    l;\n\n\t\t\t// calculate the top rows in each column\n\t\t\tfor (i = 0, l = items.length; i < l; ++i) {\n\t\t\t\titem = items[i];\n\t\t\t\tvar topRow = topRows[item.col];\n\t\t\t\tif (typeof topRow === 'undefined' || item.row < topRow) {\n\t\t\t\t\ttopRows[item.col] = item.row;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// move each item down from the top row in its column to the row\n\t\t\tfor (i = 0, l = items.length; i < l; ++i) {\n\t\t\t\titem = items[i];\n\t\t\t\tvar rowsToMove = newRow - topRows[item.col];\n\t\t\t\tthis.moveItemDown(item, item.row + rowsToMove, ignoreItems);\n\t\t\t\tignoreItems.push(item);\n\t\t\t}\n\t\t};\n\n\t\t/**\n   * Moves an item down to a specified row\n   *\n   * @param {Object} item The item to move\n   * @param {Number} newRow The target row\n   * @param {Array} ignoreItems\n   */\n\t\tthis.moveItemDown = function (item, newRow, ignoreItems) {\n\t\t\tif (item.row >= newRow) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twhile (item.row < newRow) {\n\t\t\t\t++item.row;\n\t\t\t\tthis.moveOverlappingItems(item, ignoreItems);\n\t\t\t}\n\t\t\tthis.putItem(item, item.row, item.col, ignoreItems);\n\t\t};\n\n\t\t/**\n   * Moves all items up as much as possible\n   */\n\t\tthis.floatItemsUp = function () {\n\t\t\tif (this.floating === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (var rowIndex = 0, l = this.grid.length; rowIndex < l; ++rowIndex) {\n\t\t\t\tvar columns = this.grid[rowIndex];\n\t\t\t\tif (!columns) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (var colIndex = 0, len = columns.length; colIndex < len; ++colIndex) {\n\t\t\t\t\tvar item = columns[colIndex];\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\tthis.floatItemUp(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n   * Float an item up to the most suitable row\n   *\n   * @param {Object} item The item to move\n   */\n\t\tthis.floatItemUp = function (item) {\n\t\t\tif (this.floating === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar colIndex = item.col,\n\t\t\t    sizeY = item.sizeY,\n\t\t\t    sizeX = item.sizeX,\n\t\t\t    bestRow = null,\n\t\t\t    bestColumn = null,\n\t\t\t    rowIndex = item.row - 1;\n\n\t\t\twhile (rowIndex > -1) {\n\t\t\t\tvar items = this.getItems(rowIndex, colIndex, sizeX, sizeY, item);\n\t\t\t\tif (items.length !== 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbestRow = rowIndex;\n\t\t\t\tbestColumn = colIndex;\n\t\t\t\t--rowIndex;\n\t\t\t}\n\t\t\tif (bestRow !== null) {\n\t\t\t\tthis.putItem(item, bestRow, bestColumn);\n\t\t\t}\n\t\t};\n\n\t\t/**\n   * Update gridsters height\n   *\n   * @param {Number} plus (Optional) Additional height to add\n   */\n\t\tthis.updateHeight = function (plus) {\n\t\t\tvar maxHeight = this.minRows;\n\t\t\tplus = plus || 0;\n\t\t\tfor (var rowIndex = this.grid.length; rowIndex >= 0; --rowIndex) {\n\t\t\t\tvar columns = this.grid[rowIndex];\n\t\t\t\tif (!columns) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (var colIndex = 0, len = columns.length; colIndex < len; ++colIndex) {\n\t\t\t\t\tif (columns[colIndex]) {\n\t\t\t\t\t\tmaxHeight = Math.max(maxHeight, rowIndex + plus + columns[colIndex].sizeY);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.gridHeight = this.maxRows - maxHeight > 0 ? Math.min(this.maxRows, maxHeight) : Math.max(this.maxRows, maxHeight);\n\t\t};\n\n\t\t/**\n   * Returns the number of rows that will fit in given amount of pixels\n   *\n   * @param {Number} pixels\n   * @param {Boolean} ceilOrFloor (Optional) Determines rounding method\n   */\n\t\tthis.pixelsToRows = function (pixels, ceilOrFloor) {\n\t\t\tif (!this.outerMargin) {\n\t\t\t\tpixels += this.margins[0] / 2;\n\t\t\t}\n\n\t\t\tif (ceilOrFloor === true) {\n\t\t\t\treturn Math.ceil(pixels / this.curRowHeight);\n\t\t\t} else if (ceilOrFloor === false) {\n\t\t\t\treturn Math.floor(pixels / this.curRowHeight);\n\t\t\t}\n\n\t\t\treturn Math.round(pixels / this.curRowHeight);\n\t\t};\n\n\t\t/**\n   * Returns the number of columns that will fit in a given amount of pixels\n   *\n   * @param {Number} pixels\n   * @param {Boolean} ceilOrFloor (Optional) Determines rounding method\n   * @returns {Number} The number of columns\n   */\n\t\tthis.pixelsToColumns = function (pixels, ceilOrFloor) {\n\t\t\tif (!this.outerMargin) {\n\t\t\t\tpixels += this.margins[1] / 2;\n\t\t\t}\n\n\t\t\tif (ceilOrFloor === true) {\n\t\t\t\treturn Math.ceil(pixels / this.curColWidth);\n\t\t\t} else if (ceilOrFloor === false) {\n\t\t\t\treturn Math.floor(pixels / this.curColWidth);\n\t\t\t}\n\n\t\t\treturn Math.round(pixels / this.curColWidth);\n\t\t};\n\t}]).directive('gridsterPreview', function () {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tscope: true,\n\t\t\trequire: '^gridster',\n\t\t\ttemplate: '<div ng-style=\"previewStyle()\" class=\"gridster-item gridster-preview-holder\"></div>',\n\t\t\tlink: function (scope, $el, attrs, gridster) {\n\n\t\t\t\t/**\n     * @returns {Object} style object for preview element\n     */\n\t\t\t\tscope.previewStyle = function () {\n\t\t\t\t\tif (!gridster.movingItem) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tdisplay: 'none'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\theight: gridster.movingItem.sizeY * gridster.curRowHeight - gridster.margins[0] + 'px',\n\t\t\t\t\t\twidth: gridster.movingItem.sizeX * gridster.curColWidth - gridster.margins[1] + 'px',\n\t\t\t\t\t\ttop: gridster.movingItem.row * gridster.curRowHeight + (gridster.outerMargin ? gridster.margins[0] : 0) + 'px',\n\t\t\t\t\t\tleft: gridster.movingItem.col * gridster.curColWidth + (gridster.outerMargin ? gridster.margins[1] : 0) + 'px'\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n  * The gridster directive\n  *\n  * @param {Function} $timeout\n  * @param {Object} $window\n  * @param {Object} $rootScope\n  * @param {Function} gridsterDebounce\n  */\n\t).directive('gridster', ['$timeout', '$window', '$rootScope', 'gridsterDebounce', function ($timeout, $window, $rootScope, gridsterDebounce) {\n\t\treturn {\n\t\t\tscope: true,\n\t\t\trestrict: 'EAC',\n\t\t\tcontroller: 'GridsterCtrl',\n\t\t\tcontrollerAs: 'gridster',\n\t\t\tcompile: function ($tplElem) {\n\n\t\t\t\t$tplElem.prepend('<div ng-if=\"gridster.movingItem\" gridster-preview></div>');\n\n\t\t\t\treturn function (scope, $elem, attrs, gridster) {\n\t\t\t\t\tgridster.loaded = false;\n\n\t\t\t\t\tgridster.$element = $elem;\n\n\t\t\t\t\tscope.gridster = gridster;\n\n\t\t\t\t\t$elem.addClass('gridster');\n\n\t\t\t\t\tvar isVisible = function (ele) {\n\t\t\t\t\t\treturn ele.style.visibility !== 'hidden' && ele.style.display !== 'none';\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction updateHeight() {\n\t\t\t\t\t\t$elem.css('height', gridster.gridHeight * gridster.curRowHeight + (gridster.outerMargin ? gridster.margins[0] : -gridster.margins[0]) + 'px');\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.$watch(function () {\n\t\t\t\t\t\treturn gridster.gridHeight;\n\t\t\t\t\t}, updateHeight);\n\n\t\t\t\t\tscope.$watch(function () {\n\t\t\t\t\t\treturn gridster.movingItem;\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tgridster.updateHeight(gridster.movingItem ? gridster.movingItem.sizeY : 0);\n\t\t\t\t\t});\n\n\t\t\t\t\tfunction refresh(config) {\n\t\t\t\t\t\tgridster.setOptions(config);\n\n\t\t\t\t\t\tif (!isVisible($elem[0])) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// resolve \"auto\" & \"match\" values\n\t\t\t\t\t\tif (gridster.width === 'auto') {\n\t\t\t\t\t\t\tgridster.curWidth = $elem[0].offsetWidth || parseInt($elem.css('width'), 10);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgridster.curWidth = gridster.width;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (gridster.colWidth === 'auto') {\n\t\t\t\t\t\t\tgridster.curColWidth = (gridster.curWidth + (gridster.outerMargin ? -gridster.margins[1] : gridster.margins[1])) / gridster.columns;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgridster.curColWidth = gridster.colWidth;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgridster.curRowHeight = gridster.rowHeight;\n\t\t\t\t\t\tif (typeof gridster.rowHeight === 'string') {\n\t\t\t\t\t\t\tif (gridster.rowHeight === 'match') {\n\t\t\t\t\t\t\t\tgridster.curRowHeight = Math.round(gridster.curColWidth);\n\t\t\t\t\t\t\t} else if (gridster.rowHeight.indexOf('*') !== -1) {\n\t\t\t\t\t\t\t\tgridster.curRowHeight = Math.round(gridster.curColWidth * gridster.rowHeight.replace('*', '').replace(' ', ''));\n\t\t\t\t\t\t\t} else if (gridster.rowHeight.indexOf('/') !== -1) {\n\t\t\t\t\t\t\t\tgridster.curRowHeight = Math.round(gridster.curColWidth / gridster.rowHeight.replace('/', '').replace(' ', ''));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgridster.isMobile = gridster.mobileModeEnabled && gridster.curWidth <= gridster.mobileBreakPoint;\n\n\t\t\t\t\t\t// loop through all items and reset their CSS\n\t\t\t\t\t\tfor (var rowIndex = 0, l = gridster.grid.length; rowIndex < l; ++rowIndex) {\n\t\t\t\t\t\t\tvar columns = gridster.grid[rowIndex];\n\t\t\t\t\t\t\tif (!columns) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfor (var colIndex = 0, len = columns.length; colIndex < len; ++colIndex) {\n\t\t\t\t\t\t\t\tif (columns[colIndex]) {\n\t\t\t\t\t\t\t\t\tvar item = columns[colIndex];\n\t\t\t\t\t\t\t\t\titem.setElementPosition();\n\t\t\t\t\t\t\t\t\titem.setElementSizeY();\n\t\t\t\t\t\t\t\t\titem.setElementSizeX();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tupdateHeight();\n\t\t\t\t\t}\n\n\t\t\t\t\tvar optionsKey = attrs.gridster;\n\t\t\t\t\tif (optionsKey) {\n\t\t\t\t\t\tscope.$parent.$watch(optionsKey, function (newConfig) {\n\t\t\t\t\t\t\trefresh(newConfig);\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trefresh({});\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.$watch(function () {\n\t\t\t\t\t\treturn gridster.loaded;\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tif (gridster.loaded) {\n\t\t\t\t\t\t\t$elem.addClass('gridster-loaded');\n\t\t\t\t\t\t\t$rootScope.$broadcast('gridster-loaded', gridster);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$elem.removeClass('gridster-loaded');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tscope.$watch(function () {\n\t\t\t\t\t\treturn gridster.isMobile;\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tif (gridster.isMobile) {\n\t\t\t\t\t\t\t$elem.addClass('gridster-mobile').removeClass('gridster-desktop');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$elem.removeClass('gridster-mobile').addClass('gridster-desktop');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$rootScope.$broadcast('gridster-mobile-changed', gridster);\n\t\t\t\t\t});\n\n\t\t\t\t\tscope.$watch(function () {\n\t\t\t\t\t\treturn gridster.draggable;\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\t$rootScope.$broadcast('gridster-draggable-changed', gridster);\n\t\t\t\t\t}, true);\n\n\t\t\t\t\tscope.$watch(function () {\n\t\t\t\t\t\treturn gridster.resizable;\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\t$rootScope.$broadcast('gridster-resizable-changed', gridster);\n\t\t\t\t\t}, true);\n\n\t\t\t\t\tvar prevWidth = $elem[0].offsetWidth || parseInt($elem.css('width'), 10);\n\n\t\t\t\t\tvar resize = function () {\n\t\t\t\t\t\tvar width = $elem[0].offsetWidth || parseInt($elem.css('width'), 10);\n\n\t\t\t\t\t\tif (!width || width === prevWidth || gridster.movingItem) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprevWidth = width;\n\n\t\t\t\t\t\tif (gridster.loaded) {\n\t\t\t\t\t\t\t$elem.removeClass('gridster-loaded');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trefresh();\n\n\t\t\t\t\t\tif (gridster.loaded) {\n\t\t\t\t\t\t\t$elem.addClass('gridster-loaded');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$rootScope.$broadcast('gridster-resized', [width, $elem[0].offsetHeight], gridster);\n\t\t\t\t\t};\n\n\t\t\t\t\t// track element width changes any way we can\n\t\t\t\t\tvar onResize = gridsterDebounce(function onResize() {\n\t\t\t\t\t\tresize();\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\n\t\t\t\t\tscope.$watch(function () {\n\t\t\t\t\t\treturn isVisible($elem[0]);\n\t\t\t\t\t}, onResize);\n\n\t\t\t\t\t// see https://github.com/sdecima/javascript-detect-element-resize\n\t\t\t\t\tif (typeof window.addResizeListener === 'function') {\n\t\t\t\t\t\twindow.addResizeListener($elem[0], onResize);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscope.$watch(function () {\n\t\t\t\t\t\t\treturn $elem[0].offsetWidth || parseInt($elem.css('width'), 10);\n\t\t\t\t\t\t}, resize);\n\t\t\t\t\t}\n\t\t\t\t\tvar $win = angular.element($window);\n\t\t\t\t\t$win.on('resize', onResize);\n\n\t\t\t\t\t// be sure to cleanup\n\t\t\t\t\tscope.$on('$destroy', function () {\n\t\t\t\t\t\tgridster.destroy();\n\t\t\t\t\t\t$win.off('resize', onResize);\n\t\t\t\t\t\tif (typeof window.removeResizeListener === 'function') {\n\t\t\t\t\t\t\twindow.removeResizeListener($elem[0], onResize);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// allow a little time to place items before floating up\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\tscope.$watch('gridster.floating', function () {\n\t\t\t\t\t\t\tgridster.floatItemsUp();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tgridster.loaded = true;\n\t\t\t\t\t}, 100);\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}]).controller('GridsterItemCtrl', function () {\n\t\tthis.$element = null;\n\t\tthis.gridster = null;\n\t\tthis.row = null;\n\t\tthis.col = null;\n\t\tthis.sizeX = null;\n\t\tthis.sizeY = null;\n\t\tthis.minSizeX = 0;\n\t\tthis.minSizeY = 0;\n\t\tthis.maxSizeX = null;\n\t\tthis.maxSizeY = null;\n\n\t\tthis.init = function ($element, gridster) {\n\t\t\tthis.$element = $element;\n\t\t\tthis.gridster = gridster;\n\t\t\tthis.sizeX = gridster.defaultSizeX;\n\t\t\tthis.sizeY = gridster.defaultSizeY;\n\t\t};\n\n\t\tthis.destroy = function () {\n\t\t\t// set these to null to avoid the possibility of circular references\n\t\t\tthis.gridster = null;\n\t\t\tthis.$element = null;\n\t\t};\n\n\t\t/**\n   * Returns the items most important attributes\n   */\n\t\tthis.toJSON = function () {\n\t\t\treturn {\n\t\t\t\trow: this.row,\n\t\t\t\tcol: this.col,\n\t\t\t\tsizeY: this.sizeY,\n\t\t\t\tsizeX: this.sizeX\n\t\t\t};\n\t\t};\n\n\t\tthis.isMoving = function () {\n\t\t\treturn this.gridster.movingItem === this;\n\t\t};\n\n\t\t/**\n   * Set the items position\n   *\n   * @param {Number} row\n   * @param {Number} column\n   */\n\t\tthis.setPosition = function (row, column) {\n\t\t\tthis.gridster.putItem(this, row, column);\n\n\t\t\tif (!this.isMoving()) {\n\t\t\t\tthis.setElementPosition();\n\t\t\t}\n\t\t};\n\n\t\t/**\n   * Sets a specified size property\n   *\n   * @param {String} key Can be either \"x\" or \"y\"\n   * @param {Number} value The size amount\n   * @param {Boolean} preventMove\n   */\n\t\tthis.setSize = function (key, value, preventMove) {\n\t\t\tkey = key.toUpperCase();\n\t\t\tvar camelCase = 'size' + key,\n\t\t\t    titleCase = 'Size' + key;\n\t\t\tif (value === '') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvalue = parseInt(value, 10);\n\t\t\tif (isNaN(value) || value === 0) {\n\t\t\t\tvalue = this.gridster['default' + titleCase];\n\t\t\t}\n\t\t\tvar max = key === 'X' ? this.gridster.columns : this.gridster.maxRows;\n\t\t\tif (this['max' + titleCase]) {\n\t\t\t\tmax = Math.min(this['max' + titleCase], max);\n\t\t\t}\n\t\t\tif (this.gridster['max' + titleCase]) {\n\t\t\t\tmax = Math.min(this.gridster['max' + titleCase], max);\n\t\t\t}\n\t\t\tif (key === 'X' && this.cols) {\n\t\t\t\tmax -= this.cols;\n\t\t\t} else if (key === 'Y' && this.rows) {\n\t\t\t\tmax -= this.rows;\n\t\t\t}\n\n\t\t\tvar min = 0;\n\t\t\tif (this['min' + titleCase]) {\n\t\t\t\tmin = Math.max(this['min' + titleCase], min);\n\t\t\t}\n\t\t\tif (this.gridster['min' + titleCase]) {\n\t\t\t\tmin = Math.max(this.gridster['min' + titleCase], min);\n\t\t\t}\n\n\t\t\tvalue = Math.max(Math.min(value, max), min);\n\n\t\t\tvar changed = this[camelCase] !== value || this['old' + titleCase] && this['old' + titleCase] !== value;\n\t\t\tthis['old' + titleCase] = this[camelCase] = value;\n\n\t\t\tif (!this.isMoving()) {\n\t\t\t\tthis['setElement' + titleCase]();\n\t\t\t}\n\t\t\tif (!preventMove && changed) {\n\t\t\t\tthis.gridster.moveOverlappingItems(this);\n\t\t\t\tthis.gridster.layoutChanged();\n\t\t\t}\n\n\t\t\treturn changed;\n\t\t};\n\n\t\t/**\n   * Sets the items sizeY property\n   *\n   * @param {Number} rows\n   * @param {Boolean} preventMove\n   */\n\t\tthis.setSizeY = function (rows, preventMove) {\n\t\t\treturn this.setSize('Y', rows, preventMove);\n\t\t};\n\n\t\t/**\n   * Sets the items sizeX property\n   *\n   * @param {Number} columns\n   * @param {Boolean} preventMove\n   */\n\t\tthis.setSizeX = function (columns, preventMove) {\n\t\t\treturn this.setSize('X', columns, preventMove);\n\t\t};\n\n\t\t/**\n   * Sets an elements position on the page\n   */\n\t\tthis.setElementPosition = function () {\n\t\t\tif (this.gridster.isMobile) {\n\t\t\t\tthis.$element.css({\n\t\t\t\t\tmarginLeft: this.gridster.margins[0] + 'px',\n\t\t\t\t\tmarginRight: this.gridster.margins[0] + 'px',\n\t\t\t\t\tmarginTop: this.gridster.margins[1] + 'px',\n\t\t\t\t\tmarginBottom: this.gridster.margins[1] + 'px',\n\t\t\t\t\ttop: '',\n\t\t\t\t\tleft: ''\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.$element.css({\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\ttop: this.row * this.gridster.curRowHeight + (this.gridster.outerMargin ? this.gridster.margins[0] : 0) + 'px',\n\t\t\t\t\tleft: this.col * this.gridster.curColWidth + (this.gridster.outerMargin ? this.gridster.margins[1] : 0) + 'px'\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t/**\n   * Sets an elements height\n   */\n\t\tthis.setElementSizeY = function () {\n\t\t\tif (this.gridster.isMobile && !this.gridster.saveGridItemCalculatedHeightInMobile) {\n\t\t\t\tthis.$element.css('height', '');\n\t\t\t} else {\n\t\t\t\tthis.$element.css('height', this.sizeY * this.gridster.curRowHeight - this.gridster.margins[0] + 'px');\n\t\t\t}\n\t\t};\n\n\t\t/**\n   * Sets an elements width\n   */\n\t\tthis.setElementSizeX = function () {\n\t\t\tif (this.gridster.isMobile) {\n\t\t\t\tthis.$element.css('width', '');\n\t\t\t} else {\n\t\t\t\tthis.$element.css('width', this.sizeX * this.gridster.curColWidth - this.gridster.margins[1] + 'px');\n\t\t\t}\n\t\t};\n\n\t\t/**\n   * Gets an element's width\n   */\n\t\tthis.getElementSizeX = function () {\n\t\t\treturn this.sizeX * this.gridster.curColWidth - this.gridster.margins[1];\n\t\t};\n\n\t\t/**\n   * Gets an element's height\n   */\n\t\tthis.getElementSizeY = function () {\n\t\t\treturn this.sizeY * this.gridster.curRowHeight - this.gridster.margins[0];\n\t\t};\n\t}).factory('GridsterTouch', [function () {\n\t\treturn function GridsterTouch(target, startEvent, moveEvent, endEvent) {\n\t\t\tvar lastXYById = {};\n\n\t\t\t//  Opera doesn't have Object.keys so we use this wrapper\n\t\t\tvar numberOfKeys = function (theObject) {\n\t\t\t\tif (Object.keys) {\n\t\t\t\t\treturn Object.keys(theObject).length;\n\t\t\t\t}\n\n\t\t\t\tvar n = 0,\n\t\t\t\t    key;\n\t\t\t\tfor (key in theObject) {\n\t\t\t\t\t++n;\n\t\t\t\t}\n\n\t\t\t\treturn n;\n\t\t\t};\n\n\t\t\t//  this calculates the delta needed to convert pageX/Y to offsetX/Y because offsetX/Y don't exist in the TouchEvent object or in Firefox's MouseEvent object\n\t\t\tvar computeDocumentToElementDelta = function (theElement) {\n\t\t\t\tvar elementLeft = 0;\n\t\t\t\tvar elementTop = 0;\n\t\t\t\tvar oldIEUserAgent = navigator.userAgent.match(/\\bMSIE\\b/);\n\n\t\t\t\tfor (var offsetElement = theElement; offsetElement != null; offsetElement = offsetElement.offsetParent) {\n\t\t\t\t\t//  the following is a major hack for versions of IE less than 8 to avoid an apparent problem on the IEBlog with double-counting the offsets\n\t\t\t\t\t//  this may not be a general solution to IE7's problem with offsetLeft/offsetParent\n\t\t\t\t\tif (oldIEUserAgent && (!document.documentMode || document.documentMode < 8) && offsetElement.currentStyle.position === 'relative' && offsetElement.offsetParent && offsetElement.offsetParent.currentStyle.position === 'relative' && offsetElement.offsetLeft === offsetElement.offsetParent.offsetLeft) {\n\t\t\t\t\t\t// add only the top\n\t\t\t\t\t\telementTop += offsetElement.offsetTop;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telementLeft += offsetElement.offsetLeft;\n\t\t\t\t\t\telementTop += offsetElement.offsetTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tx: elementLeft,\n\t\t\t\t\ty: elementTop\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t//  cache the delta from the document to our event target (reinitialized each mousedown/MSPointerDown/touchstart)\n\t\t\tvar documentToTargetDelta = computeDocumentToElementDelta(target);\n\t\t\tvar useSetReleaseCapture = false;\n\n\t\t\t//  common event handler for the mouse/pointer/touch models and their down/start, move, up/end, and cancel events\n\t\t\tvar doEvent = function (theEvtObj) {\n\n\t\t\t\tif (theEvtObj.type === 'mousemove' && numberOfKeys(lastXYById) === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar prevent = true;\n\n\t\t\t\tvar pointerList = theEvtObj.changedTouches ? theEvtObj.changedTouches : [theEvtObj];\n\t\t\t\tfor (var i = 0; i < pointerList.length; ++i) {\n\t\t\t\t\tvar pointerObj = pointerList[i];\n\t\t\t\t\tvar pointerId = typeof pointerObj.identifier !== 'undefined' ? pointerObj.identifier : typeof pointerObj.pointerId !== 'undefined' ? pointerObj.pointerId : 1;\n\n\t\t\t\t\t//  use the pageX/Y coordinates to compute target-relative coordinates when we have them (in ie < 9, we need to do a little work to put them there)\n\t\t\t\t\tif (typeof pointerObj.pageX === 'undefined') {\n\t\t\t\t\t\t//  initialize assuming our source element is our target\n\t\t\t\t\t\tpointerObj.pageX = pointerObj.offsetX + documentToTargetDelta.x;\n\t\t\t\t\t\tpointerObj.pageY = pointerObj.offsetY + documentToTargetDelta.y;\n\n\t\t\t\t\t\tif (pointerObj.srcElement.offsetParent === target && document.documentMode && document.documentMode === 8 && pointerObj.type === 'mousedown') {\n\t\t\t\t\t\t\t//  source element is a child piece of VML, we're in IE8, and we've not called setCapture yet - add the origin of the source element\n\t\t\t\t\t\t\tpointerObj.pageX += pointerObj.srcElement.offsetLeft;\n\t\t\t\t\t\t\tpointerObj.pageY += pointerObj.srcElement.offsetTop;\n\t\t\t\t\t\t} else if (pointerObj.srcElement !== target && !document.documentMode || document.documentMode < 8) {\n\t\t\t\t\t\t\t//  source element isn't the target (most likely it's a child piece of VML) and we're in a version of IE before IE8 -\n\t\t\t\t\t\t\t//  the offsetX/Y values are unpredictable so use the clientX/Y values and adjust by the scroll offsets of its parents\n\t\t\t\t\t\t\t//  to get the document-relative coordinates (the same as pageX/Y)\n\t\t\t\t\t\t\tvar sx = -2,\n\t\t\t\t\t\t\t    sy = -2; // adjust for old IE's 2-pixel border\n\t\t\t\t\t\t\tfor (var scrollElement = pointerObj.srcElement; scrollElement !== null; scrollElement = scrollElement.parentNode) {\n\t\t\t\t\t\t\t\tsx += scrollElement.scrollLeft ? scrollElement.scrollLeft : 0;\n\t\t\t\t\t\t\t\tsy += scrollElement.scrollTop ? scrollElement.scrollTop : 0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpointerObj.pageX = pointerObj.clientX + sx;\n\t\t\t\t\t\t\tpointerObj.pageY = pointerObj.clientY + sy;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar pageX = pointerObj.pageX;\n\t\t\t\t\tvar pageY = pointerObj.pageY;\n\n\t\t\t\t\tif (theEvtObj.type.match(/(start|down)$/i)) {\n\t\t\t\t\t\t//  clause for processing MSPointerDown, touchstart, and mousedown\n\n\t\t\t\t\t\t//  refresh the document-to-target delta on start in case the target has moved relative to document\n\t\t\t\t\t\tdocumentToTargetDelta = computeDocumentToElementDelta(target);\n\n\t\t\t\t\t\t//  protect against failing to get an up or end on this pointerId\n\t\t\t\t\t\tif (lastXYById[pointerId]) {\n\t\t\t\t\t\t\tif (endEvent) {\n\t\t\t\t\t\t\t\tendEvent({\n\t\t\t\t\t\t\t\t\ttarget: theEvtObj.target,\n\t\t\t\t\t\t\t\t\twhich: theEvtObj.which,\n\t\t\t\t\t\t\t\t\tpointerId: pointerId,\n\t\t\t\t\t\t\t\t\tpageX: pageX,\n\t\t\t\t\t\t\t\t\tpageY: pageY\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdelete lastXYById[pointerId];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (startEvent) {\n\t\t\t\t\t\t\tif (prevent) {\n\t\t\t\t\t\t\t\tprevent = startEvent({\n\t\t\t\t\t\t\t\t\ttarget: theEvtObj.target,\n\t\t\t\t\t\t\t\t\twhich: theEvtObj.which,\n\t\t\t\t\t\t\t\t\tpointerId: pointerId,\n\t\t\t\t\t\t\t\t\tpageX: pageX,\n\t\t\t\t\t\t\t\t\tpageY: pageY\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//  init last page positions for this pointer\n\t\t\t\t\t\tlastXYById[pointerId] = {\n\t\t\t\t\t\t\tx: pageX,\n\t\t\t\t\t\t\ty: pageY\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// IE pointer model\n\t\t\t\t\t\tif (target.msSetPointerCapture && prevent) {\n\t\t\t\t\t\t\ttarget.msSetPointerCapture(pointerId);\n\t\t\t\t\t\t} else if (theEvtObj.type === 'mousedown' && numberOfKeys(lastXYById) === 1) {\n\t\t\t\t\t\t\tif (useSetReleaseCapture) {\n\t\t\t\t\t\t\t\ttarget.setCapture(true);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdocument.addEventListener('mousemove', doEvent, false);\n\t\t\t\t\t\t\t\tdocument.addEventListener('mouseup', doEvent, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (theEvtObj.type.match(/move$/i)) {\n\t\t\t\t\t\t//  clause handles mousemove, MSPointerMove, and touchmove\n\n\t\t\t\t\t\tif (lastXYById[pointerId] && !(lastXYById[pointerId].x === pageX && lastXYById[pointerId].y === pageY)) {\n\t\t\t\t\t\t\t//  only extend if the pointer is down and it's not the same as the last point\n\n\t\t\t\t\t\t\tif (moveEvent && prevent) {\n\t\t\t\t\t\t\t\tprevent = moveEvent({\n\t\t\t\t\t\t\t\t\ttarget: theEvtObj.target,\n\t\t\t\t\t\t\t\t\twhich: theEvtObj.which,\n\t\t\t\t\t\t\t\t\tpointerId: pointerId,\n\t\t\t\t\t\t\t\t\tpageX: pageX,\n\t\t\t\t\t\t\t\t\tpageY: pageY\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//  update last page positions for this pointer\n\t\t\t\t\t\t\tlastXYById[pointerId].x = pageX;\n\t\t\t\t\t\t\tlastXYById[pointerId].y = pageY;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (lastXYById[pointerId] && theEvtObj.type.match(/(up|end|cancel)$/i)) {\n\t\t\t\t\t\t//  clause handles up/end/cancel\n\n\t\t\t\t\t\tif (endEvent && prevent) {\n\t\t\t\t\t\t\tprevent = endEvent({\n\t\t\t\t\t\t\t\ttarget: theEvtObj.target,\n\t\t\t\t\t\t\t\twhich: theEvtObj.which,\n\t\t\t\t\t\t\t\tpointerId: pointerId,\n\t\t\t\t\t\t\t\tpageX: pageX,\n\t\t\t\t\t\t\t\tpageY: pageY\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//  delete last page positions for this pointer\n\t\t\t\t\t\tdelete lastXYById[pointerId];\n\n\t\t\t\t\t\t//  in the Microsoft pointer model, release the capture for this pointer\n\t\t\t\t\t\t//  in the mouse model, release the capture or remove document-level event handlers if there are no down points\n\t\t\t\t\t\t//  nothing is required for the iOS touch model because capture is implied on touchstart\n\t\t\t\t\t\tif (target.msReleasePointerCapture) {\n\t\t\t\t\t\t\ttarget.msReleasePointerCapture(pointerId);\n\t\t\t\t\t\t} else if (theEvtObj.type === 'mouseup' && numberOfKeys(lastXYById) === 0) {\n\t\t\t\t\t\t\tif (useSetReleaseCapture) {\n\t\t\t\t\t\t\t\ttarget.releaseCapture();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdocument.removeEventListener('mousemove', doEvent, false);\n\t\t\t\t\t\t\t\tdocument.removeEventListener('mouseup', doEvent, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (prevent) {\n\t\t\t\t\tif (theEvtObj.preventDefault) {\n\t\t\t\t\t\ttheEvtObj.preventDefault();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (theEvtObj.preventManipulation) {\n\t\t\t\t\t\ttheEvtObj.preventManipulation();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (theEvtObj.preventMouseEvent) {\n\t\t\t\t\t\ttheEvtObj.preventMouseEvent();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// saving the settings for contentZooming and touchaction before activation\n\t\t\tvar contentZooming, msTouchAction;\n\n\t\t\tthis.enable = function () {\n\n\t\t\t\tif (window.navigator.msPointerEnabled) {\n\t\t\t\t\t//  Microsoft pointer model\n\t\t\t\t\ttarget.addEventListener('MSPointerDown', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('MSPointerMove', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('MSPointerUp', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('MSPointerCancel', doEvent, false);\n\n\t\t\t\t\t//  css way to prevent panning in our target area\n\t\t\t\t\tif (typeof target.style.msContentZooming !== 'undefined') {\n\t\t\t\t\t\tcontentZooming = target.style.msContentZooming;\n\t\t\t\t\t\ttarget.style.msContentZooming = 'none';\n\t\t\t\t\t}\n\n\t\t\t\t\t//  new in Windows Consumer Preview: css way to prevent all built-in touch actions on our target\n\t\t\t\t\t//  without this, you cannot touch draw on the element because IE will intercept the touch events\n\t\t\t\t\tif (typeof target.style.msTouchAction !== 'undefined') {\n\t\t\t\t\t\tmsTouchAction = target.style.msTouchAction;\n\t\t\t\t\t\ttarget.style.msTouchAction = 'none';\n\t\t\t\t\t}\n\t\t\t\t} else if (target.addEventListener) {\n\t\t\t\t\t//  iOS touch model\n\t\t\t\t\ttarget.addEventListener('touchstart', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('touchmove', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('touchend', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('touchcancel', doEvent, false);\n\n\t\t\t\t\t//  mouse model\n\t\t\t\t\ttarget.addEventListener('mousedown', doEvent, false);\n\n\t\t\t\t\t//  mouse model with capture\n\t\t\t\t\t//  rejecting gecko because, unlike ie, firefox does not send events to target when the mouse is outside target\n\t\t\t\t\tif (target.setCapture && !window.navigator.userAgent.match(/\\bGecko\\b/)) {\n\t\t\t\t\t\tuseSetReleaseCapture = true;\n\n\t\t\t\t\t\ttarget.addEventListener('mousemove', doEvent, false);\n\t\t\t\t\t\ttarget.addEventListener('mouseup', doEvent, false);\n\t\t\t\t\t}\n\t\t\t\t} else if (target.attachEvent && target.setCapture) {\n\t\t\t\t\t//  legacy IE mode - mouse with capture\n\t\t\t\t\tuseSetReleaseCapture = true;\n\t\t\t\t\ttarget.attachEvent('onmousedown', function () {\n\t\t\t\t\t\tdoEvent(window.event);\n\t\t\t\t\t\twindow.event.returnValue = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t\ttarget.attachEvent('onmousemove', function () {\n\t\t\t\t\t\tdoEvent(window.event);\n\t\t\t\t\t\twindow.event.returnValue = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t\ttarget.attachEvent('onmouseup', function () {\n\t\t\t\t\t\tdoEvent(window.event);\n\t\t\t\t\t\twindow.event.returnValue = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.disable = function () {\n\t\t\t\tif (window.navigator.msPointerEnabled) {\n\t\t\t\t\t//  Microsoft pointer model\n\t\t\t\t\ttarget.removeEventListener('MSPointerDown', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('MSPointerMove', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('MSPointerUp', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('MSPointerCancel', doEvent, false);\n\n\t\t\t\t\t//  reset zooming to saved value\n\t\t\t\t\tif (contentZooming) {\n\t\t\t\t\t\ttarget.style.msContentZooming = contentZooming;\n\t\t\t\t\t}\n\n\t\t\t\t\t// reset touch action setting\n\t\t\t\t\tif (msTouchAction) {\n\t\t\t\t\t\ttarget.style.msTouchAction = msTouchAction;\n\t\t\t\t\t}\n\t\t\t\t} else if (target.removeEventListener) {\n\t\t\t\t\t//  iOS touch model\n\t\t\t\t\ttarget.removeEventListener('touchstart', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('touchmove', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('touchend', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('touchcancel', doEvent, false);\n\n\t\t\t\t\t//  mouse model\n\t\t\t\t\ttarget.removeEventListener('mousedown', doEvent, false);\n\n\t\t\t\t\t//  mouse model with capture\n\t\t\t\t\t//  rejecting gecko because, unlike ie, firefox does not send events to target when the mouse is outside target\n\t\t\t\t\tif (target.setCapture && !window.navigator.userAgent.match(/\\bGecko\\b/)) {\n\t\t\t\t\t\tuseSetReleaseCapture = true;\n\n\t\t\t\t\t\ttarget.removeEventListener('mousemove', doEvent, false);\n\t\t\t\t\t\ttarget.removeEventListener('mouseup', doEvent, false);\n\t\t\t\t\t}\n\t\t\t\t} else if (target.detachEvent && target.setCapture) {\n\t\t\t\t\t//  legacy IE mode - mouse with capture\n\t\t\t\t\tuseSetReleaseCapture = true;\n\t\t\t\t\ttarget.detachEvent('onmousedown');\n\t\t\t\t\ttarget.detachEvent('onmousemove');\n\t\t\t\t\ttarget.detachEvent('onmouseup');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn this;\n\t\t};\n\t}]).factory('GridsterDraggable', ['$document', '$window', 'GridsterTouch', function ($document, $window, GridsterTouch) {\n\t\tfunction GridsterDraggable($el, scope, gridster, item, itemOptions) {\n\n\t\t\tvar elmX,\n\t\t\t    elmY,\n\t\t\t    elmW,\n\t\t\t    elmH,\n\t\t\t    mouseX = 0,\n\t\t\t    mouseY = 0,\n\t\t\t    lastMouseX = 0,\n\t\t\t    lastMouseY = 0,\n\t\t\t    mOffX = 0,\n\t\t\t    mOffY = 0,\n\t\t\t    minTop = 0,\n\t\t\t    minLeft = 0,\n\t\t\t    realdocument = $document[0];\n\n\t\t\tvar originalCol, originalRow;\n\t\t\tvar inputTags = ['select', 'option', 'input', 'textarea', 'button'];\n\n\t\t\tfunction dragStart(event) {\n\t\t\t\t$el.addClass('gridster-item-moving');\n\t\t\t\tgridster.movingItem = item;\n\n\t\t\t\tgridster.updateHeight(item.sizeY);\n\t\t\t\tscope.$apply(function () {\n\t\t\t\t\tif (gridster.draggable && gridster.draggable.start) {\n\t\t\t\t\t\tgridster.draggable.start(event, $el, itemOptions);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction drag(event) {\n\t\t\t\tvar oldRow = item.row,\n\t\t\t\t    oldCol = item.col,\n\t\t\t\t    hasCallback = gridster.draggable && gridster.draggable.drag,\n\t\t\t\t    scrollSensitivity = gridster.draggable.scrollSensitivity,\n\t\t\t\t    scrollSpeed = gridster.draggable.scrollSpeed;\n\n\t\t\t\tvar row = Math.min(gridster.pixelsToRows(elmY), gridster.maxRows - 1);\n\t\t\t\tvar col = Math.min(gridster.pixelsToColumns(elmX), gridster.columns - 1);\n\n\t\t\t\tvar itemsInTheWay = gridster.getItems(row, col, item.sizeX, item.sizeY, item);\n\t\t\t\tvar hasItemsInTheWay = itemsInTheWay.length !== 0;\n\n\t\t\t\tif (gridster.swapping === true && hasItemsInTheWay) {\n\t\t\t\t\tvar boundingBoxItem = gridster.getBoundingBox(itemsInTheWay),\n\t\t\t\t\t    sameSize = boundingBoxItem.sizeX === item.sizeX && boundingBoxItem.sizeY === item.sizeY,\n\t\t\t\t\t    sameRow = boundingBoxItem.row === oldRow,\n\t\t\t\t\t    sameCol = boundingBoxItem.col === oldCol,\n\t\t\t\t\t    samePosition = boundingBoxItem.row === row && boundingBoxItem.col === col,\n\t\t\t\t\t    inline = sameRow || sameCol;\n\n\t\t\t\t\tif (sameSize && itemsInTheWay.length === 1) {\n\t\t\t\t\t\tif (samePosition) {\n\t\t\t\t\t\t\tgridster.swapItems(item, itemsInTheWay[0]);\n\t\t\t\t\t\t} else if (inline) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (boundingBoxItem.sizeX <= item.sizeX && boundingBoxItem.sizeY <= item.sizeY && inline) {\n\t\t\t\t\t\tvar emptyRow = item.row <= row ? item.row : row + item.sizeY,\n\t\t\t\t\t\t    emptyCol = item.col <= col ? item.col : col + item.sizeX,\n\t\t\t\t\t\t    rowOffset = emptyRow - boundingBoxItem.row,\n\t\t\t\t\t\t    colOffset = emptyCol - boundingBoxItem.col;\n\n\t\t\t\t\t\tfor (var i = 0, l = itemsInTheWay.length; i < l; ++i) {\n\t\t\t\t\t\t\tvar itemInTheWay = itemsInTheWay[i];\n\n\t\t\t\t\t\t\tvar itemsInFreeSpace = gridster.getItems(itemInTheWay.row + rowOffset, itemInTheWay.col + colOffset, itemInTheWay.sizeX, itemInTheWay.sizeY, item);\n\n\t\t\t\t\t\t\tif (itemsInFreeSpace.length === 0) {\n\t\t\t\t\t\t\t\tgridster.putItem(itemInTheWay, itemInTheWay.row + rowOffset, itemInTheWay.col + colOffset);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (gridster.pushing !== false || !hasItemsInTheWay) {\n\t\t\t\t\titem.row = row;\n\t\t\t\t\titem.col = col;\n\t\t\t\t}\n\n\t\t\t\tif (event.pageY - realdocument.body.scrollTop < scrollSensitivity) {\n\t\t\t\t\trealdocument.body.scrollTop = realdocument.body.scrollTop - scrollSpeed;\n\t\t\t\t} else if ($window.innerHeight - (event.pageY - realdocument.body.scrollTop) < scrollSensitivity) {\n\t\t\t\t\trealdocument.body.scrollTop = realdocument.body.scrollTop + scrollSpeed;\n\t\t\t\t}\n\n\t\t\t\tif (event.pageX - realdocument.body.scrollLeft < scrollSensitivity) {\n\t\t\t\t\trealdocument.body.scrollLeft = realdocument.body.scrollLeft - scrollSpeed;\n\t\t\t\t} else if ($window.innerWidth - (event.pageX - realdocument.body.scrollLeft) < scrollSensitivity) {\n\t\t\t\t\trealdocument.body.scrollLeft = realdocument.body.scrollLeft + scrollSpeed;\n\t\t\t\t}\n\n\t\t\t\tif (hasCallback || oldRow !== item.row || oldCol !== item.col) {\n\t\t\t\t\tscope.$apply(function () {\n\t\t\t\t\t\tif (hasCallback) {\n\t\t\t\t\t\t\tgridster.draggable.drag(event, $el, itemOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction dragStop(event) {\n\t\t\t\t$el.removeClass('gridster-item-moving');\n\t\t\t\tvar row = Math.min(gridster.pixelsToRows(elmY), gridster.maxRows - 1);\n\t\t\t\tvar col = Math.min(gridster.pixelsToColumns(elmX), gridster.columns - 1);\n\t\t\t\tif (gridster.pushing !== false || gridster.getItems(row, col, item.sizeX, item.sizeY, item).length === 0) {\n\t\t\t\t\titem.row = row;\n\t\t\t\t\titem.col = col;\n\t\t\t\t}\n\t\t\t\tgridster.movingItem = null;\n\t\t\t\titem.setPosition(item.row, item.col);\n\n\t\t\t\tscope.$apply(function () {\n\t\t\t\t\tif (gridster.draggable && gridster.draggable.stop) {\n\t\t\t\t\t\tgridster.draggable.stop(event, $el, itemOptions);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction mouseDown(e) {\n\t\t\t\tif (inputTags.indexOf(e.target.nodeName.toLowerCase()) !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar $target = angular.element(e.target);\n\n\t\t\t\t// exit, if a resize handle was hit\n\t\t\t\tif ($target.hasClass('gridster-item-resizable-handler')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// exit, if the target has it's own click event\n\t\t\t\tif ($target.attr('onclick') || $target.attr('ng-click')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// only works if you have jQuery\n\t\t\t\tif ($target.closest && $target.closest('.gridster-no-drag').length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// apply drag handle filter\n\t\t\t\tif (gridster.draggable && gridster.draggable.handle) {\n\t\t\t\t\tvar $dragHandles = angular.element($el[0].querySelectorAll(gridster.draggable.handle));\n\t\t\t\t\tvar match = false;\n\t\t\t\t\touterloop: for (var h = 0, hl = $dragHandles.length; h < hl; ++h) {\n\t\t\t\t\t\tvar handle = $dragHandles[h];\n\t\t\t\t\t\tif (handle === e.target) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar target = e.target;\n\t\t\t\t\t\tfor (var p = 0; p < 20; ++p) {\n\t\t\t\t\t\t\tvar parent = target.parentNode;\n\t\t\t\t\t\t\tif (parent === $el[0] || !parent) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (parent === handle) {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t\tbreak outerloop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget = parent;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!match) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tswitch (e.which) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\t// left mouse button\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\t// right or middle mouse button\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlastMouseX = e.pageX;\n\t\t\t\tlastMouseY = e.pageY;\n\n\t\t\t\telmX = parseInt($el.css('left'), 10);\n\t\t\t\telmY = parseInt($el.css('top'), 10);\n\t\t\t\telmW = $el[0].offsetWidth;\n\t\t\t\telmH = $el[0].offsetHeight;\n\n\t\t\t\toriginalCol = item.col;\n\t\t\t\toriginalRow = item.row;\n\n\t\t\t\tdragStart(e);\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tfunction mouseMove(e) {\n\t\t\t\tif (!$el.hasClass('gridster-item-moving') || $el.hasClass('gridster-item-resizing')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar maxLeft = gridster.curWidth - 1;\n\t\t\t\tvar maxTop = gridster.curRowHeight * gridster.maxRows - 1;\n\n\t\t\t\t// Get the current mouse position.\n\t\t\t\tmouseX = e.pageX;\n\t\t\t\tmouseY = e.pageY;\n\n\t\t\t\t// Get the deltas\n\t\t\t\tvar diffX = mouseX - lastMouseX + mOffX;\n\t\t\t\tvar diffY = mouseY - lastMouseY + mOffY;\n\t\t\t\tmOffX = mOffY = 0;\n\n\t\t\t\t// Update last processed mouse positions.\n\t\t\t\tlastMouseX = mouseX;\n\t\t\t\tlastMouseY = mouseY;\n\n\t\t\t\tvar dX = diffX,\n\t\t\t\t    dY = diffY;\n\t\t\t\tif (elmX + dX < minLeft) {\n\t\t\t\t\tdiffX = minLeft - elmX;\n\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t} else if (elmX + elmW + dX > maxLeft) {\n\t\t\t\t\tdiffX = maxLeft - elmX - elmW;\n\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t}\n\n\t\t\t\tif (elmY + dY < minTop) {\n\t\t\t\t\tdiffY = minTop - elmY;\n\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t} else if (elmY + elmH + dY > maxTop) {\n\t\t\t\t\tdiffY = maxTop - elmY - elmH;\n\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t}\n\t\t\t\telmX += diffX;\n\t\t\t\telmY += diffY;\n\n\t\t\t\t// set new position\n\t\t\t\t$el.css({\n\t\t\t\t\t'top': elmY + 'px',\n\t\t\t\t\t'left': elmX + 'px'\n\t\t\t\t});\n\n\t\t\t\tdrag(e);\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tfunction mouseUp(e) {\n\t\t\t\tif (!$el.hasClass('gridster-item-moving') || $el.hasClass('gridster-item-resizing')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tmOffX = mOffY = 0;\n\n\t\t\t\tdragStop(e);\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar enabled = null;\n\t\t\tvar gridsterTouch = null;\n\n\t\t\tthis.enable = function () {\n\t\t\t\tif (enabled === true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tenabled = true;\n\n\t\t\t\tif (gridsterTouch) {\n\t\t\t\t\tgridsterTouch.enable();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tgridsterTouch = new GridsterTouch($el[0], mouseDown, mouseMove, mouseUp);\n\t\t\t\tgridsterTouch.enable();\n\t\t\t};\n\n\t\t\tthis.disable = function () {\n\t\t\t\tif (enabled === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tenabled = false;\n\t\t\t\tif (gridsterTouch) {\n\t\t\t\t\tgridsterTouch.disable();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.toggle = function (enabled) {\n\t\t\t\tif (enabled) {\n\t\t\t\t\tthis.enable();\n\t\t\t\t} else {\n\t\t\t\t\tthis.disable();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.destroy = function () {\n\t\t\t\tthis.disable();\n\t\t\t};\n\t\t}\n\n\t\treturn GridsterDraggable;\n\t}]).factory('GridsterResizable', ['GridsterTouch', function (GridsterTouch) {\n\t\tfunction GridsterResizable($el, scope, gridster, item, itemOptions) {\n\n\t\t\tfunction ResizeHandle(handleClass) {\n\n\t\t\t\tvar hClass = handleClass;\n\n\t\t\t\tvar elmX,\n\t\t\t\t    elmY,\n\t\t\t\t    elmW,\n\t\t\t\t    elmH,\n\t\t\t\t    mouseX = 0,\n\t\t\t\t    mouseY = 0,\n\t\t\t\t    lastMouseX = 0,\n\t\t\t\t    lastMouseY = 0,\n\t\t\t\t    mOffX = 0,\n\t\t\t\t    mOffY = 0,\n\t\t\t\t    minTop = 0,\n\t\t\t\t    maxTop = 9999,\n\t\t\t\t    minLeft = 0;\n\n\t\t\t\tvar getMinHeight = function () {\n\t\t\t\t\treturn (item.minSizeY ? item.minSizeY : 1) * gridster.curRowHeight - gridster.margins[0];\n\t\t\t\t};\n\t\t\t\tvar getMinWidth = function () {\n\t\t\t\t\treturn (item.minSizeX ? item.minSizeX : 1) * gridster.curColWidth - gridster.margins[1];\n\t\t\t\t};\n\n\t\t\t\tvar originalWidth, originalHeight;\n\t\t\t\tvar savedDraggable;\n\n\t\t\t\tfunction resizeStart(e) {\n\t\t\t\t\t$el.addClass('gridster-item-moving');\n\t\t\t\t\t$el.addClass('gridster-item-resizing');\n\n\t\t\t\t\tgridster.movingItem = item;\n\n\t\t\t\t\titem.setElementSizeX();\n\t\t\t\t\titem.setElementSizeY();\n\t\t\t\t\titem.setElementPosition();\n\t\t\t\t\tgridster.updateHeight(1);\n\n\t\t\t\t\tscope.$apply(function () {\n\t\t\t\t\t\t// callback\n\t\t\t\t\t\tif (gridster.resizable && gridster.resizable.start) {\n\t\t\t\t\t\t\tgridster.resizable.start(e, $el, itemOptions); // options is the item model\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction resize(e) {\n\t\t\t\t\tvar oldRow = item.row,\n\t\t\t\t\t    oldCol = item.col,\n\t\t\t\t\t    oldSizeX = item.sizeX,\n\t\t\t\t\t    oldSizeY = item.sizeY,\n\t\t\t\t\t    hasCallback = gridster.resizable && gridster.resizable.resize;\n\n\t\t\t\t\tvar col = item.col;\n\t\t\t\t\t// only change column if grabbing left edge\n\t\t\t\t\tif (['w', 'nw', 'sw'].indexOf(handleClass) !== -1) {\n\t\t\t\t\t\tcol = gridster.pixelsToColumns(elmX, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar row = item.row;\n\t\t\t\t\t// only change row if grabbing top edge\n\t\t\t\t\tif (['n', 'ne', 'nw'].indexOf(handleClass) !== -1) {\n\t\t\t\t\t\trow = gridster.pixelsToRows(elmY, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar sizeX = item.sizeX;\n\t\t\t\t\t// only change row if grabbing left or right edge\n\t\t\t\t\tif (['n', 's'].indexOf(handleClass) === -1) {\n\t\t\t\t\t\tsizeX = gridster.pixelsToColumns(elmW, true);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar sizeY = item.sizeY;\n\t\t\t\t\t// only change row if grabbing top or bottom edge\n\t\t\t\t\tif (['e', 'w'].indexOf(handleClass) === -1) {\n\t\t\t\t\t\tsizeY = gridster.pixelsToRows(elmH, true);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar canOccupy = row > -1 && col > -1 && sizeX + col <= gridster.columns && sizeY + row <= gridster.maxRows;\n\t\t\t\t\tif (canOccupy && (gridster.pushing !== false || gridster.getItems(row, col, sizeX, sizeY, item).length === 0)) {\n\t\t\t\t\t\titem.row = row;\n\t\t\t\t\t\titem.col = col;\n\t\t\t\t\t\titem.sizeX = sizeX;\n\t\t\t\t\t\titem.sizeY = sizeY;\n\t\t\t\t\t}\n\t\t\t\t\tvar isChanged = item.row !== oldRow || item.col !== oldCol || item.sizeX !== oldSizeX || item.sizeY !== oldSizeY;\n\n\t\t\t\t\tif (hasCallback || isChanged) {\n\t\t\t\t\t\tscope.$apply(function () {\n\t\t\t\t\t\t\tif (hasCallback) {\n\t\t\t\t\t\t\t\tgridster.resizable.resize(e, $el, itemOptions); // options is the item model\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction resizeStop(e) {\n\t\t\t\t\t$el.removeClass('gridster-item-moving');\n\t\t\t\t\t$el.removeClass('gridster-item-resizing');\n\n\t\t\t\t\tgridster.movingItem = null;\n\n\t\t\t\t\titem.setPosition(item.row, item.col);\n\t\t\t\t\titem.setSizeY(item.sizeY);\n\t\t\t\t\titem.setSizeX(item.sizeX);\n\n\t\t\t\t\tscope.$apply(function () {\n\t\t\t\t\t\tif (gridster.resizable && gridster.resizable.stop) {\n\t\t\t\t\t\t\tgridster.resizable.stop(e, $el, itemOptions); // options is the item model\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction mouseDown(e) {\n\t\t\t\t\tswitch (e.which) {\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t// left mouse button\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t// right or middle mouse button\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// save the draggable setting to restore after resize\n\t\t\t\t\tsavedDraggable = gridster.draggable.enabled;\n\t\t\t\t\tif (savedDraggable) {\n\t\t\t\t\t\tgridster.draggable.enabled = false;\n\t\t\t\t\t\tscope.$broadcast('gridster-draggable-changed', gridster);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get the current mouse position.\n\t\t\t\t\tlastMouseX = e.pageX;\n\t\t\t\t\tlastMouseY = e.pageY;\n\n\t\t\t\t\t// Record current widget dimensions\n\t\t\t\t\telmX = parseInt($el.css('left'), 10);\n\t\t\t\t\telmY = parseInt($el.css('top'), 10);\n\t\t\t\t\telmW = $el[0].offsetWidth;\n\t\t\t\t\telmH = $el[0].offsetHeight;\n\n\t\t\t\t\toriginalWidth = item.sizeX;\n\t\t\t\t\toriginalHeight = item.sizeY;\n\n\t\t\t\t\tresizeStart(e);\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tfunction mouseMove(e) {\n\t\t\t\t\tvar maxLeft = gridster.curWidth - 1;\n\n\t\t\t\t\t// Get the current mouse position.\n\t\t\t\t\tmouseX = e.pageX;\n\t\t\t\t\tmouseY = e.pageY;\n\n\t\t\t\t\t// Get the deltas\n\t\t\t\t\tvar diffX = mouseX - lastMouseX + mOffX;\n\t\t\t\t\tvar diffY = mouseY - lastMouseY + mOffY;\n\t\t\t\t\tmOffX = mOffY = 0;\n\n\t\t\t\t\t// Update last processed mouse positions.\n\t\t\t\t\tlastMouseX = mouseX;\n\t\t\t\t\tlastMouseY = mouseY;\n\n\t\t\t\t\tvar dY = diffY,\n\t\t\t\t\t    dX = diffX;\n\n\t\t\t\t\tif (hClass.indexOf('n') >= 0) {\n\t\t\t\t\t\tif (elmH - dY < getMinHeight()) {\n\t\t\t\t\t\t\tdiffY = elmH - getMinHeight();\n\t\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t\t} else if (elmY + dY < minTop) {\n\t\t\t\t\t\t\tdiffY = minTop - elmY;\n\t\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telmY += diffY;\n\t\t\t\t\t\telmH -= diffY;\n\t\t\t\t\t}\n\t\t\t\t\tif (hClass.indexOf('s') >= 0) {\n\t\t\t\t\t\tif (elmH + dY < getMinHeight()) {\n\t\t\t\t\t\t\tdiffY = getMinHeight() - elmH;\n\t\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t\t} else if (elmY + elmH + dY > maxTop) {\n\t\t\t\t\t\t\tdiffY = maxTop - elmY - elmH;\n\t\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telmH += diffY;\n\t\t\t\t\t}\n\t\t\t\t\tif (hClass.indexOf('w') >= 0) {\n\t\t\t\t\t\tif (elmW - dX < getMinWidth()) {\n\t\t\t\t\t\t\tdiffX = elmW - getMinWidth();\n\t\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t\t} else if (elmX + dX < minLeft) {\n\t\t\t\t\t\t\tdiffX = minLeft - elmX;\n\t\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telmX += diffX;\n\t\t\t\t\t\telmW -= diffX;\n\t\t\t\t\t}\n\t\t\t\t\tif (hClass.indexOf('e') >= 0) {\n\t\t\t\t\t\tif (elmW + dX < getMinWidth()) {\n\t\t\t\t\t\t\tdiffX = getMinWidth() - elmW;\n\t\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t\t} else if (elmX + elmW + dX > maxLeft) {\n\t\t\t\t\t\t\tdiffX = maxLeft - elmX - elmW;\n\t\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telmW += diffX;\n\t\t\t\t\t}\n\n\t\t\t\t\t// set new position\n\t\t\t\t\t$el.css({\n\t\t\t\t\t\t'top': elmY + 'px',\n\t\t\t\t\t\t'left': elmX + 'px',\n\t\t\t\t\t\t'width': elmW + 'px',\n\t\t\t\t\t\t'height': elmH + 'px'\n\t\t\t\t\t});\n\n\t\t\t\t\tresize(e);\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tfunction mouseUp(e) {\n\t\t\t\t\t// restore draggable setting to its original state\n\t\t\t\t\tif (gridster.draggable.enabled !== savedDraggable) {\n\t\t\t\t\t\tgridster.draggable.enabled = savedDraggable;\n\t\t\t\t\t\tscope.$broadcast('gridster-draggable-changed', gridster);\n\t\t\t\t\t}\n\n\t\t\t\t\tmOffX = mOffY = 0;\n\n\t\t\t\t\tresizeStop(e);\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tvar $dragHandle = null;\n\t\t\t\tvar unifiedInput;\n\n\t\t\t\tthis.enable = function () {\n\t\t\t\t\tif (!$dragHandle) {\n\t\t\t\t\t\t$dragHandle = angular.element('<div class=\"gridster-item-resizable-handler handle-' + hClass + '\"></div>');\n\t\t\t\t\t\t$el.append($dragHandle);\n\t\t\t\t\t}\n\n\t\t\t\t\tunifiedInput = new GridsterTouch($dragHandle[0], mouseDown, mouseMove, mouseUp);\n\t\t\t\t\tunifiedInput.enable();\n\t\t\t\t};\n\n\t\t\t\tthis.disable = function () {\n\t\t\t\t\tif ($dragHandle) {\n\t\t\t\t\t\t$dragHandle.remove();\n\t\t\t\t\t\t$dragHandle = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tunifiedInput.disable();\n\t\t\t\t\tunifiedInput = undefined;\n\t\t\t\t};\n\n\t\t\t\tthis.destroy = function () {\n\t\t\t\t\tthis.disable();\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar handles = [];\n\t\t\tvar handlesOpts = gridster.resizable.handles;\n\t\t\tif (typeof handlesOpts === 'string') {\n\t\t\t\thandlesOpts = gridster.resizable.handles.split(',');\n\t\t\t}\n\t\t\tvar enabled = false;\n\n\t\t\tfor (var c = 0, l = handlesOpts.length; c < l; c++) {\n\t\t\t\thandles.push(new ResizeHandle(handlesOpts[c]));\n\t\t\t}\n\n\t\t\tthis.enable = function () {\n\t\t\t\tif (enabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (var c = 0, l = handles.length; c < l; c++) {\n\t\t\t\t\thandles[c].enable();\n\t\t\t\t}\n\t\t\t\tenabled = true;\n\t\t\t};\n\n\t\t\tthis.disable = function () {\n\t\t\t\tif (!enabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (var c = 0, l = handles.length; c < l; c++) {\n\t\t\t\t\thandles[c].disable();\n\t\t\t\t}\n\t\t\t\tenabled = false;\n\t\t\t};\n\n\t\t\tthis.toggle = function (enabled) {\n\t\t\t\tif (enabled) {\n\t\t\t\t\tthis.enable();\n\t\t\t\t} else {\n\t\t\t\t\tthis.disable();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.destroy = function () {\n\t\t\t\tfor (var c = 0, l = handles.length; c < l; c++) {\n\t\t\t\t\thandles[c].destroy();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn GridsterResizable;\n\t}]).factory('gridsterDebounce', function () {\n\t\treturn function gridsterDebounce(func, wait, immediate) {\n\t\t\tvar timeout;\n\t\t\treturn function () {\n\t\t\t\tvar context = this,\n\t\t\t\t    args = arguments;\n\t\t\t\tvar later = function () {\n\t\t\t\t\ttimeout = null;\n\t\t\t\t\tif (!immediate) {\n\t\t\t\t\t\tfunc.apply(context, args);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tvar callNow = immediate && !timeout;\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t\tif (callNow) {\n\t\t\t\t\tfunc.apply(context, args);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n\n\t/**\n  * GridsterItem directive\n  * @param $parse\n  * @param GridsterDraggable\n  * @param GridsterResizable\n  * @param gridsterDebounce\n  */\n\t).directive('gridsterItem', ['$parse', 'GridsterDraggable', 'GridsterResizable', 'gridsterDebounce', function ($parse, GridsterDraggable, GridsterResizable, gridsterDebounce) {\n\t\treturn {\n\t\t\tscope: true,\n\t\t\trestrict: 'EA',\n\t\t\tcontroller: 'GridsterItemCtrl',\n\t\t\tcontrollerAs: 'gridsterItem',\n\t\t\trequire: ['^gridster', 'gridsterItem'],\n\t\t\tlink: function (scope, $el, attrs, controllers) {\n\t\t\t\tvar optionsKey = attrs.gridsterItem,\n\t\t\t\t    options;\n\n\t\t\t\tvar gridster = controllers[0],\n\t\t\t\t    item = controllers[1];\n\n\t\t\t\tscope.gridster = gridster;\n\n\t\t\t\t// bind the item's position properties\n\t\t\t\t// options can be an object specified by gridster-item=\"object\"\n\t\t\t\t// or the options can be the element html attributes object\n\t\t\t\tif (optionsKey) {\n\t\t\t\t\tvar $optionsGetter = $parse(optionsKey);\n\t\t\t\t\toptions = $optionsGetter(scope) || {};\n\t\t\t\t\tif (!options && $optionsGetter.assign) {\n\t\t\t\t\t\toptions = {\n\t\t\t\t\t\t\trow: item.row,\n\t\t\t\t\t\t\tcol: item.col,\n\t\t\t\t\t\t\tsizeX: item.sizeX,\n\t\t\t\t\t\t\tsizeY: item.sizeY,\n\t\t\t\t\t\t\tminSizeX: 0,\n\t\t\t\t\t\t\tminSizeY: 0,\n\t\t\t\t\t\t\tmaxSizeX: null,\n\t\t\t\t\t\t\tmaxSizeY: null\n\t\t\t\t\t\t};\n\t\t\t\t\t\t$optionsGetter.assign(scope, options);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toptions = attrs;\n\t\t\t\t}\n\n\t\t\t\titem.init($el, gridster);\n\n\t\t\t\t$el.addClass('gridster-item');\n\n\t\t\t\tvar aspects = ['minSizeX', 'maxSizeX', 'minSizeY', 'maxSizeY', 'sizeX', 'sizeY', 'row', 'col'],\n\t\t\t\t    $getters = {};\n\n\t\t\t\tvar expressions = [];\n\t\t\t\tvar aspectFn = function (aspect) {\n\t\t\t\t\tvar expression;\n\t\t\t\t\tif (typeof options[aspect] === 'string') {\n\t\t\t\t\t\t// watch the expression in the scope\n\t\t\t\t\t\texpression = options[aspect];\n\t\t\t\t\t} else if (typeof options[aspect.toLowerCase()] === 'string') {\n\t\t\t\t\t\t// watch the expression in the scope\n\t\t\t\t\t\texpression = options[aspect.toLowerCase()];\n\t\t\t\t\t} else if (optionsKey) {\n\t\t\t\t\t\t// watch the expression on the options object in the scope\n\t\t\t\t\t\texpression = optionsKey + '.' + aspect;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\texpressions.push('\"' + aspect + '\":' + expression);\n\t\t\t\t\t$getters[aspect] = $parse(expression);\n\n\t\t\t\t\t// initial set\n\t\t\t\t\tvar val = $getters[aspect](scope);\n\t\t\t\t\tif (typeof val === 'number') {\n\t\t\t\t\t\titem[aspect] = val;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfor (var i = 0, l = aspects.length; i < l; ++i) {\n\t\t\t\t\taspectFn(aspects[i]);\n\t\t\t\t}\n\n\t\t\t\tvar watchExpressions = '{' + expressions.join(',') + '}';\n\t\t\t\t// when the value changes externally, update the internal item object\n\t\t\t\tscope.$watchCollection(watchExpressions, function (newVals, oldVals) {\n\t\t\t\t\tfor (var aspect in newVals) {\n\t\t\t\t\t\tvar newVal = newVals[aspect];\n\t\t\t\t\t\tvar oldVal = oldVals[aspect];\n\t\t\t\t\t\tif (oldVal === newVal) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewVal = parseInt(newVal, 10);\n\t\t\t\t\t\tif (!isNaN(newVal)) {\n\t\t\t\t\t\t\titem[aspect] = newVal;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfunction positionChanged() {\n\t\t\t\t\t// call setPosition so the element and gridster controller are updated\n\t\t\t\t\titem.setPosition(item.row, item.col);\n\n\t\t\t\t\t// when internal item position changes, update externally bound values\n\t\t\t\t\tif ($getters.row && $getters.row.assign) {\n\t\t\t\t\t\t$getters.row.assign(scope, item.row);\n\t\t\t\t\t}\n\t\t\t\t\tif ($getters.col && $getters.col.assign) {\n\t\t\t\t\t\t$getters.col.assign(scope, item.col);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tscope.$watch(function () {\n\t\t\t\t\treturn item.row + ',' + item.col;\n\t\t\t\t}, positionChanged);\n\n\t\t\t\tfunction sizeChanged() {\n\t\t\t\t\tvar changedX = item.setSizeX(item.sizeX, true);\n\t\t\t\t\tif (changedX && $getters.sizeX && $getters.sizeX.assign) {\n\t\t\t\t\t\t$getters.sizeX.assign(scope, item.sizeX);\n\t\t\t\t\t}\n\t\t\t\t\tvar changedY = item.setSizeY(item.sizeY, true);\n\t\t\t\t\tif (changedY && $getters.sizeY && $getters.sizeY.assign) {\n\t\t\t\t\t\t$getters.sizeY.assign(scope, item.sizeY);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (changedX || changedY) {\n\t\t\t\t\t\titem.gridster.moveOverlappingItems(item);\n\t\t\t\t\t\tgridster.layoutChanged();\n\t\t\t\t\t\tscope.$broadcast('gridster-item-resized', item);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tscope.$watch(function () {\n\t\t\t\t\treturn item.sizeY + ',' + item.sizeX + ',' + item.minSizeX + ',' + item.maxSizeX + ',' + item.minSizeY + ',' + item.maxSizeY;\n\t\t\t\t}, sizeChanged);\n\n\t\t\t\tvar draggable = new GridsterDraggable($el, scope, gridster, item, options);\n\t\t\t\tvar resizable = new GridsterResizable($el, scope, gridster, item, options);\n\n\t\t\t\tvar updateResizable = function () {\n\t\t\t\t\tresizable.toggle(!gridster.isMobile && gridster.resizable && gridster.resizable.enabled);\n\t\t\t\t};\n\t\t\t\tupdateResizable();\n\n\t\t\t\tvar updateDraggable = function () {\n\t\t\t\t\tdraggable.toggle(!gridster.isMobile && gridster.draggable && gridster.draggable.enabled);\n\t\t\t\t};\n\t\t\t\tupdateDraggable();\n\n\t\t\t\tscope.$on('gridster-draggable-changed', updateDraggable);\n\t\t\t\tscope.$on('gridster-resizable-changed', updateResizable);\n\t\t\t\tscope.$on('gridster-resized', updateResizable);\n\t\t\t\tscope.$on('gridster-mobile-changed', function () {\n\t\t\t\t\tupdateResizable();\n\t\t\t\t\tupdateDraggable();\n\t\t\t\t});\n\n\t\t\t\tfunction whichTransitionEvent() {\n\t\t\t\t\tvar el = document.createElement('div');\n\t\t\t\t\tvar transitions = {\n\t\t\t\t\t\t'transition': 'transitionend',\n\t\t\t\t\t\t'OTransition': 'oTransitionEnd',\n\t\t\t\t\t\t'MozTransition': 'transitionend',\n\t\t\t\t\t\t'WebkitTransition': 'webkitTransitionEnd'\n\t\t\t\t\t};\n\t\t\t\t\tfor (var t in transitions) {\n\t\t\t\t\t\tif (el.style[t] !== undefined) {\n\t\t\t\t\t\t\treturn transitions[t];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar debouncedTransitionEndPublisher = gridsterDebounce(function () {\n\t\t\t\t\tscope.$apply(function () {\n\t\t\t\t\t\tscope.$broadcast('gridster-item-transition-end', item);\n\t\t\t\t\t});\n\t\t\t\t}, 50);\n\n\t\t\t\t$el.on(whichTransitionEvent(), debouncedTransitionEndPublisher);\n\n\t\t\t\tscope.$broadcast('gridster-item-initialized', item);\n\n\t\t\t\treturn scope.$on('$destroy', function () {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresizable.destroy();\n\t\t\t\t\t\tdraggable.destroy();\n\t\t\t\t\t} catch (e) {}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tgridster.removeItem(item);\n\t\t\t\t\t} catch (e) {}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\titem.destroy();\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}]).directive('gridsterNoDrag', function () {\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\tlink: function (scope, $element) {\n\t\t\t\t$element.addClass('gridster-no-drag');\n\t\t\t}\n\t\t};\n\t});\n});","/*\n * angular-gridster\n * http://manifestwebdesign.github.io/angular-gridster\n *\n * @version: 0.13.14\n * @license: MIT\n */\n!function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define([\"angular\"],b):\"object\"==typeof exports?module.exports=b(require(\"angular\")):b(a.angular)}(this,function(a){\"use strict\";return a.module(\"gridster\",[]).constant(\"gridsterConfig\",{columns:6,pushing:!0,floating:!0,swapping:!1,width:\"auto\",colWidth:\"auto\",rowHeight:\"match\",margins:[10,10],outerMargin:!0,isMobile:!1,mobileBreakPoint:600,mobileModeEnabled:!0,minColumns:1,minRows:1,maxRows:100,defaultSizeX:2,defaultSizeY:1,minSizeX:1,maxSizeX:null,minSizeY:1,maxSizeY:null,saveGridItemCalculatedHeightInMobile:!1,resizable:{enabled:!0,handles:[\"s\",\"e\",\"n\",\"w\",\"se\",\"ne\",\"sw\",\"nw\"]},draggable:{enabled:!0,scrollSensitivity:20,scrollSpeed:15}}).controller(\"GridsterCtrl\",[\"gridsterConfig\",\"$timeout\",function(b,c){var d=this;a.extend(this,b),this.resizable=a.extend({},b.resizable||{}),this.draggable=a.extend({},b.draggable||{});var e=!1;this.layoutChanged=function(){e||(e=!0,c(function(){e=!1,d.loaded&&d.floatItemsUp(),d.updateHeight(d.movingItem?d.movingItem.sizeY:0)},30))},this.grid=[],this.destroy=function(){this.grid&&(this.grid=[]),this.$element=null},this.setOptions=function(b){if(b)if(b=a.extend({},b),b.draggable&&(a.extend(this.draggable,b.draggable),delete b.draggable),b.resizable&&(a.extend(this.resizable,b.resizable),delete b.resizable),a.extend(this,b),this.margins&&2===this.margins.length)for(var c=0,d=this.margins.length;c<d;++c)this.margins[c]=parseInt(this.margins[c],10),isNaN(this.margins[c])&&(this.margins[c]=0);else this.margins=[0,0]},this.canItemOccupy=function(a,b,c){return b>-1&&c>-1&&a.sizeX+c<=this.columns&&a.sizeY+b<=this.maxRows},this.autoSetItemPosition=function(a){for(var b=0;b<this.maxRows;++b)for(var c=0;c<this.columns;++c){var d=this.getItems(b,c,a.sizeX,a.sizeY,a);if(0===d.length&&this.canItemOccupy(a,b,c))return void this.putItem(a,b,c)}throw new Error(\"Unable to place item!\")},this.getItems=function(a,b,c,d,e){var f=[];c&&d||(c=d=1),!e||e instanceof Array||(e=[e]);for(var g=0;g<d;++g)for(var h=0;h<c;++h){var i=this.getItem(a+g,b+h,e);!i||e&&e.indexOf(i)!==-1||f.indexOf(i)!==-1||f.push(i)}return f},this.getBoundingBox=function(a){if(0===a.length)return null;if(1===a.length)return{row:a[0].row,col:a[0].col,sizeY:a[0].sizeY,sizeX:a[0].sizeX};for(var b=0,c=0,d=9999,e=9999,f=0,g=a.length;f<g;++f){var h=a[f];d=Math.min(h.row,d),e=Math.min(h.col,e),b=Math.max(h.row+h.sizeY,b),c=Math.max(h.col+h.sizeX,c)}return{row:d,col:e,sizeY:b-d,sizeX:c-e}},this.removeItem=function(a){for(var b=0,c=this.grid.length;b<c;++b){var d=this.grid[b];if(d){var e=d.indexOf(a);if(e!==-1){d[e]=null;break}}}this.layoutChanged()},this.getItem=function(a,b,c){!c||c instanceof Array||(c=[c]);for(var d=1;a>-1;){for(var e=1,f=b;f>-1;){var g=this.grid[a];if(g){var h=g[f];if(h&&(!c||c.indexOf(h)===-1)&&h.sizeX>=e&&h.sizeY>=d)return h}++e,--f}--a,++d}return null},this.putItems=function(a){for(var b=0,c=a.length;b<c;++b)this.putItem(a[b])},this.putItem=function(a,b,c,d){if((\"undefined\"==typeof b||null===b)&&(b=a.row,c=a.col,\"undefined\"==typeof b||null===b))return void this.autoSetItemPosition(a);if(this.canItemOccupy(a,b,c)||(c=Math.min(this.columns-a.sizeX,Math.max(0,c)),b=Math.min(this.maxRows-a.sizeY,Math.max(0,b))),null!==a.oldRow&&\"undefined\"!=typeof a.oldRow){var e=a.oldRow===b&&a.oldColumn===c,f=this.grid[b]&&this.grid[b][c]===a;if(e&&f)return a.row=b,void(a.col=c);var g=this.grid[a.oldRow];g&&g[a.oldColumn]===a&&delete g[a.oldColumn]}a.oldRow=a.row=b,a.oldColumn=a.col=c,this.moveOverlappingItems(a,d),this.grid[b]||(this.grid[b]=[]),this.grid[b][c]=a,this.movingItem===a&&this.floatItemUp(a),this.layoutChanged()},this.swapItems=function(a,b){this.grid[a.row][a.col]=b,this.grid[b.row][b.col]=a;var c=a.row,d=a.col;a.row=b.row,a.col=b.col,b.row=c,b.col=d},this.moveOverlappingItems=function(a,b){b?b.indexOf(a)===-1&&(b=b.slice(0),b.push(a)):b=[a];var c=this.getItems(a.row,a.col,a.sizeX,a.sizeY,b);this.moveItemsDown(c,a.row+a.sizeY,b)},this.moveItemsDown=function(a,b,c){if(a&&0!==a.length){a.sort(function(a,b){return a.row-b.row}),c=c?c.slice(0):[];var d,e,f,g={};for(e=0,f=a.length;e<f;++e){d=a[e];var h=g[d.col];(\"undefined\"==typeof h||d.row<h)&&(g[d.col]=d.row)}for(e=0,f=a.length;e<f;++e){d=a[e];var i=b-g[d.col];this.moveItemDown(d,d.row+i,c),c.push(d)}}},this.moveItemDown=function(a,b,c){if(!(a.row>=b)){for(;a.row<b;)++a.row,this.moveOverlappingItems(a,c);this.putItem(a,a.row,a.col,c)}},this.floatItemsUp=function(){if(this.floating!==!1)for(var a=0,b=this.grid.length;a<b;++a){var c=this.grid[a];if(c)for(var d=0,e=c.length;d<e;++d){var f=c[d];f&&this.floatItemUp(f)}}},this.floatItemUp=function(a){if(this.floating!==!1){for(var b=a.col,c=a.sizeY,d=a.sizeX,e=null,f=null,g=a.row-1;g>-1;){var h=this.getItems(g,b,d,c,a);if(0!==h.length)break;e=g,f=b,--g}null!==e&&this.putItem(a,e,f)}},this.updateHeight=function(a){var b=this.minRows;a=a||0;for(var c=this.grid.length;c>=0;--c){var d=this.grid[c];if(d)for(var e=0,f=d.length;e<f;++e)d[e]&&(b=Math.max(b,c+a+d[e].sizeY))}this.gridHeight=this.maxRows-b>0?Math.min(this.maxRows,b):Math.max(this.maxRows,b)},this.pixelsToRows=function(a,b){return this.outerMargin||(a+=this.margins[0]/2),b===!0?Math.ceil(a/this.curRowHeight):b===!1?Math.floor(a/this.curRowHeight):Math.round(a/this.curRowHeight)},this.pixelsToColumns=function(a,b){return this.outerMargin||(a+=this.margins[1]/2),b===!0?Math.ceil(a/this.curColWidth):b===!1?Math.floor(a/this.curColWidth):Math.round(a/this.curColWidth)}}]).directive(\"gridsterPreview\",function(){return{replace:!0,scope:!0,require:\"^gridster\",template:'<div ng-style=\"previewStyle()\" class=\"gridster-item gridster-preview-holder\"></div>',link:function(a,b,c,d){a.previewStyle=function(){return d.movingItem?{display:\"block\",height:d.movingItem.sizeY*d.curRowHeight-d.margins[0]+\"px\",width:d.movingItem.sizeX*d.curColWidth-d.margins[1]+\"px\",top:d.movingItem.row*d.curRowHeight+(d.outerMargin?d.margins[0]:0)+\"px\",left:d.movingItem.col*d.curColWidth+(d.outerMargin?d.margins[1]:0)+\"px\"}:{display:\"none\"}}}}}).directive(\"gridster\",[\"$timeout\",\"$window\",\"$rootScope\",\"gridsterDebounce\",function(b,c,d,e){return{scope:!0,restrict:\"EAC\",controller:\"GridsterCtrl\",controllerAs:\"gridster\",compile:function(f){return f.prepend('<div ng-if=\"gridster.movingItem\" gridster-preview></div>'),function(f,g,h,i){function j(){g.css(\"height\",i.gridHeight*i.curRowHeight+(i.outerMargin?i.margins[0]:-i.margins[0])+\"px\")}function k(a){if(i.setOptions(a),l(g[0])){\"auto\"===i.width?i.curWidth=g[0].offsetWidth||parseInt(g.css(\"width\"),10):i.curWidth=i.width,\"auto\"===i.colWidth?i.curColWidth=(i.curWidth+(i.outerMargin?-i.margins[1]:i.margins[1]))/i.columns:i.curColWidth=i.colWidth,i.curRowHeight=i.rowHeight,\"string\"==typeof i.rowHeight&&(\"match\"===i.rowHeight?i.curRowHeight=Math.round(i.curColWidth):i.rowHeight.indexOf(\"*\")!==-1?i.curRowHeight=Math.round(i.curColWidth*i.rowHeight.replace(\"*\",\"\").replace(\" \",\"\")):i.rowHeight.indexOf(\"/\")!==-1&&(i.curRowHeight=Math.round(i.curColWidth/i.rowHeight.replace(\"/\",\"\").replace(\" \",\"\")))),i.isMobile=i.mobileModeEnabled&&i.curWidth<=i.mobileBreakPoint;for(var b=0,c=i.grid.length;b<c;++b){var d=i.grid[b];if(d)for(var e=0,f=d.length;e<f;++e)if(d[e]){var h=d[e];h.setElementPosition(),h.setElementSizeY(),h.setElementSizeX()}}j()}}i.loaded=!1,i.$element=g,f.gridster=i,g.addClass(\"gridster\");var l=function(a){return\"hidden\"!==a.style.visibility&&\"none\"!==a.style.display};f.$watch(function(){return i.gridHeight},j),f.$watch(function(){return i.movingItem},function(){i.updateHeight(i.movingItem?i.movingItem.sizeY:0)});var m=h.gridster;m?f.$parent.$watch(m,function(a){k(a)},!0):k({}),f.$watch(function(){return i.loaded},function(){i.loaded?(g.addClass(\"gridster-loaded\"),d.$broadcast(\"gridster-loaded\",i)):g.removeClass(\"gridster-loaded\")}),f.$watch(function(){return i.isMobile},function(){i.isMobile?g.addClass(\"gridster-mobile\").removeClass(\"gridster-desktop\"):g.removeClass(\"gridster-mobile\").addClass(\"gridster-desktop\"),d.$broadcast(\"gridster-mobile-changed\",i)}),f.$watch(function(){return i.draggable},function(){d.$broadcast(\"gridster-draggable-changed\",i)},!0),f.$watch(function(){return i.resizable},function(){d.$broadcast(\"gridster-resizable-changed\",i)},!0);var n=g[0].offsetWidth||parseInt(g.css(\"width\"),10),o=function(){var a=g[0].offsetWidth||parseInt(g.css(\"width\"),10);a&&a!==n&&!i.movingItem&&(n=a,i.loaded&&g.removeClass(\"gridster-loaded\"),k(),i.loaded&&g.addClass(\"gridster-loaded\"),d.$broadcast(\"gridster-resized\",[a,g[0].offsetHeight],i))},p=e(function(){o(),b(function(){f.$apply()})},100);f.$watch(function(){return l(g[0])},p),\"function\"==typeof window.addResizeListener?window.addResizeListener(g[0],p):f.$watch(function(){return g[0].offsetWidth||parseInt(g.css(\"width\"),10)},o);var q=a.element(c);q.on(\"resize\",p),f.$on(\"$destroy\",function(){i.destroy(),q.off(\"resize\",p),\"function\"==typeof window.removeResizeListener&&window.removeResizeListener(g[0],p)}),b(function(){f.$watch(\"gridster.floating\",function(){i.floatItemsUp()}),i.loaded=!0},100)}}}}]).controller(\"GridsterItemCtrl\",function(){this.$element=null,this.gridster=null,this.row=null,this.col=null,this.sizeX=null,this.sizeY=null,this.minSizeX=0,this.minSizeY=0,this.maxSizeX=null,this.maxSizeY=null,this.init=function(a,b){this.$element=a,this.gridster=b,this.sizeX=b.defaultSizeX,this.sizeY=b.defaultSizeY},this.destroy=function(){this.gridster=null,this.$element=null},this.toJSON=function(){return{row:this.row,col:this.col,sizeY:this.sizeY,sizeX:this.sizeX}},this.isMoving=function(){return this.gridster.movingItem===this},this.setPosition=function(a,b){this.gridster.putItem(this,a,b),this.isMoving()||this.setElementPosition()},this.setSize=function(a,b,c){a=a.toUpperCase();var d=\"size\"+a,e=\"Size\"+a;if(\"\"!==b){b=parseInt(b,10),(isNaN(b)||0===b)&&(b=this.gridster[\"default\"+e]);var f=\"X\"===a?this.gridster.columns:this.gridster.maxRows;this[\"max\"+e]&&(f=Math.min(this[\"max\"+e],f)),this.gridster[\"max\"+e]&&(f=Math.min(this.gridster[\"max\"+e],f)),\"X\"===a&&this.cols?f-=this.cols:\"Y\"===a&&this.rows&&(f-=this.rows);var g=0;this[\"min\"+e]&&(g=Math.max(this[\"min\"+e],g)),this.gridster[\"min\"+e]&&(g=Math.max(this.gridster[\"min\"+e],g)),b=Math.max(Math.min(b,f),g);var h=this[d]!==b||this[\"old\"+e]&&this[\"old\"+e]!==b;return this[\"old\"+e]=this[d]=b,this.isMoving()||this[\"setElement\"+e](),!c&&h&&(this.gridster.moveOverlappingItems(this),this.gridster.layoutChanged()),h}},this.setSizeY=function(a,b){return this.setSize(\"Y\",a,b)},this.setSizeX=function(a,b){return this.setSize(\"X\",a,b)},this.setElementPosition=function(){this.gridster.isMobile?this.$element.css({marginLeft:this.gridster.margins[0]+\"px\",marginRight:this.gridster.margins[0]+\"px\",marginTop:this.gridster.margins[1]+\"px\",marginBottom:this.gridster.margins[1]+\"px\",top:\"\",left:\"\"}):this.$element.css({margin:0,top:this.row*this.gridster.curRowHeight+(this.gridster.outerMargin?this.gridster.margins[0]:0)+\"px\",left:this.col*this.gridster.curColWidth+(this.gridster.outerMargin?this.gridster.margins[1]:0)+\"px\"})},this.setElementSizeY=function(){this.gridster.isMobile&&!this.gridster.saveGridItemCalculatedHeightInMobile?this.$element.css(\"height\",\"\"):this.$element.css(\"height\",this.sizeY*this.gridster.curRowHeight-this.gridster.margins[0]+\"px\")},this.setElementSizeX=function(){this.gridster.isMobile?this.$element.css(\"width\",\"\"):this.$element.css(\"width\",this.sizeX*this.gridster.curColWidth-this.gridster.margins[1]+\"px\")},this.getElementSizeX=function(){return this.sizeX*this.gridster.curColWidth-this.gridster.margins[1]},this.getElementSizeY=function(){return this.sizeY*this.gridster.curRowHeight-this.gridster.margins[0]}}).factory(\"GridsterTouch\",[function(){return function(a,b,c,d){var e,f,g={},h=function(a){if(Object.keys)return Object.keys(a).length;var b,c=0;for(b in a)++c;return c},i=function(a){for(var b=0,c=0,d=navigator.userAgent.match(/\\bMSIE\\b/),e=a;null!=e;e=e.offsetParent)d&&(!document.documentMode||document.documentMode<8)&&\"relative\"===e.currentStyle.position&&e.offsetParent&&\"relative\"===e.offsetParent.currentStyle.position&&e.offsetLeft===e.offsetParent.offsetLeft?c+=e.offsetTop:(b+=e.offsetLeft,c+=e.offsetTop);return{x:b,y:c}},j=i(a),k=!1,l=function(e){if(\"mousemove\"!==e.type||0!==h(g)){for(var f=!0,m=e.changedTouches?e.changedTouches:[e],n=0;n<m.length;++n){var o=m[n],p=\"undefined\"!=typeof o.identifier?o.identifier:\"undefined\"!=typeof o.pointerId?o.pointerId:1;if(\"undefined\"==typeof o.pageX)if(o.pageX=o.offsetX+j.x,o.pageY=o.offsetY+j.y,o.srcElement.offsetParent===a&&document.documentMode&&8===document.documentMode&&\"mousedown\"===o.type)o.pageX+=o.srcElement.offsetLeft,o.pageY+=o.srcElement.offsetTop;else if(o.srcElement!==a&&!document.documentMode||document.documentMode<8){for(var q=-2,r=-2,s=o.srcElement;null!==s;s=s.parentNode)q+=s.scrollLeft?s.scrollLeft:0,r+=s.scrollTop?s.scrollTop:0;o.pageX=o.clientX+q,o.pageY=o.clientY+r}var t=o.pageX,u=o.pageY;e.type.match(/(start|down)$/i)?(j=i(a),g[p]&&(d&&d({target:e.target,which:e.which,pointerId:p,pageX:t,pageY:u}),delete g[p]),b&&f&&(f=b({target:e.target,which:e.which,pointerId:p,pageX:t,pageY:u})),g[p]={x:t,y:u},a.msSetPointerCapture&&f?a.msSetPointerCapture(p):\"mousedown\"===e.type&&1===h(g)&&(k?a.setCapture(!0):(document.addEventListener(\"mousemove\",l,!1),document.addEventListener(\"mouseup\",l,!1)))):e.type.match(/move$/i)?!g[p]||g[p].x===t&&g[p].y===u||(c&&f&&(f=c({target:e.target,which:e.which,pointerId:p,pageX:t,pageY:u})),g[p].x=t,g[p].y=u):g[p]&&e.type.match(/(up|end|cancel)$/i)&&(d&&f&&(f=d({target:e.target,which:e.which,pointerId:p,pageX:t,pageY:u})),delete g[p],a.msReleasePointerCapture?a.msReleasePointerCapture(p):\"mouseup\"===e.type&&0===h(g)&&(k?a.releaseCapture():(document.removeEventListener(\"mousemove\",l,!1),document.removeEventListener(\"mouseup\",l,!1))))}f&&(e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation(),e.preventMouseEvent&&e.preventMouseEvent())}};return this.enable=function(){window.navigator.msPointerEnabled?(a.addEventListener(\"MSPointerDown\",l,!1),a.addEventListener(\"MSPointerMove\",l,!1),a.addEventListener(\"MSPointerUp\",l,!1),a.addEventListener(\"MSPointerCancel\",l,!1),\"undefined\"!=typeof a.style.msContentZooming&&(e=a.style.msContentZooming,a.style.msContentZooming=\"none\"),\"undefined\"!=typeof a.style.msTouchAction&&(f=a.style.msTouchAction,a.style.msTouchAction=\"none\")):a.addEventListener?(a.addEventListener(\"touchstart\",l,!1),a.addEventListener(\"touchmove\",l,!1),a.addEventListener(\"touchend\",l,!1),a.addEventListener(\"touchcancel\",l,!1),a.addEventListener(\"mousedown\",l,!1),a.setCapture&&!window.navigator.userAgent.match(/\\bGecko\\b/)&&(k=!0,a.addEventListener(\"mousemove\",l,!1),a.addEventListener(\"mouseup\",l,!1))):a.attachEvent&&a.setCapture&&(k=!0,a.attachEvent(\"onmousedown\",function(){return l(window.event),window.event.returnValue=!1,!1}),a.attachEvent(\"onmousemove\",function(){return l(window.event),window.event.returnValue=!1,!1}),a.attachEvent(\"onmouseup\",function(){return l(window.event),window.event.returnValue=!1,!1}))},this.disable=function(){window.navigator.msPointerEnabled?(a.removeEventListener(\"MSPointerDown\",l,!1),a.removeEventListener(\"MSPointerMove\",l,!1),a.removeEventListener(\"MSPointerUp\",l,!1),a.removeEventListener(\"MSPointerCancel\",l,!1),e&&(a.style.msContentZooming=e),f&&(a.style.msTouchAction=f)):a.removeEventListener?(a.removeEventListener(\"touchstart\",l,!1),a.removeEventListener(\"touchmove\",l,!1),a.removeEventListener(\"touchend\",l,!1),a.removeEventListener(\"touchcancel\",l,!1),a.removeEventListener(\"mousedown\",l,!1),a.setCapture&&!window.navigator.userAgent.match(/\\bGecko\\b/)&&(k=!0,a.removeEventListener(\"mousemove\",l,!1),a.removeEventListener(\"mouseup\",l,!1))):a.detachEvent&&a.setCapture&&(k=!0,a.detachEvent(\"onmousedown\"),a.detachEvent(\"onmousemove\"),a.detachEvent(\"onmouseup\"))},this}}]).factory(\"GridsterDraggable\",[\"$document\",\"$window\",\"GridsterTouch\",function(b,c,d){function e(e,f,g,h,i){function j(a){e.addClass(\"gridster-item-moving\"),g.movingItem=h,g.updateHeight(h.sizeY),f.$apply(function(){g.draggable&&g.draggable.start&&g.draggable.start(a,e,i)})}function k(a){var b=h.row,d=h.col,j=g.draggable&&g.draggable.drag,k=g.draggable.scrollSensitivity,l=g.draggable.scrollSpeed,m=Math.min(g.pixelsToRows(q),g.maxRows-1),n=Math.min(g.pixelsToColumns(p),g.columns-1),o=g.getItems(m,n,h.sizeX,h.sizeY,h),r=0!==o.length;if(g.swapping===!0&&r){var s=g.getBoundingBox(o),t=s.sizeX===h.sizeX&&s.sizeY===h.sizeY,u=s.row===b,v=s.col===d,w=s.row===m&&s.col===n,x=u||v;if(t&&1===o.length){if(w)g.swapItems(h,o[0]);else if(x)return}else if(s.sizeX<=h.sizeX&&s.sizeY<=h.sizeY&&x)for(var y=h.row<=m?h.row:m+h.sizeY,z=h.col<=n?h.col:n+h.sizeX,A=y-s.row,B=z-s.col,C=0,E=o.length;C<E;++C){var F=o[C],G=g.getItems(F.row+A,F.col+B,F.sizeX,F.sizeY,h);0===G.length&&g.putItem(F,F.row+A,F.col+B)}}g.pushing===!1&&r||(h.row=m,h.col=n),a.pageY-D.body.scrollTop<k?D.body.scrollTop=D.body.scrollTop-l:c.innerHeight-(a.pageY-D.body.scrollTop)<k&&(D.body.scrollTop=D.body.scrollTop+l),a.pageX-D.body.scrollLeft<k?D.body.scrollLeft=D.body.scrollLeft-l:c.innerWidth-(a.pageX-D.body.scrollLeft)<k&&(D.body.scrollLeft=D.body.scrollLeft+l),(j||b!==h.row||d!==h.col)&&f.$apply(function(){j&&g.draggable.drag(a,e,i)})}function l(a){e.removeClass(\"gridster-item-moving\");var b=Math.min(g.pixelsToRows(q),g.maxRows-1),c=Math.min(g.pixelsToColumns(p),g.columns-1);g.pushing===!1&&0!==g.getItems(b,c,h.sizeX,h.sizeY,h).length||(h.row=b,h.col=c),g.movingItem=null,h.setPosition(h.row,h.col),f.$apply(function(){g.draggable&&g.draggable.stop&&g.draggable.stop(a,e,i)})}function m(b){if(E.indexOf(b.target.nodeName.toLowerCase())!==-1)return!1;var c=a.element(b.target);if(c.hasClass(\"gridster-item-resizable-handler\"))return!1;if(c.attr(\"onclick\")||c.attr(\"ng-click\"))return!1;if(c.closest&&c.closest(\".gridster-no-drag\").length)return!1;if(g.draggable&&g.draggable.handle){var d=a.element(e[0].querySelectorAll(g.draggable.handle)),f=!1;a:for(var i=0,k=d.length;i<k;++i){var l=d[i];if(l===b.target){f=!0;break}for(var m=b.target,n=0;n<20;++n){var o=m.parentNode;if(o===e[0]||!o)break;if(o===l){f=!0;break a}m=o}}if(!f)return!1}switch(b.which){case 1:break;case 2:case 3:return}return x=b.pageX,y=b.pageY,p=parseInt(e.css(\"left\"),10),q=parseInt(e.css(\"top\"),10),r=e[0].offsetWidth,s=e[0].offsetHeight,t=h.col,u=h.row,j(b),!0}function n(a){if(!e.hasClass(\"gridster-item-moving\")||e.hasClass(\"gridster-item-resizing\"))return!1;var b=g.curWidth-1,c=g.curRowHeight*g.maxRows-1;v=a.pageX,w=a.pageY;var d=v-x+z,f=w-y+A;z=A=0,x=v,y=w;var h=d,i=f;return p+h<C?(d=C-p,z=h-d):p+r+h>b&&(d=b-p-r,z=h-d),q+i<B?(f=B-q,A=i-f):q+s+i>c&&(f=c-q-s,A=i-f),p+=d,q+=f,e.css({top:q+\"px\",left:p+\"px\"}),k(a),!0}function o(a){return!(!e.hasClass(\"gridster-item-moving\")||e.hasClass(\"gridster-item-resizing\"))&&(z=A=0,l(a),!0)}var p,q,r,s,t,u,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=b[0],E=[\"select\",\"option\",\"input\",\"textarea\",\"button\"],F=null,G=null;this.enable=function(){if(F!==!0){if(F=!0,G)return void G.enable();G=new d(e[0],m,n,o),G.enable()}},this.disable=function(){F!==!1&&(F=!1,G&&G.disable())},this.toggle=function(a){a?this.enable():this.disable()},this.destroy=function(){this.disable()}}return e}]).factory(\"GridsterResizable\",[\"GridsterTouch\",function(b){function c(c,d,e,f,g){function h(h){function i(a){c.addClass(\"gridster-item-moving\"),c.addClass(\"gridster-item-resizing\"),e.movingItem=f,f.setElementSizeX(),f.setElementSizeY(),f.setElementPosition(),e.updateHeight(1),d.$apply(function(){e.resizable&&e.resizable.start&&e.resizable.start(a,c,g)})}function j(a){var b=f.row,i=f.col,j=f.sizeX,k=f.sizeY,l=e.resizable&&e.resizable.resize,m=f.col;[\"w\",\"nw\",\"sw\"].indexOf(h)!==-1&&(m=e.pixelsToColumns(o,!1));var n=f.row;[\"n\",\"ne\",\"nw\"].indexOf(h)!==-1&&(n=e.pixelsToRows(p,!1));var s=f.sizeX;[\"n\",\"s\"].indexOf(h)===-1&&(s=e.pixelsToColumns(q,!0));var t=f.sizeY;[\"e\",\"w\"].indexOf(h)===-1&&(t=e.pixelsToRows(r,!0));var u=n>-1&&m>-1&&s+m<=e.columns&&t+n<=e.maxRows;!u||e.pushing===!1&&0!==e.getItems(n,m,s,t,f).length||(f.row=n,f.col=m,f.sizeX=s,f.sizeY=t);var v=f.row!==b||f.col!==i||f.sizeX!==j||f.sizeY!==k;(l||v)&&d.$apply(function(){l&&e.resizable.resize(a,c,g)})}function k(a){c.removeClass(\"gridster-item-moving\"),c.removeClass(\"gridster-item-resizing\"),e.movingItem=null,f.setPosition(f.row,f.col),f.setSizeY(f.sizeY),f.setSizeX(f.sizeX),d.$apply(function(){e.resizable&&e.resizable.stop&&e.resizable.stop(a,c,g)})}function l(a){switch(a.which){case 1:break;case 2:case 3:return}return u=e.draggable.enabled,u&&(e.draggable.enabled=!1,d.$broadcast(\"gridster-draggable-changed\",e)),z=a.pageX,A=a.pageY,o=parseInt(c.css(\"left\"),10),p=parseInt(c.css(\"top\"),10),q=c[0].offsetWidth,r=c[0].offsetHeight,s=f.sizeX,t=f.sizeY,i(a),!0}function m(a){var b=e.curWidth-1;x=a.pageX,y=a.pageY;var d=x-z+B,f=y-A+C;B=C=0,z=x,A=y;var g=f,h=d;return w.indexOf(\"n\")>=0&&(r-g<G()?(f=r-G(),C=g-f):p+g<D&&(f=D-p,C=g-f),p+=f,r-=f),w.indexOf(\"s\")>=0&&(r+g<G()?(f=G()-r,C=g-f):p+r+g>E&&(f=E-p-r,C=g-f),r+=f),w.indexOf(\"w\")>=0&&(q-h<H()?(d=q-H(),B=h-d):o+h<F&&(d=F-o,B=h-d),o+=d,q-=d),w.indexOf(\"e\")>=0&&(q+h<H()?(d=H()-q,B=h-d):o+q+h>b&&(d=b-o-q,B=h-d),q+=d),c.css({top:p+\"px\",left:o+\"px\",width:q+\"px\",height:r+\"px\"}),j(a),!0}function n(a){return e.draggable.enabled!==u&&(e.draggable.enabled=u,d.$broadcast(\"gridster-draggable-changed\",e)),B=C=0,k(a),!0}var o,p,q,r,s,t,u,v,w=h,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=9999,F=0,G=function(){return(f.minSizeY?f.minSizeY:1)*e.curRowHeight-e.margins[0]},H=function(){return(f.minSizeX?f.minSizeX:1)*e.curColWidth-e.margins[1]},I=null;this.enable=function(){I||(I=a.element('<div class=\"gridster-item-resizable-handler handle-'+w+'\"></div>'),c.append(I)),v=new b(I[0],l,m,n),v.enable()},this.disable=function(){I&&(I.remove(),I=null),v.disable(),v=void 0},this.destroy=function(){this.disable()}}var i=[],j=e.resizable.handles;\"string\"==typeof j&&(j=e.resizable.handles.split(\",\"));for(var k=!1,l=0,m=j.length;l<m;l++)i.push(new h(j[l]));this.enable=function(){if(!k){for(var a=0,b=i.length;a<b;a++)i[a].enable();k=!0}},this.disable=function(){if(k){for(var a=0,b=i.length;a<b;a++)i[a].disable();k=!1}},this.toggle=function(a){a?this.enable():this.disable()},this.destroy=function(){for(var a=0,b=i.length;a<b;a++)i[a].destroy()}}return c}]).factory(\"gridsterDebounce\",function(){return function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}}).directive(\"gridsterItem\",[\"$parse\",\"GridsterDraggable\",\"GridsterResizable\",\"gridsterDebounce\",function(a,b,c,d){return{scope:!0,restrict:\"EA\",controller:\"GridsterItemCtrl\",controllerAs:\"gridsterItem\",require:[\"^gridster\",\"gridsterItem\"],link:function(e,f,g,h){function i(){o.setPosition(o.row,o.col),r.row&&r.row.assign&&r.row.assign(e,o.row),r.col&&r.col.assign&&r.col.assign(e,o.col)}function j(){var a=o.setSizeX(o.sizeX,!0);a&&r.sizeX&&r.sizeX.assign&&r.sizeX.assign(e,o.sizeX);var b=o.setSizeY(o.sizeY,!0);b&&r.sizeY&&r.sizeY.assign&&r.sizeY.assign(e,o.sizeY),(a||b)&&(o.gridster.moveOverlappingItems(o),n.layoutChanged(),e.$broadcast(\"gridster-item-resized\",o))}function k(){var a=document.createElement(\"div\"),b={transition:\"transitionend\",OTransition:\"oTransitionEnd\",MozTransition:\"transitionend\",WebkitTransition:\"webkitTransitionEnd\"};for(var c in b)if(void 0!==a.style[c])return b[c]}var l,m=g.gridsterItem,n=h[0],o=h[1];if(e.gridster=n,m){var p=a(m);l=p(e)||{},!l&&p.assign&&(l={row:o.row,col:o.col,sizeX:o.sizeX,sizeY:o.sizeY,minSizeX:0,minSizeY:0,maxSizeX:null,maxSizeY:null},p.assign(e,l))}else l=g;o.init(f,n),f.addClass(\"gridster-item\");for(var q=[\"minSizeX\",\"maxSizeX\",\"minSizeY\",\"maxSizeY\",\"sizeX\",\"sizeY\",\"row\",\"col\"],r={},s=[],t=function(b){var c;if(\"string\"==typeof l[b])c=l[b];else if(\"string\"==typeof l[b.toLowerCase()])c=l[b.toLowerCase()];else{if(!m)return;c=m+\".\"+b}s.push('\"'+b+'\":'+c),r[b]=a(c);var d=r[b](e);\"number\"==typeof d&&(o[b]=d)},u=0,v=q.length;u<v;++u)t(q[u]);var w=\"{\"+s.join(\",\")+\"}\";e.$watchCollection(w,function(a,b){for(var c in a){var d=a[c],e=b[c];e!==d&&(d=parseInt(d,10),isNaN(d)||(o[c]=d))}}),e.$watch(function(){return o.row+\",\"+o.col},i),e.$watch(function(){return o.sizeY+\",\"+o.sizeX+\",\"+o.minSizeX+\",\"+o.maxSizeX+\",\"+o.minSizeY+\",\"+o.maxSizeY},j);var x=new b(f,e,n,o,l),y=new c(f,e,n,o,l),z=function(){y.toggle(!n.isMobile&&n.resizable&&n.resizable.enabled)};z();var A=function(){x.toggle(!n.isMobile&&n.draggable&&n.draggable.enabled)};A(),e.$on(\"gridster-draggable-changed\",A),e.$on(\"gridster-resizable-changed\",z),e.$on(\"gridster-resized\",z),e.$on(\"gridster-mobile-changed\",function(){z(),A()});var B=d(function(){e.$apply(function(){e.$broadcast(\"gridster-item-transition-end\",o)})},50);return f.on(k(),B),e.$broadcast(\"gridster-item-initialized\",o),e.$on(\"$destroy\",function(){try{y.destroy(),x.destroy()}catch(a){}try{n.removeItem(o)}catch(a){}try{o.destroy()}catch(a){}})}}}]).directive(\"gridsterNoDrag\",function(){return{restrict:\"A\",link:function(a,b){b.addClass(\"gridster-no-drag\")}}})});","angular.module('app')\n\n.controller('DashboardCtrl', ['$scope', '$timeout',\n\tfunction($scope, $timeout) {\n\t\t$scope.gridsterOptions = {\n\t\t\tmargins: [20, 20],\n\t\t\tcolumns: 4,\n\t\t\tdraggable: {\n\t\t\t\thandle: 'h3'\n\t\t\t}\n\t\t};\n\n\t\t$scope.dashboards = {\n\t\t\t'1': {\n\t\t\t\tid: '1',\n\t\t\t\tname: 'Home',\n\t\t\t\twidgets: [{\n\t\t\t\t\tcol: 0,\n\t\t\t\t\trow: 0,\n\t\t\t\t\tsizeY: 1,\n\t\t\t\t\tsizeX: 1,\n\t\t\t\t\tname: \"Widget 1\"\n\t\t\t\t}, {\n\t\t\t\t\tcol: 2,\n\t\t\t\t\trow: 1,\n\t\t\t\t\tsizeY: 1,\n\t\t\t\t\tsizeX: 1,\n\t\t\t\t\tname: \"Widget 2\"\n\t\t\t\t}]\n\t\t\t},\n\t\t\t'2': {\n\t\t\t\tid: '2',\n\t\t\t\tname: 'Other',\n\t\t\t\twidgets: [{\n\t\t\t\t\tcol: 1,\n\t\t\t\t\trow: 1,\n\t\t\t\t\tsizeY: 1,\n\t\t\t\t\tsizeX: 2,\n\t\t\t\t\tname: \"Other Widget 1\"\n\t\t\t\t}, {\n\t\t\t\t\tcol: 1,\n\t\t\t\t\trow: 3,\n\t\t\t\t\tsizeY: 1,\n\t\t\t\t\tsizeX: 1,\n\t\t\t\t\tname: \"Other Widget 2\"\n\t\t\t\t}]\n\t\t\t}\n\t\t};\n\n\t\t$scope.clear = function() {\n\t\t\t$scope.dashboard.widgets = [];\n\t\t};\n\n\t\t$scope.addWidget = function() {\n\t\t\t$scope.dashboard.widgets.push({\n\t\t\t\tname: \"New Widget\",\n\t\t\t\tsizeX: 1,\n\t\t\t\tsizeY: 1\n\t\t\t});\n\t\t};\n\n\t\t$scope.$watch('selectedDashboardId', function(newVal, oldVal) {\n\t\t\tif (newVal !== oldVal) {\n\t\t\t\t$scope.dashboard = $scope.dashboards[newVal];\n\t\t\t} else {\n\t\t\t\t$scope.dashboard = $scope.dashboards[1];\n\t\t\t}\n\t\t});\n\n\t\t// init dashboard\n\t\t$scope.selectedDashboardId = '1';\n\n\t}\n])\n\n.controller('CustomWidgetCtrl', ['$scope', '$modal',\n\tfunction($scope, $modal) {\n\n\t\t$scope.remove = function(widget) {\n\t\t\t$scope.dashboard.widgets.splice($scope.dashboard.widgets.indexOf(widget), 1);\n\t\t};\n\n\t\t$scope.openSettings = function(widget) {\n\t\t\t$modal.open({\n\t\t\t\tscope: $scope,\n\t\t\t\ttemplateUrl: 'demo/dashboard/widget_settings.html',\n\t\t\t\tcontroller: 'WidgetSettingsCtrl',\n\t\t\t\tresolve: {\n\t\t\t\t\twidget: function() {\n\t\t\t\t\t\treturn widget;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t}\n])\n\n.controller('WidgetSettingsCtrl', ['$scope', '$timeout', '$rootScope', '$modalInstance', 'widget',\n\tfunction($scope, $timeout, $rootScope, $modalInstance, widget) {\n\t\t$scope.widget = widget;\n\n\t\t$scope.form = {\n\t\t\tname: widget.name,\n\t\t\tsizeX: widget.sizeX,\n\t\t\tsizeY: widget.sizeY,\n\t\t\tcol: widget.col,\n\t\t\trow: widget.row\n\t\t};\n\n\t\t$scope.sizeOptions = [{\n\t\t\tid: '1',\n\t\t\tname: '1'\n\t\t}, {\n\t\t\tid: '2',\n\t\t\tname: '2'\n\t\t}, {\n\t\t\tid: '3',\n\t\t\tname: '3'\n\t\t}, {\n\t\t\tid: '4',\n\t\t\tname: '4'\n\t\t}];\n\n\t\t$scope.dismiss = function() {\n\t\t\t$modalInstance.dismiss();\n\t\t};\n\n\t\t$scope.remove = function() {\n\t\t\t$scope.dashboard.widgets.splice($scope.dashboard.widgets.indexOf(widget), 1);\n\t\t\t$modalInstance.close();\n\t\t};\n\n\t\t$scope.submit = function() {\n\t\t\tangular.extend(widget, $scope.form);\n\n\t\t\t$modalInstance.close(widget);\n\t\t};\n\n\t}\n])\n\n// helper code\n.filter('object2Array', function() {\n\treturn function(input) {\n\t\tvar out = [];\n\t\tfor (i in input) {\n\t\t\tout.push(input[i]);\n\t\t}\n\t\treturn out;\n\t}\n});\n","angular.module('app')\n\n.directive('integer', function() {\n\treturn {\n\t\trequire: 'ngModel',\n\t\tlink: function(scope, ele, attr, ctrl) {\n\t\t\tctrl.$parsers.unshift(function(viewValue) {\n\t\t\t\tif (viewValue === '' || viewValue === null || typeof viewValue === 'undefined') {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn parseInt(viewValue, 10);\n\t\t\t});\n\t\t}\n\t};\n})\n\n.controller('MainCtrl', function($scope) {\n\n\t$scope.gridsterOpts = {\n\t\tmargins: [20, 20],\n\t\touterMargin: false,\n\t\tpushing: true,\n\t\tfloating: true,\n\t\tdraggable: {\n\t\t\tenabled: false\n\t\t},\n\t\tresizable: {\n\t\t\tenabled: false,\n\t\t\thandles: ['n', 'e', 's', 'w', 'se', 'sw']\n\t\t}\n\t};\n\n\t// these map directly to gridsterItem options\n\t$scope.standardItems = [{\n\t\tsizeX: 2,\n\t\tsizeY: 1,\n\t\trow: 0,\n\t\tcol: 0\n\t}, {\n\t\tsizeX: 2,\n\t\tsizeY: 2,\n\t\trow: 0,\n\t\tcol: 2\n\t}, {\n\t\tsizeX: 2,\n\t\tsizeY: 1,\n\t\trow: 2,\n\t\tcol: 1\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 2,\n\t\tcol: 3\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 2,\n\t\tcol: 4\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 0,\n\t\tcol: 4\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 0,\n\t\tcol: 5\n\t}, {\n\t\tsizeX: 2,\n\t\tsizeY: 1,\n\t\trow: 1,\n\t\tcol: 0\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 1,\n\t\tcol: 4\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 2,\n\t\trow: 1,\n\t\tcol: 5\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 2,\n\t\tcol: 0\n\t}];\n\n\t// these are non-standard, so they require mapping options\n\t$scope.customItems = [{\n\t\tsize: {\n\t\t\tx: 2,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [0, 0]\n\t}, {\n\t\tsize: {\n\t\t\tx: 2,\n\t\t\ty: 2\n\t\t},\n\t\tposition: [0, 2]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [1, 4]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 2\n\t\t},\n\t\tposition: [1, 5]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [2, 0]\n\t}, {\n\t\tsize: {\n\t\t\tx: 2,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [2, 1]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [2, 3]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [0, 4]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [0, 5]\n\t}, {\n\t\tsize: {\n\t\t\tx: 2,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [1, 0]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [2, 4]\n\t}];\n\n\t$scope.emptyItems = [{\n\t\tname: 'Item1'\n\t}, {\n\t\tname: 'Item2'\n\t}, {\n\t\tname: 'Item3'\n\t}, {\n\t\tname: 'Item4'\n\t}];\n\n\t// map the gridsterItem to the custom item structure\n\t$scope.customItemMap = {\n\t\tsizeX: 'item.size.x',\n\t\tsizeY: 'item.size.y',\n\t\trow: 'item.position[0]',\n\t\tcol: 'item.position[1]'\n\t};\n\n});\n","/*global define:true*/\n(function(root, factory) {\n\n\t'use strict';\n\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD\n\t\tdefine(['angular'], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// CommonJS\n\t\tmodule.exports = factory(require('angular'));\n\t} else {\n\t\t// Browser, nothing \"exported\". Only registered as a module with angular.\n\t\tfactory(root.angular);\n\t}\n}(this, function(angular) {\n\n\t'use strict';\n\n\t// This returned angular module 'gridster' is what is exported.\n\treturn angular.module('gridster', [])\n\n\t.constant('gridsterConfig', {\n\t\tcolumns: 6, // number of columns in the grid\n\t\tpushing: true, // whether to push other items out of the way\n\t\tfloating: true, // whether to automatically float items up so they stack\n\t\tswapping: false, // whether or not to have items switch places instead of push down if they are the same size\n\t\twidth: 'auto', // width of the grid. \"auto\" will expand the grid to its parent container\n\t\tcolWidth: 'auto', // width of grid columns. \"auto\" will divide the width of the grid evenly among the columns\n\t\trowHeight: 'match', // height of grid rows. 'match' will make it the same as the column width, a numeric value will be interpreted as pixels, '/2' is half the column width, '*5' is five times the column width, etc.\n\t\tmargins: [10, 10], // margins in between grid items\n\t\touterMargin: true,\n\t\tisMobile: false, // toggle mobile view\n\t\tmobileBreakPoint: 600, // width threshold to toggle mobile mode\n\t\tmobileModeEnabled: true, // whether or not to toggle mobile mode when screen width is less than mobileBreakPoint\n\t\tminColumns: 1, // minimum amount of columns the grid can scale down to\n\t\tminRows: 1, // minimum amount of rows to show if the grid is empty\n\t\tmaxRows: 100, // maximum amount of rows in the grid\n\t\tdefaultSizeX: 2, // default width of an item in columns\n\t\tdefaultSizeY: 1, // default height of an item in rows\n\t\tminSizeX: 1, // minimum column width of an item\n\t\tmaxSizeX: null, // maximum column width of an item\n\t\tminSizeY: 1, // minumum row height of an item\n\t\tmaxSizeY: null, // maximum row height of an item\n\t\tsaveGridItemCalculatedHeightInMobile: false, // grid item height in mobile display. true- to use the calculated height by sizeY given\n\t\tresizable: { // options to pass to resizable handler\n\t\t\tenabled: true,\n\t\t\thandles: ['s', 'e', 'n', 'w', 'se', 'ne', 'sw', 'nw']\n\t\t},\n\t\tdraggable: { // options to pass to draggable handler\n\t\t\tenabled: true,\n\t\t\tscrollSensitivity: 20, // Distance in pixels from the edge of the viewport after which the viewport should scroll, relative to pointer\n\t\t\tscrollSpeed: 15 // Speed at which the window should scroll once the mouse pointer gets within scrollSensitivity distance\n\t\t}\n\t})\n\n\t.controller('GridsterCtrl', ['gridsterConfig', '$timeout',\n\t\tfunction(gridsterConfig, $timeout) {\n\n\t\t\tvar gridster = this;\n\n\t\t\t/**\n\t\t\t * Create options from gridsterConfig constant\n\t\t\t */\n\t\t\tangular.extend(this, gridsterConfig);\n\n\t\t\tthis.resizable = angular.extend({}, gridsterConfig.resizable || {});\n\t\t\tthis.draggable = angular.extend({}, gridsterConfig.draggable || {});\n\n\t\t\tvar flag = false;\n\t\t\tthis.layoutChanged = function() {\n\t\t\t\tif (flag) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tflag = true;\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tflag = false;\n\t\t\t\t\tif (gridster.loaded) {\n\t\t\t\t\t\tgridster.floatItemsUp();\n\t\t\t\t\t}\n\t\t\t\t\tgridster.updateHeight(gridster.movingItem ? gridster.movingItem.sizeY : 0);\n\t\t\t\t}, 30);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * A positional array of the items in the grid\n\t\t\t */\n\t\t\tthis.grid = [];\n\n\t\t\t/**\n\t\t\t * Clean up after yourself\n\t\t\t */\n\t\t\tthis.destroy = function() {\n\t\t\t\t// empty the grid to cut back on the possibility\n\t\t\t\t// of circular references\n\t\t\t\tif (this.grid) {\n\t\t\t\t\tthis.grid = [];\n\t\t\t\t}\n\t\t\t\tthis.$element = null;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Overrides default options\n\t\t\t *\n\t\t\t * @param {Object} options The options to override\n\t\t\t */\n\t\t\tthis.setOptions = function(options) {\n\t\t\t\tif (!options) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\toptions = angular.extend({}, options);\n\n\t\t\t\t// all this to avoid using jQuery...\n\t\t\t\tif (options.draggable) {\n\t\t\t\t\tangular.extend(this.draggable, options.draggable);\n\t\t\t\t\tdelete(options.draggable);\n\t\t\t\t}\n\t\t\t\tif (options.resizable) {\n\t\t\t\t\tangular.extend(this.resizable, options.resizable);\n\t\t\t\t\tdelete(options.resizable);\n\t\t\t\t}\n\n\t\t\t\tangular.extend(this, options);\n\n\t\t\t\tif (!this.margins || this.margins.length !== 2) {\n\t\t\t\t\tthis.margins = [0, 0];\n\t\t\t\t} else {\n\t\t\t\t\tfor (var x = 0, l = this.margins.length; x < l; ++x) {\n\t\t\t\t\t\tthis.margins[x] = parseInt(this.margins[x], 10);\n\t\t\t\t\t\tif (isNaN(this.margins[x])) {\n\t\t\t\t\t\t\tthis.margins[x] = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Check if item can occupy a specified position in the grid\n\t\t\t *\n\t\t\t * @param {Object} item The item in question\n\t\t\t * @param {Number} row The row index\n\t\t\t * @param {Number} column The column index\n\t\t\t * @returns {Boolean} True if if item fits\n\t\t\t */\n\t\t\tthis.canItemOccupy = function(item, row, column) {\n\t\t\t\treturn row > -1 && column > -1 && item.sizeX + column <= this.columns && item.sizeY + row <= this.maxRows;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Set the item in the first suitable position\n\t\t\t *\n\t\t\t * @param {Object} item The item to insert\n\t\t\t */\n\t\t\tthis.autoSetItemPosition = function(item) {\n\t\t\t\t// walk through each row and column looking for a place it will fit\n\t\t\t\tfor (var rowIndex = 0; rowIndex < this.maxRows; ++rowIndex) {\n\t\t\t\t\tfor (var colIndex = 0; colIndex < this.columns; ++colIndex) {\n\t\t\t\t\t\t// only insert if position is not already taken and it can fit\n\t\t\t\t\t\tvar items = this.getItems(rowIndex, colIndex, item.sizeX, item.sizeY, item);\n\t\t\t\t\t\tif (items.length === 0 && this.canItemOccupy(item, rowIndex, colIndex)) {\n\t\t\t\t\t\t\tthis.putItem(item, rowIndex, colIndex);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unable to place item!');\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Gets items at a specific coordinate\n\t\t\t *\n\t\t\t * @param {Number} row\n\t\t\t * @param {Number} column\n\t\t\t * @param {Number} sizeX\n\t\t\t * @param {Number} sizeY\n\t\t\t * @param {Array} excludeItems An array of items to exclude from selection\n\t\t\t * @returns {Array} Items that match the criteria\n\t\t\t */\n\t\t\tthis.getItems = function(row, column, sizeX, sizeY, excludeItems) {\n\t\t\t\tvar items = [];\n\t\t\t\tif (!sizeX || !sizeY) {\n\t\t\t\t\tsizeX = sizeY = 1;\n\t\t\t\t}\n\t\t\t\tif (excludeItems && !(excludeItems instanceof Array)) {\n\t\t\t\t\texcludeItems = [excludeItems];\n\t\t\t\t}\n\t\t\t\tfor (var h = 0; h < sizeY; ++h) {\n\t\t\t\t\tfor (var w = 0; w < sizeX; ++w) {\n\t\t\t\t\t\tvar item = this.getItem(row + h, column + w, excludeItems);\n\t\t\t\t\t\tif (item && (!excludeItems || excludeItems.indexOf(item) === -1) && items.indexOf(item) === -1) {\n\t\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn items;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * @param {Array} items\n\t\t\t * @returns {Object} An item that represents the bounding box of the items\n\t\t\t */\n\t\t\tthis.getBoundingBox = function(items) {\n\n\t\t\t\tif (items.length === 0) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (items.length === 1) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\trow: items[0].row,\n\t\t\t\t\t\tcol: items[0].col,\n\t\t\t\t\t\tsizeY: items[0].sizeY,\n\t\t\t\t\t\tsizeX: items[0].sizeX\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tvar maxRow = 0;\n\t\t\t\tvar maxCol = 0;\n\t\t\t\tvar minRow = 9999;\n\t\t\t\tvar minCol = 9999;\n\n\t\t\t\tfor (var i = 0, l = items.length; i < l; ++i) {\n\t\t\t\t\tvar item = items[i];\n\t\t\t\t\tminRow = Math.min(item.row, minRow);\n\t\t\t\t\tminCol = Math.min(item.col, minCol);\n\t\t\t\t\tmaxRow = Math.max(item.row + item.sizeY, maxRow);\n\t\t\t\t\tmaxCol = Math.max(item.col + item.sizeX, maxCol);\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\trow: minRow,\n\t\t\t\t\tcol: minCol,\n\t\t\t\t\tsizeY: maxRow - minRow,\n\t\t\t\t\tsizeX: maxCol - minCol\n\t\t\t\t};\n\t\t\t};\n\n\n\t\t\t/**\n\t\t\t * Removes an item from the grid\n\t\t\t *\n\t\t\t * @param {Object} item\n\t\t\t */\n\t\t\tthis.removeItem = function(item) {\n\t\t\t\tfor (var rowIndex = 0, l = this.grid.length; rowIndex < l; ++rowIndex) {\n\t\t\t\t\tvar columns = this.grid[rowIndex];\n\t\t\t\t\tif (!columns) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar index = columns.indexOf(item);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tcolumns[index] = null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.layoutChanged();\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Returns the item at a specified coordinate\n\t\t\t *\n\t\t\t * @param {Number} row\n\t\t\t * @param {Number} column\n\t\t\t * @param {Array} excludeItems Items to exclude from selection\n\t\t\t * @returns {Object} The matched item or null\n\t\t\t */\n\t\t\tthis.getItem = function(row, column, excludeItems) {\n\t\t\t\tif (excludeItems && !(excludeItems instanceof Array)) {\n\t\t\t\t\texcludeItems = [excludeItems];\n\t\t\t\t}\n\t\t\t\tvar sizeY = 1;\n\t\t\t\twhile (row > -1) {\n\t\t\t\t\tvar sizeX = 1,\n\t\t\t\t\t\tcol = column;\n\t\t\t\t\twhile (col > -1) {\n\t\t\t\t\t\tvar items = this.grid[row];\n\t\t\t\t\t\tif (items) {\n\t\t\t\t\t\t\tvar item = items[col];\n\t\t\t\t\t\t\tif (item && (!excludeItems || excludeItems.indexOf(item) === -1) && item.sizeX >= sizeX && item.sizeY >= sizeY) {\n\t\t\t\t\t\t\t\treturn item;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t++sizeX;\n\t\t\t\t\t\t--col;\n\t\t\t\t\t}\n\t\t\t\t\t--row;\n\t\t\t\t\t++sizeY;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Insert an array of items into the grid\n\t\t\t *\n\t\t\t * @param {Array} items An array of items to insert\n\t\t\t */\n\t\t\tthis.putItems = function(items) {\n\t\t\t\tfor (var i = 0, l = items.length; i < l; ++i) {\n\t\t\t\t\tthis.putItem(items[i]);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Insert a single item into the grid\n\t\t\t *\n\t\t\t * @param {Object} item The item to insert\n\t\t\t * @param {Number} row (Optional) Specifies the items row index\n\t\t\t * @param {Number} column (Optional) Specifies the items column index\n\t\t\t * @param {Array} ignoreItems\n\t\t\t */\n\t\t\tthis.putItem = function(item, row, column, ignoreItems) {\n\t\t\t\t// auto place item if no row specified\n\t\t\t\tif (typeof row === 'undefined' || row === null) {\n\t\t\t\t\trow = item.row;\n\t\t\t\t\tcolumn = item.col;\n\t\t\t\t\tif (typeof row === 'undefined' || row === null) {\n\t\t\t\t\t\tthis.autoSetItemPosition(item);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// keep item within allowed bounds\n\t\t\t\tif (!this.canItemOccupy(item, row, column)) {\n\t\t\t\t\tcolumn = Math.min(this.columns - item.sizeX, Math.max(0, column));\n\t\t\t\t\trow = Math.min(this.maxRows - item.sizeY, Math.max(0, row));\n\t\t\t\t}\n\n\t\t\t\t// check if item is already in grid\n\t\t\t\tif (item.oldRow !== null && typeof item.oldRow !== 'undefined') {\n\t\t\t\t\tvar samePosition = item.oldRow === row && item.oldColumn === column;\n\t\t\t\t\tvar inGrid = this.grid[row] && this.grid[row][column] === item;\n\t\t\t\t\tif (samePosition && inGrid) {\n\t\t\t\t\t\titem.row = row;\n\t\t\t\t\t\titem.col = column;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// remove from old position\n\t\t\t\t\t\tvar oldRow = this.grid[item.oldRow];\n\t\t\t\t\t\tif (oldRow && oldRow[item.oldColumn] === item) {\n\t\t\t\t\t\t\tdelete oldRow[item.oldColumn];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titem.oldRow = item.row = row;\n\t\t\t\titem.oldColumn = item.col = column;\n\n\t\t\t\tthis.moveOverlappingItems(item, ignoreItems);\n\n\t\t\t\tif (!this.grid[row]) {\n\t\t\t\t\tthis.grid[row] = [];\n\t\t\t\t}\n\t\t\t\tthis.grid[row][column] = item;\n\n\t\t\t\tif (this.movingItem === item) {\n\t\t\t\t\tthis.floatItemUp(item);\n\t\t\t\t}\n\t\t\t\tthis.layoutChanged();\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Trade row and column if item1 with item2\n\t\t\t *\n\t\t\t * @param {Object} item1\n\t\t\t * @param {Object} item2\n\t\t\t */\n\t\t\tthis.swapItems = function(item1, item2) {\n\t\t\t\tthis.grid[item1.row][item1.col] = item2;\n\t\t\t\tthis.grid[item2.row][item2.col] = item1;\n\n\t\t\t\tvar item1Row = item1.row;\n\t\t\t\tvar item1Col = item1.col;\n\t\t\t\titem1.row = item2.row;\n\t\t\t\titem1.col = item2.col;\n\t\t\t\titem2.row = item1Row;\n\t\t\t\titem2.col = item1Col;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Prevents items from being overlapped\n\t\t\t *\n\t\t\t * @param {Object} item The item that should remain\n\t\t\t * @param {Array} ignoreItems\n\t\t\t */\n\t\t\tthis.moveOverlappingItems = function(item, ignoreItems) {\n\t\t\t\t// don't move item, so ignore it\n\t\t\t\tif (!ignoreItems) {\n\t\t\t\t\tignoreItems = [item];\n\t\t\t\t} else if (ignoreItems.indexOf(item) === -1) {\n\t\t\t\t\tignoreItems = ignoreItems.slice(0);\n\t\t\t\t\tignoreItems.push(item);\n\t\t\t\t}\n\n\t\t\t\t// get the items in the space occupied by the item's coordinates\n\t\t\t\tvar overlappingItems = this.getItems(\n\t\t\t\t\titem.row,\n\t\t\t\t\titem.col,\n\t\t\t\t\titem.sizeX,\n\t\t\t\t\titem.sizeY,\n\t\t\t\t\tignoreItems\n\t\t\t\t);\n\t\t\t\tthis.moveItemsDown(overlappingItems, item.row + item.sizeY, ignoreItems);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Moves an array of items to a specified row\n\t\t\t *\n\t\t\t * @param {Array} items The items to move\n\t\t\t * @param {Number} newRow The target row\n\t\t\t * @param {Array} ignoreItems\n\t\t\t */\n\t\t\tthis.moveItemsDown = function(items, newRow, ignoreItems) {\n\t\t\t\tif (!items || items.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\titems.sort(function(a, b) {\n\t\t\t\t\treturn a.row - b.row;\n\t\t\t\t});\n\n\t\t\t\tignoreItems = ignoreItems ? ignoreItems.slice(0) : [];\n\t\t\t\tvar topRows = {},\n\t\t\t\t\titem, i, l;\n\n\t\t\t\t// calculate the top rows in each column\n\t\t\t\tfor (i = 0, l = items.length; i < l; ++i) {\n\t\t\t\t\titem = items[i];\n\t\t\t\t\tvar topRow = topRows[item.col];\n\t\t\t\t\tif (typeof topRow === 'undefined' || item.row < topRow) {\n\t\t\t\t\t\ttopRows[item.col] = item.row;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// move each item down from the top row in its column to the row\n\t\t\t\tfor (i = 0, l = items.length; i < l; ++i) {\n\t\t\t\t\titem = items[i];\n\t\t\t\t\tvar rowsToMove = newRow - topRows[item.col];\n\t\t\t\t\tthis.moveItemDown(item, item.row + rowsToMove, ignoreItems);\n\t\t\t\t\tignoreItems.push(item);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Moves an item down to a specified row\n\t\t\t *\n\t\t\t * @param {Object} item The item to move\n\t\t\t * @param {Number} newRow The target row\n\t\t\t * @param {Array} ignoreItems\n\t\t\t */\n\t\t\tthis.moveItemDown = function(item, newRow, ignoreItems) {\n\t\t\t\tif (item.row >= newRow) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twhile (item.row < newRow) {\n\t\t\t\t\t++item.row;\n\t\t\t\t\tthis.moveOverlappingItems(item, ignoreItems);\n\t\t\t\t}\n\t\t\t\tthis.putItem(item, item.row, item.col, ignoreItems);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Moves all items up as much as possible\n\t\t\t */\n\t\t\tthis.floatItemsUp = function() {\n\t\t\t\tif (this.floating === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (var rowIndex = 0, l = this.grid.length; rowIndex < l; ++rowIndex) {\n\t\t\t\t\tvar columns = this.grid[rowIndex];\n\t\t\t\t\tif (!columns) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfor (var colIndex = 0, len = columns.length; colIndex < len; ++colIndex) {\n\t\t\t\t\t\tvar item = columns[colIndex];\n\t\t\t\t\t\tif (item) {\n\t\t\t\t\t\t\tthis.floatItemUp(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Float an item up to the most suitable row\n\t\t\t *\n\t\t\t * @param {Object} item The item to move\n\t\t\t */\n\t\t\tthis.floatItemUp = function(item) {\n\t\t\t\tif (this.floating === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar colIndex = item.col,\n\t\t\t\t\tsizeY = item.sizeY,\n\t\t\t\t\tsizeX = item.sizeX,\n\t\t\t\t\tbestRow = null,\n\t\t\t\t\tbestColumn = null,\n\t\t\t\t\trowIndex = item.row - 1;\n\n\t\t\t\twhile (rowIndex > -1) {\n\t\t\t\t\tvar items = this.getItems(rowIndex, colIndex, sizeX, sizeY, item);\n\t\t\t\t\tif (items.length !== 0) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tbestRow = rowIndex;\n\t\t\t\t\tbestColumn = colIndex;\n\t\t\t\t\t--rowIndex;\n\t\t\t\t}\n\t\t\t\tif (bestRow !== null) {\n\t\t\t\t\tthis.putItem(item, bestRow, bestColumn);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Update gridsters height\n\t\t\t *\n\t\t\t * @param {Number} plus (Optional) Additional height to add\n\t\t\t */\n\t\t\tthis.updateHeight = function(plus) {\n\t\t\t\tvar maxHeight = this.minRows;\n\t\t\t\tplus = plus || 0;\n\t\t\t\tfor (var rowIndex = this.grid.length; rowIndex >= 0; --rowIndex) {\n\t\t\t\t\tvar columns = this.grid[rowIndex];\n\t\t\t\t\tif (!columns) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfor (var colIndex = 0, len = columns.length; colIndex < len; ++colIndex) {\n\t\t\t\t\t\tif (columns[colIndex]) {\n\t\t\t\t\t\t\tmaxHeight = Math.max(maxHeight, rowIndex + plus + columns[colIndex].sizeY);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.gridHeight = this.maxRows - maxHeight > 0 ? Math.min(this.maxRows, maxHeight) : Math.max(this.maxRows, maxHeight);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Returns the number of rows that will fit in given amount of pixels\n\t\t\t *\n\t\t\t * @param {Number} pixels\n\t\t\t * @param {Boolean} ceilOrFloor (Optional) Determines rounding method\n\t\t\t */\n\t\t\tthis.pixelsToRows = function(pixels, ceilOrFloor) {\n\t\t\t\tif (!this.outerMargin) {\n\t\t\t\t\tpixels += this.margins[0] / 2;\n\t\t\t\t}\n\n\t\t\t\tif (ceilOrFloor === true) {\n\t\t\t\t\treturn Math.ceil(pixels / this.curRowHeight);\n\t\t\t\t} else if (ceilOrFloor === false) {\n\t\t\t\t\treturn Math.floor(pixels / this.curRowHeight);\n\t\t\t\t}\n\n\t\t\t\treturn Math.round(pixels / this.curRowHeight);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Returns the number of columns that will fit in a given amount of pixels\n\t\t\t *\n\t\t\t * @param {Number} pixels\n\t\t\t * @param {Boolean} ceilOrFloor (Optional) Determines rounding method\n\t\t\t * @returns {Number} The number of columns\n\t\t\t */\n\t\t\tthis.pixelsToColumns = function(pixels, ceilOrFloor) {\n\t\t\t\tif (!this.outerMargin) {\n\t\t\t\t\tpixels += this.margins[1] / 2;\n\t\t\t\t}\n\n\t\t\t\tif (ceilOrFloor === true) {\n\t\t\t\t\treturn Math.ceil(pixels / this.curColWidth);\n\t\t\t\t} else if (ceilOrFloor === false) {\n\t\t\t\t\treturn Math.floor(pixels / this.curColWidth);\n\t\t\t\t}\n\n\t\t\t\treturn Math.round(pixels / this.curColWidth);\n\t\t\t};\n\t\t}\n\t])\n\n\t.directive('gridsterPreview', function() {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tscope: true,\n\t\t\trequire: '^gridster',\n\t\t\ttemplate: '<div ng-style=\"previewStyle()\" class=\"gridster-item gridster-preview-holder\"></div>',\n\t\t\tlink: function(scope, $el, attrs, gridster) {\n\n\t\t\t\t/**\n\t\t\t\t * @returns {Object} style object for preview element\n\t\t\t\t */\n\t\t\t\tscope.previewStyle = function() {\n\t\t\t\t\tif (!gridster.movingItem) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tdisplay: 'none'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\theight: (gridster.movingItem.sizeY * gridster.curRowHeight - gridster.margins[0]) + 'px',\n\t\t\t\t\t\twidth: (gridster.movingItem.sizeX * gridster.curColWidth - gridster.margins[1]) + 'px',\n\t\t\t\t\t\ttop: (gridster.movingItem.row * gridster.curRowHeight + (gridster.outerMargin ? gridster.margins[0] : 0)) + 'px',\n\t\t\t\t\t\tleft: (gridster.movingItem.col * gridster.curColWidth + (gridster.outerMargin ? gridster.margins[1] : 0)) + 'px'\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t})\n\n\t/**\n\t * The gridster directive\n\t *\n\t * @param {Function} $timeout\n\t * @param {Object} $window\n\t * @param {Object} $rootScope\n\t * @param {Function} gridsterDebounce\n\t */\n\t.directive('gridster', ['$timeout', '$window', '$rootScope', 'gridsterDebounce',\n\t\tfunction($timeout, $window, $rootScope, gridsterDebounce) {\n\t\t\treturn {\n\t\t\t\tscope: true,\n\t\t\t\trestrict: 'EAC',\n\t\t\t\tcontroller: 'GridsterCtrl',\n\t\t\t\tcontrollerAs: 'gridster',\n\t\t\t\tcompile: function($tplElem) {\n\n\t\t\t\t\t$tplElem.prepend('<div ng-if=\"gridster.movingItem\" gridster-preview></div>');\n\n\t\t\t\t\treturn function(scope, $elem, attrs, gridster) {\n\t\t\t\t\t\tgridster.loaded = false;\n\n\t\t\t\t\t\tgridster.$element = $elem;\n\n\t\t\t\t\t\tscope.gridster = gridster;\n\n\t\t\t\t\t\t$elem.addClass('gridster');\n\n\t\t\t\t\t\tvar isVisible = function(ele) {\n\t\t\t\t\t\t\treturn ele.style.visibility !== 'hidden' && ele.style.display !== 'none';\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfunction updateHeight() {\n\t\t\t\t\t\t\t$elem.css('height', (gridster.gridHeight * gridster.curRowHeight) + (gridster.outerMargin ? gridster.margins[0] : -gridster.margins[0]) + 'px');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\t\treturn gridster.gridHeight;\n\t\t\t\t\t\t}, updateHeight);\n\n\t\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\t\treturn gridster.movingItem;\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tgridster.updateHeight(gridster.movingItem ? gridster.movingItem.sizeY : 0);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tfunction refresh(config) {\n\t\t\t\t\t\t\tgridster.setOptions(config);\n\n\t\t\t\t\t\t\tif (!isVisible($elem[0])) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// resolve \"auto\" & \"match\" values\n\t\t\t\t\t\t\tif (gridster.width === 'auto') {\n\t\t\t\t\t\t\t\tgridster.curWidth = $elem[0].offsetWidth || parseInt($elem.css('width'), 10);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tgridster.curWidth = gridster.width;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (gridster.colWidth === 'auto') {\n\t\t\t\t\t\t\t\tgridster.curColWidth = (gridster.curWidth + (gridster.outerMargin ? -gridster.margins[1] : gridster.margins[1])) / gridster.columns;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tgridster.curColWidth = gridster.colWidth;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tgridster.curRowHeight = gridster.rowHeight;\n\t\t\t\t\t\t\tif (typeof gridster.rowHeight === 'string') {\n\t\t\t\t\t\t\t\tif (gridster.rowHeight === 'match') {\n\t\t\t\t\t\t\t\t\tgridster.curRowHeight = Math.round(gridster.curColWidth);\n\t\t\t\t\t\t\t\t} else if (gridster.rowHeight.indexOf('*') !== -1) {\n\t\t\t\t\t\t\t\t\tgridster.curRowHeight = Math.round(gridster.curColWidth * gridster.rowHeight.replace('*', '').replace(' ', ''));\n\t\t\t\t\t\t\t\t} else if (gridster.rowHeight.indexOf('/') !== -1) {\n\t\t\t\t\t\t\t\t\tgridster.curRowHeight = Math.round(gridster.curColWidth / gridster.rowHeight.replace('/', '').replace(' ', ''));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tgridster.isMobile = gridster.mobileModeEnabled && gridster.curWidth <= gridster.mobileBreakPoint;\n\n\t\t\t\t\t\t\t// loop through all items and reset their CSS\n\t\t\t\t\t\t\tfor (var rowIndex = 0, l = gridster.grid.length; rowIndex < l; ++rowIndex) {\n\t\t\t\t\t\t\t\tvar columns = gridster.grid[rowIndex];\n\t\t\t\t\t\t\t\tif (!columns) {\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfor (var colIndex = 0, len = columns.length; colIndex < len; ++colIndex) {\n\t\t\t\t\t\t\t\t\tif (columns[colIndex]) {\n\t\t\t\t\t\t\t\t\t\tvar item = columns[colIndex];\n\t\t\t\t\t\t\t\t\t\titem.setElementPosition();\n\t\t\t\t\t\t\t\t\t\titem.setElementSizeY();\n\t\t\t\t\t\t\t\t\t\titem.setElementSizeX();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tupdateHeight();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar optionsKey = attrs.gridster;\n\t\t\t\t\t\tif (optionsKey) {\n\t\t\t\t\t\t\tscope.$parent.$watch(optionsKey, function(newConfig) {\n\t\t\t\t\t\t\t\trefresh(newConfig);\n\t\t\t\t\t\t\t}, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trefresh({});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\t\treturn gridster.loaded;\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tif (gridster.loaded) {\n\t\t\t\t\t\t\t\t$elem.addClass('gridster-loaded');\n\t\t\t\t\t\t\t\t$rootScope.$broadcast('gridster-loaded', gridster);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$elem.removeClass('gridster-loaded');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\t\treturn gridster.isMobile;\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tif (gridster.isMobile) {\n\t\t\t\t\t\t\t\t$elem.addClass('gridster-mobile').removeClass('gridster-desktop');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$elem.removeClass('gridster-mobile').addClass('gridster-desktop');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$rootScope.$broadcast('gridster-mobile-changed', gridster);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\t\treturn gridster.draggable;\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\t$rootScope.$broadcast('gridster-draggable-changed', gridster);\n\t\t\t\t\t\t}, true);\n\n\t\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\t\treturn gridster.resizable;\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\t$rootScope.$broadcast('gridster-resizable-changed', gridster);\n\t\t\t\t\t\t}, true);\n\n\t\t\t\t\t\tvar prevWidth = $elem[0].offsetWidth || parseInt($elem.css('width'), 10);\n\n\t\t\t\t\t\tvar resize = function() {\n\t\t\t\t\t\t\tvar width = $elem[0].offsetWidth || parseInt($elem.css('width'), 10);\n\n\t\t\t\t\t\t\tif (!width || width === prevWidth || gridster.movingItem) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprevWidth = width;\n\n\t\t\t\t\t\t\tif (gridster.loaded) {\n\t\t\t\t\t\t\t\t$elem.removeClass('gridster-loaded');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trefresh();\n\n\t\t\t\t\t\t\tif (gridster.loaded) {\n\t\t\t\t\t\t\t\t$elem.addClass('gridster-loaded');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$rootScope.$broadcast('gridster-resized', [width, $elem[0].offsetHeight], gridster);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// track element width changes any way we can\n\t\t\t\t\t\tvar onResize = gridsterDebounce(function onResize() {\n\t\t\t\t\t\t\tresize();\n\t\t\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 100);\n\n\t\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\t\treturn isVisible($elem[0]);\n\t\t\t\t\t\t}, onResize);\n\n\t\t\t\t\t\t// see https://github.com/sdecima/javascript-detect-element-resize\n\t\t\t\t\t\tif (typeof window.addResizeListener === 'function') {\n\t\t\t\t\t\t\twindow.addResizeListener($elem[0], onResize);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\t\t\treturn $elem[0].offsetWidth || parseInt($elem.css('width'), 10);\n\t\t\t\t\t\t\t}, resize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar $win = angular.element($window);\n\t\t\t\t\t\t$win.on('resize', onResize);\n\n\t\t\t\t\t\t// be sure to cleanup\n\t\t\t\t\t\tscope.$on('$destroy', function() {\n\t\t\t\t\t\t\tgridster.destroy();\n\t\t\t\t\t\t\t$win.off('resize', onResize);\n\t\t\t\t\t\t\tif (typeof window.removeResizeListener === 'function') {\n\t\t\t\t\t\t\t\twindow.removeResizeListener($elem[0], onResize);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// allow a little time to place items before floating up\n\t\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t\tscope.$watch('gridster.floating', function() {\n\t\t\t\t\t\t\t\tgridster.floatItemsUp();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tgridster.loaded = true;\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t])\n\n\t.controller('GridsterItemCtrl', function() {\n\t\tthis.$element = null;\n\t\tthis.gridster = null;\n\t\tthis.row = null;\n\t\tthis.col = null;\n\t\tthis.sizeX = null;\n\t\tthis.sizeY = null;\n\t\tthis.minSizeX = 0;\n\t\tthis.minSizeY = 0;\n\t\tthis.maxSizeX = null;\n\t\tthis.maxSizeY = null;\n\n\t\tthis.init = function($element, gridster) {\n\t\t\tthis.$element = $element;\n\t\t\tthis.gridster = gridster;\n\t\t\tthis.sizeX = gridster.defaultSizeX;\n\t\t\tthis.sizeY = gridster.defaultSizeY;\n\t\t};\n\n\t\tthis.destroy = function() {\n\t\t\t// set these to null to avoid the possibility of circular references\n\t\t\tthis.gridster = null;\n\t\t\tthis.$element = null;\n\t\t};\n\n\t\t/**\n\t\t * Returns the items most important attributes\n\t\t */\n\t\tthis.toJSON = function() {\n\t\t\treturn {\n\t\t\t\trow: this.row,\n\t\t\t\tcol: this.col,\n\t\t\t\tsizeY: this.sizeY,\n\t\t\t\tsizeX: this.sizeX\n\t\t\t};\n\t\t};\n\n\t\tthis.isMoving = function() {\n\t\t\treturn this.gridster.movingItem === this;\n\t\t};\n\n\t\t/**\n\t\t * Set the items position\n\t\t *\n\t\t * @param {Number} row\n\t\t * @param {Number} column\n\t\t */\n\t\tthis.setPosition = function(row, column) {\n\t\t\tthis.gridster.putItem(this, row, column);\n\n\t\t\tif (!this.isMoving()) {\n\t\t\t\tthis.setElementPosition();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Sets a specified size property\n\t\t *\n\t\t * @param {String} key Can be either \"x\" or \"y\"\n\t\t * @param {Number} value The size amount\n\t\t * @param {Boolean} preventMove\n\t\t */\n\t\tthis.setSize = function(key, value, preventMove) {\n\t\t\tkey = key.toUpperCase();\n\t\t\tvar camelCase = 'size' + key,\n\t\t\t\ttitleCase = 'Size' + key;\n\t\t\tif (value === '') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvalue = parseInt(value, 10);\n\t\t\tif (isNaN(value) || value === 0) {\n\t\t\t\tvalue = this.gridster['default' + titleCase];\n\t\t\t}\n\t\t\tvar max = key === 'X' ? this.gridster.columns : this.gridster.maxRows;\n\t\t\tif (this['max' + titleCase]) {\n\t\t\t\tmax = Math.min(this['max' + titleCase], max);\n\t\t\t}\n\t\t\tif (this.gridster['max' + titleCase]) {\n\t\t\t\tmax = Math.min(this.gridster['max' + titleCase], max);\n\t\t\t}\n\t\t\tif (key === 'X' && this.cols) {\n\t\t\t\tmax -= this.cols;\n\t\t\t} else if (key === 'Y' && this.rows) {\n\t\t\t\tmax -= this.rows;\n\t\t\t}\n\n\t\t\tvar min = 0;\n\t\t\tif (this['min' + titleCase]) {\n\t\t\t\tmin = Math.max(this['min' + titleCase], min);\n\t\t\t}\n\t\t\tif (this.gridster['min' + titleCase]) {\n\t\t\t\tmin = Math.max(this.gridster['min' + titleCase], min);\n\t\t\t}\n\n\t\t\tvalue = Math.max(Math.min(value, max), min);\n\n\t\t\tvar changed = (this[camelCase] !== value || (this['old' + titleCase] && this['old' + titleCase] !== value));\n\t\t\tthis['old' + titleCase] = this[camelCase] = value;\n\n\t\t\tif (!this.isMoving()) {\n\t\t\t\tthis['setElement' + titleCase]();\n\t\t\t}\n\t\t\tif (!preventMove && changed) {\n\t\t\t\tthis.gridster.moveOverlappingItems(this);\n\t\t\t\tthis.gridster.layoutChanged();\n\t\t\t}\n\n\t\t\treturn changed;\n\t\t};\n\n\t\t/**\n\t\t * Sets the items sizeY property\n\t\t *\n\t\t * @param {Number} rows\n\t\t * @param {Boolean} preventMove\n\t\t */\n\t\tthis.setSizeY = function(rows, preventMove) {\n\t\t\treturn this.setSize('Y', rows, preventMove);\n\t\t};\n\n\t\t/**\n\t\t * Sets the items sizeX property\n\t\t *\n\t\t * @param {Number} columns\n\t\t * @param {Boolean} preventMove\n\t\t */\n\t\tthis.setSizeX = function(columns, preventMove) {\n\t\t\treturn this.setSize('X', columns, preventMove);\n\t\t};\n\n\t\t/**\n\t\t * Sets an elements position on the page\n\t\t */\n\t\tthis.setElementPosition = function() {\n\t\t\tif (this.gridster.isMobile) {\n\t\t\t\tthis.$element.css({\n\t\t\t\t\tmarginLeft: this.gridster.margins[0] + 'px',\n\t\t\t\t\tmarginRight: this.gridster.margins[0] + 'px',\n\t\t\t\t\tmarginTop: this.gridster.margins[1] + 'px',\n\t\t\t\t\tmarginBottom: this.gridster.margins[1] + 'px',\n\t\t\t\t\ttop: '',\n\t\t\t\t\tleft: ''\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.$element.css({\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\ttop: (this.row * this.gridster.curRowHeight + (this.gridster.outerMargin ? this.gridster.margins[0] : 0)) + 'px',\n\t\t\t\t\tleft: (this.col * this.gridster.curColWidth + (this.gridster.outerMargin ? this.gridster.margins[1] : 0)) + 'px'\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Sets an elements height\n\t\t */\n\t\tthis.setElementSizeY = function() {\n\t\t\tif (this.gridster.isMobile && !this.gridster.saveGridItemCalculatedHeightInMobile) {\n\t\t\t\tthis.$element.css('height', '');\n\t\t\t} else {\n\t\t\t\tthis.$element.css('height', (this.sizeY * this.gridster.curRowHeight - this.gridster.margins[0]) + 'px');\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Sets an elements width\n\t\t */\n\t\tthis.setElementSizeX = function() {\n\t\t\tif (this.gridster.isMobile) {\n\t\t\t\tthis.$element.css('width', '');\n\t\t\t} else {\n\t\t\t\tthis.$element.css('width', (this.sizeX * this.gridster.curColWidth - this.gridster.margins[1]) + 'px');\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Gets an element's width\n\t\t */\n\t\tthis.getElementSizeX = function() {\n\t\t\treturn (this.sizeX * this.gridster.curColWidth - this.gridster.margins[1]);\n\t\t};\n\n\t\t/**\n\t\t * Gets an element's height\n\t\t */\n\t\tthis.getElementSizeY = function() {\n\t\t\treturn (this.sizeY * this.gridster.curRowHeight - this.gridster.margins[0]);\n\t\t};\n\n\t})\n\n\t.factory('GridsterTouch', [function() {\n\t\treturn function GridsterTouch(target, startEvent, moveEvent, endEvent) {\n\t\t\tvar lastXYById = {};\n\n\t\t\t//  Opera doesn't have Object.keys so we use this wrapper\n\t\t\tvar numberOfKeys = function(theObject) {\n\t\t\t\tif (Object.keys) {\n\t\t\t\t\treturn Object.keys(theObject).length;\n\t\t\t\t}\n\n\t\t\t\tvar n = 0,\n\t\t\t\t\tkey;\n\t\t\t\tfor (key in theObject) {\n\t\t\t\t\t++n;\n\t\t\t\t}\n\n\t\t\t\treturn n;\n\t\t\t};\n\n\t\t\t//  this calculates the delta needed to convert pageX/Y to offsetX/Y because offsetX/Y don't exist in the TouchEvent object or in Firefox's MouseEvent object\n\t\t\tvar computeDocumentToElementDelta = function(theElement) {\n\t\t\t\tvar elementLeft = 0;\n\t\t\t\tvar elementTop = 0;\n\t\t\t\tvar oldIEUserAgent = navigator.userAgent.match(/\\bMSIE\\b/);\n\n\t\t\t\tfor (var offsetElement = theElement; offsetElement != null; offsetElement = offsetElement.offsetParent) {\n\t\t\t\t\t//  the following is a major hack for versions of IE less than 8 to avoid an apparent problem on the IEBlog with double-counting the offsets\n\t\t\t\t\t//  this may not be a general solution to IE7's problem with offsetLeft/offsetParent\n\t\t\t\t\tif (oldIEUserAgent &&\n\t\t\t\t\t\t(!document.documentMode || document.documentMode < 8) &&\n\t\t\t\t\t\toffsetElement.currentStyle.position === 'relative' && offsetElement.offsetParent && offsetElement.offsetParent.currentStyle.position === 'relative' && offsetElement.offsetLeft === offsetElement.offsetParent.offsetLeft) {\n\t\t\t\t\t\t// add only the top\n\t\t\t\t\t\telementTop += offsetElement.offsetTop;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telementLeft += offsetElement.offsetLeft;\n\t\t\t\t\t\telementTop += offsetElement.offsetTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tx: elementLeft,\n\t\t\t\t\ty: elementTop\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t//  cache the delta from the document to our event target (reinitialized each mousedown/MSPointerDown/touchstart)\n\t\t\tvar documentToTargetDelta = computeDocumentToElementDelta(target);\n\t\t\tvar useSetReleaseCapture = false;\n\n\t\t\t//  common event handler for the mouse/pointer/touch models and their down/start, move, up/end, and cancel events\n\t\t\tvar doEvent = function(theEvtObj) {\n\n\t\t\t\tif (theEvtObj.type === 'mousemove' && numberOfKeys(lastXYById) === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar prevent = true;\n\n\t\t\t\tvar pointerList = theEvtObj.changedTouches ? theEvtObj.changedTouches : [theEvtObj];\n\t\t\t\tfor (var i = 0; i < pointerList.length; ++i) {\n\t\t\t\t\tvar pointerObj = pointerList[i];\n\t\t\t\t\tvar pointerId = (typeof pointerObj.identifier !== 'undefined') ? pointerObj.identifier : (typeof pointerObj.pointerId !== 'undefined') ? pointerObj.pointerId : 1;\n\n\t\t\t\t\t//  use the pageX/Y coordinates to compute target-relative coordinates when we have them (in ie < 9, we need to do a little work to put them there)\n\t\t\t\t\tif (typeof pointerObj.pageX === 'undefined') {\n\t\t\t\t\t\t//  initialize assuming our source element is our target\n\t\t\t\t\t\tpointerObj.pageX = pointerObj.offsetX + documentToTargetDelta.x;\n\t\t\t\t\t\tpointerObj.pageY = pointerObj.offsetY + documentToTargetDelta.y;\n\n\t\t\t\t\t\tif (pointerObj.srcElement.offsetParent === target && document.documentMode && document.documentMode === 8 && pointerObj.type === 'mousedown') {\n\t\t\t\t\t\t\t//  source element is a child piece of VML, we're in IE8, and we've not called setCapture yet - add the origin of the source element\n\t\t\t\t\t\t\tpointerObj.pageX += pointerObj.srcElement.offsetLeft;\n\t\t\t\t\t\t\tpointerObj.pageY += pointerObj.srcElement.offsetTop;\n\t\t\t\t\t\t} else if (pointerObj.srcElement !== target && !document.documentMode || document.documentMode < 8) {\n\t\t\t\t\t\t\t//  source element isn't the target (most likely it's a child piece of VML) and we're in a version of IE before IE8 -\n\t\t\t\t\t\t\t//  the offsetX/Y values are unpredictable so use the clientX/Y values and adjust by the scroll offsets of its parents\n\t\t\t\t\t\t\t//  to get the document-relative coordinates (the same as pageX/Y)\n\t\t\t\t\t\t\tvar sx = -2,\n\t\t\t\t\t\t\t\tsy = -2; // adjust for old IE's 2-pixel border\n\t\t\t\t\t\t\tfor (var scrollElement = pointerObj.srcElement; scrollElement !== null; scrollElement = scrollElement.parentNode) {\n\t\t\t\t\t\t\t\tsx += scrollElement.scrollLeft ? scrollElement.scrollLeft : 0;\n\t\t\t\t\t\t\t\tsy += scrollElement.scrollTop ? scrollElement.scrollTop : 0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpointerObj.pageX = pointerObj.clientX + sx;\n\t\t\t\t\t\t\tpointerObj.pageY = pointerObj.clientY + sy;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t\tvar pageX = pointerObj.pageX;\n\t\t\t\t\tvar pageY = pointerObj.pageY;\n\n\t\t\t\t\tif (theEvtObj.type.match(/(start|down)$/i)) {\n\t\t\t\t\t\t//  clause for processing MSPointerDown, touchstart, and mousedown\n\n\t\t\t\t\t\t//  refresh the document-to-target delta on start in case the target has moved relative to document\n\t\t\t\t\t\tdocumentToTargetDelta = computeDocumentToElementDelta(target);\n\n\t\t\t\t\t\t//  protect against failing to get an up or end on this pointerId\n\t\t\t\t\t\tif (lastXYById[pointerId]) {\n\t\t\t\t\t\t\tif (endEvent) {\n\t\t\t\t\t\t\t\tendEvent({\n\t\t\t\t\t\t\t\t\ttarget: theEvtObj.target,\n\t\t\t\t\t\t\t\t\twhich: theEvtObj.which,\n\t\t\t\t\t\t\t\t\tpointerId: pointerId,\n\t\t\t\t\t\t\t\t\tpageX: pageX,\n\t\t\t\t\t\t\t\t\tpageY: pageY\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdelete lastXYById[pointerId];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (startEvent) {\n\t\t\t\t\t\t\tif (prevent) {\n\t\t\t\t\t\t\t\tprevent = startEvent({\n\t\t\t\t\t\t\t\t\ttarget: theEvtObj.target,\n\t\t\t\t\t\t\t\t\twhich: theEvtObj.which,\n\t\t\t\t\t\t\t\t\tpointerId: pointerId,\n\t\t\t\t\t\t\t\t\tpageX: pageX,\n\t\t\t\t\t\t\t\t\tpageY: pageY\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//  init last page positions for this pointer\n\t\t\t\t\t\tlastXYById[pointerId] = {\n\t\t\t\t\t\t\tx: pageX,\n\t\t\t\t\t\t\ty: pageY\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// IE pointer model\n\t\t\t\t\t\tif (target.msSetPointerCapture && prevent) {\n\t\t\t\t\t\t\ttarget.msSetPointerCapture(pointerId);\n\t\t\t\t\t\t} else if (theEvtObj.type === 'mousedown' && numberOfKeys(lastXYById) === 1) {\n\t\t\t\t\t\t\tif (useSetReleaseCapture) {\n\t\t\t\t\t\t\t\ttarget.setCapture(true);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdocument.addEventListener('mousemove', doEvent, false);\n\t\t\t\t\t\t\t\tdocument.addEventListener('mouseup', doEvent, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (theEvtObj.type.match(/move$/i)) {\n\t\t\t\t\t\t//  clause handles mousemove, MSPointerMove, and touchmove\n\n\t\t\t\t\t\tif (lastXYById[pointerId] && !(lastXYById[pointerId].x === pageX && lastXYById[pointerId].y === pageY)) {\n\t\t\t\t\t\t\t//  only extend if the pointer is down and it's not the same as the last point\n\n\t\t\t\t\t\t\tif (moveEvent && prevent) {\n\t\t\t\t\t\t\t\tprevent = moveEvent({\n\t\t\t\t\t\t\t\t\ttarget: theEvtObj.target,\n\t\t\t\t\t\t\t\t\twhich: theEvtObj.which,\n\t\t\t\t\t\t\t\t\tpointerId: pointerId,\n\t\t\t\t\t\t\t\t\tpageX: pageX,\n\t\t\t\t\t\t\t\t\tpageY: pageY\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//  update last page positions for this pointer\n\t\t\t\t\t\t\tlastXYById[pointerId].x = pageX;\n\t\t\t\t\t\t\tlastXYById[pointerId].y = pageY;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (lastXYById[pointerId] && theEvtObj.type.match(/(up|end|cancel)$/i)) {\n\t\t\t\t\t\t//  clause handles up/end/cancel\n\n\t\t\t\t\t\tif (endEvent && prevent) {\n\t\t\t\t\t\t\tprevent = endEvent({\n\t\t\t\t\t\t\t\ttarget: theEvtObj.target,\n\t\t\t\t\t\t\t\twhich: theEvtObj.which,\n\t\t\t\t\t\t\t\tpointerId: pointerId,\n\t\t\t\t\t\t\t\tpageX: pageX,\n\t\t\t\t\t\t\t\tpageY: pageY\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//  delete last page positions for this pointer\n\t\t\t\t\t\tdelete lastXYById[pointerId];\n\n\t\t\t\t\t\t//  in the Microsoft pointer model, release the capture for this pointer\n\t\t\t\t\t\t//  in the mouse model, release the capture or remove document-level event handlers if there are no down points\n\t\t\t\t\t\t//  nothing is required for the iOS touch model because capture is implied on touchstart\n\t\t\t\t\t\tif (target.msReleasePointerCapture) {\n\t\t\t\t\t\t\ttarget.msReleasePointerCapture(pointerId);\n\t\t\t\t\t\t} else if (theEvtObj.type === 'mouseup' && numberOfKeys(lastXYById) === 0) {\n\t\t\t\t\t\t\tif (useSetReleaseCapture) {\n\t\t\t\t\t\t\t\ttarget.releaseCapture();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdocument.removeEventListener('mousemove', doEvent, false);\n\t\t\t\t\t\t\t\tdocument.removeEventListener('mouseup', doEvent, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (prevent) {\n\t\t\t\t\tif (theEvtObj.preventDefault) {\n\t\t\t\t\t\ttheEvtObj.preventDefault();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (theEvtObj.preventManipulation) {\n\t\t\t\t\t\ttheEvtObj.preventManipulation();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (theEvtObj.preventMouseEvent) {\n\t\t\t\t\t\ttheEvtObj.preventMouseEvent();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// saving the settings for contentZooming and touchaction before activation\n\t\t\tvar contentZooming, msTouchAction;\n\n\t\t\tthis.enable = function() {\n\n\t\t\t\tif (window.navigator.msPointerEnabled) {\n\t\t\t\t\t//  Microsoft pointer model\n\t\t\t\t\ttarget.addEventListener('MSPointerDown', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('MSPointerMove', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('MSPointerUp', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('MSPointerCancel', doEvent, false);\n\n\t\t\t\t\t//  css way to prevent panning in our target area\n\t\t\t\t\tif (typeof target.style.msContentZooming !== 'undefined') {\n\t\t\t\t\t\tcontentZooming = target.style.msContentZooming;\n\t\t\t\t\t\ttarget.style.msContentZooming = 'none';\n\t\t\t\t\t}\n\n\t\t\t\t\t//  new in Windows Consumer Preview: css way to prevent all built-in touch actions on our target\n\t\t\t\t\t//  without this, you cannot touch draw on the element because IE will intercept the touch events\n\t\t\t\t\tif (typeof target.style.msTouchAction !== 'undefined') {\n\t\t\t\t\t\tmsTouchAction = target.style.msTouchAction;\n\t\t\t\t\t\ttarget.style.msTouchAction = 'none';\n\t\t\t\t\t}\n\t\t\t\t} else if (target.addEventListener) {\n\t\t\t\t\t//  iOS touch model\n\t\t\t\t\ttarget.addEventListener('touchstart', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('touchmove', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('touchend', doEvent, false);\n\t\t\t\t\ttarget.addEventListener('touchcancel', doEvent, false);\n\n\t\t\t\t\t//  mouse model\n\t\t\t\t\ttarget.addEventListener('mousedown', doEvent, false);\n\n\t\t\t\t\t//  mouse model with capture\n\t\t\t\t\t//  rejecting gecko because, unlike ie, firefox does not send events to target when the mouse is outside target\n\t\t\t\t\tif (target.setCapture && !window.navigator.userAgent.match(/\\bGecko\\b/)) {\n\t\t\t\t\t\tuseSetReleaseCapture = true;\n\n\t\t\t\t\t\ttarget.addEventListener('mousemove', doEvent, false);\n\t\t\t\t\t\ttarget.addEventListener('mouseup', doEvent, false);\n\t\t\t\t\t}\n\t\t\t\t} else if (target.attachEvent && target.setCapture) {\n\t\t\t\t\t//  legacy IE mode - mouse with capture\n\t\t\t\t\tuseSetReleaseCapture = true;\n\t\t\t\t\ttarget.attachEvent('onmousedown', function() {\n\t\t\t\t\t\tdoEvent(window.event);\n\t\t\t\t\t\twindow.event.returnValue = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t\ttarget.attachEvent('onmousemove', function() {\n\t\t\t\t\t\tdoEvent(window.event);\n\t\t\t\t\t\twindow.event.returnValue = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t\ttarget.attachEvent('onmouseup', function() {\n\t\t\t\t\t\tdoEvent(window.event);\n\t\t\t\t\t\twindow.event.returnValue = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.disable = function() {\n\t\t\t\tif (window.navigator.msPointerEnabled) {\n\t\t\t\t\t//  Microsoft pointer model\n\t\t\t\t\ttarget.removeEventListener('MSPointerDown', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('MSPointerMove', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('MSPointerUp', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('MSPointerCancel', doEvent, false);\n\n\t\t\t\t\t//  reset zooming to saved value\n\t\t\t\t\tif (contentZooming) {\n\t\t\t\t\t\ttarget.style.msContentZooming = contentZooming;\n\t\t\t\t\t}\n\n\t\t\t\t\t// reset touch action setting\n\t\t\t\t\tif (msTouchAction) {\n\t\t\t\t\t\ttarget.style.msTouchAction = msTouchAction;\n\t\t\t\t\t}\n\t\t\t\t} else if (target.removeEventListener) {\n\t\t\t\t\t//  iOS touch model\n\t\t\t\t\ttarget.removeEventListener('touchstart', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('touchmove', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('touchend', doEvent, false);\n\t\t\t\t\ttarget.removeEventListener('touchcancel', doEvent, false);\n\n\t\t\t\t\t//  mouse model\n\t\t\t\t\ttarget.removeEventListener('mousedown', doEvent, false);\n\n\t\t\t\t\t//  mouse model with capture\n\t\t\t\t\t//  rejecting gecko because, unlike ie, firefox does not send events to target when the mouse is outside target\n\t\t\t\t\tif (target.setCapture && !window.navigator.userAgent.match(/\\bGecko\\b/)) {\n\t\t\t\t\t\tuseSetReleaseCapture = true;\n\n\t\t\t\t\t\ttarget.removeEventListener('mousemove', doEvent, false);\n\t\t\t\t\t\ttarget.removeEventListener('mouseup', doEvent, false);\n\t\t\t\t\t}\n\t\t\t\t} else if (target.detachEvent && target.setCapture) {\n\t\t\t\t\t//  legacy IE mode - mouse with capture\n\t\t\t\t\tuseSetReleaseCapture = true;\n\t\t\t\t\ttarget.detachEvent('onmousedown');\n\t\t\t\t\ttarget.detachEvent('onmousemove');\n\t\t\t\t\ttarget.detachEvent('onmouseup');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn this;\n\t\t};\n\t}])\n\n\t.factory('GridsterDraggable', ['$document', '$window', 'GridsterTouch',\n\t\tfunction($document, $window, GridsterTouch) {\n\t\t\tfunction GridsterDraggable($el, scope, gridster, item, itemOptions) {\n\n\t\t\t\tvar elmX, elmY, elmW, elmH,\n\n\t\t\t\t\tmouseX = 0,\n\t\t\t\t\tmouseY = 0,\n\t\t\t\t\tlastMouseX = 0,\n\t\t\t\t\tlastMouseY = 0,\n\t\t\t\t\tmOffX = 0,\n\t\t\t\t\tmOffY = 0,\n\n\t\t\t\t\tminTop = 0,\n\t\t\t\t\tminLeft = 0,\n\t\t\t\t\trealdocument = $document[0];\n\n\t\t\t\tvar originalCol, originalRow;\n\t\t\t\tvar inputTags = ['select', 'option', 'input', 'textarea', 'button'];\n\n\t\t\t\tfunction dragStart(event) {\n\t\t\t\t\t$el.addClass('gridster-item-moving');\n\t\t\t\t\tgridster.movingItem = item;\n\n\t\t\t\t\tgridster.updateHeight(item.sizeY);\n\t\t\t\t\tscope.$apply(function() {\n\t\t\t\t\t\tif (gridster.draggable && gridster.draggable.start) {\n\t\t\t\t\t\t\tgridster.draggable.start(event, $el, itemOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction drag(event) {\n\t\t\t\t\tvar oldRow = item.row,\n\t\t\t\t\t\toldCol = item.col,\n\t\t\t\t\t\thasCallback = gridster.draggable && gridster.draggable.drag,\n\t\t\t\t\t\tscrollSensitivity = gridster.draggable.scrollSensitivity,\n\t\t\t\t\t\tscrollSpeed = gridster.draggable.scrollSpeed;\n\n\t\t\t\t\tvar row = Math.min(gridster.pixelsToRows(elmY), gridster.maxRows - 1);\n\t\t\t\t\tvar col = Math.min(gridster.pixelsToColumns(elmX), gridster.columns - 1);\n\n\t\t\t\t\tvar itemsInTheWay = gridster.getItems(row, col, item.sizeX, item.sizeY, item);\n\t\t\t\t\tvar hasItemsInTheWay = itemsInTheWay.length !== 0;\n\n\t\t\t\t\tif (gridster.swapping === true && hasItemsInTheWay) {\n\t\t\t\t\t\tvar boundingBoxItem = gridster.getBoundingBox(itemsInTheWay),\n\t\t\t\t\t\t\tsameSize = boundingBoxItem.sizeX === item.sizeX && boundingBoxItem.sizeY === item.sizeY,\n\t\t\t\t\t\t\tsameRow = boundingBoxItem.row === oldRow,\n\t\t\t\t\t\t\tsameCol = boundingBoxItem.col === oldCol,\n\t\t\t\t\t\t\tsamePosition = boundingBoxItem.row === row && boundingBoxItem.col === col,\n\t\t\t\t\t\t\tinline = sameRow || sameCol;\n\n\t\t\t\t\t\tif (sameSize && itemsInTheWay.length === 1) {\n\t\t\t\t\t\t\tif (samePosition) {\n\t\t\t\t\t\t\t\tgridster.swapItems(item, itemsInTheWay[0]);\n\t\t\t\t\t\t\t} else if (inline) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (boundingBoxItem.sizeX <= item.sizeX && boundingBoxItem.sizeY <= item.sizeY && inline) {\n\t\t\t\t\t\t\tvar emptyRow = item.row <= row ? item.row : row + item.sizeY,\n\t\t\t\t\t\t\t\temptyCol = item.col <= col ? item.col : col + item.sizeX,\n\t\t\t\t\t\t\t\trowOffset = emptyRow - boundingBoxItem.row,\n\t\t\t\t\t\t\t\tcolOffset = emptyCol - boundingBoxItem.col;\n\n\t\t\t\t\t\t\tfor (var i = 0, l = itemsInTheWay.length; i < l; ++i) {\n\t\t\t\t\t\t\t\tvar itemInTheWay = itemsInTheWay[i];\n\n\t\t\t\t\t\t\t\tvar itemsInFreeSpace = gridster.getItems(\n\t\t\t\t\t\t\t\t\titemInTheWay.row + rowOffset,\n\t\t\t\t\t\t\t\t\titemInTheWay.col + colOffset,\n\t\t\t\t\t\t\t\t\titemInTheWay.sizeX,\n\t\t\t\t\t\t\t\t\titemInTheWay.sizeY,\n\t\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tif (itemsInFreeSpace.length === 0) {\n\t\t\t\t\t\t\t\t\tgridster.putItem(itemInTheWay, itemInTheWay.row + rowOffset, itemInTheWay.col + colOffset);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (gridster.pushing !== false || !hasItemsInTheWay) {\n\t\t\t\t\t\titem.row = row;\n\t\t\t\t\t\titem.col = col;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (event.pageY - realdocument.body.scrollTop < scrollSensitivity) {\n\t\t\t\t\t\trealdocument.body.scrollTop = realdocument.body.scrollTop - scrollSpeed;\n\t\t\t\t\t} else if ($window.innerHeight - (event.pageY - realdocument.body.scrollTop) < scrollSensitivity) {\n\t\t\t\t\t\trealdocument.body.scrollTop = realdocument.body.scrollTop + scrollSpeed;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (event.pageX - realdocument.body.scrollLeft < scrollSensitivity) {\n\t\t\t\t\t\trealdocument.body.scrollLeft = realdocument.body.scrollLeft - scrollSpeed;\n\t\t\t\t\t} else if ($window.innerWidth - (event.pageX - realdocument.body.scrollLeft) < scrollSensitivity) {\n\t\t\t\t\t\trealdocument.body.scrollLeft = realdocument.body.scrollLeft + scrollSpeed;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (hasCallback || oldRow !== item.row || oldCol !== item.col) {\n\t\t\t\t\t\tscope.$apply(function() {\n\t\t\t\t\t\t\tif (hasCallback) {\n\t\t\t\t\t\t\t\tgridster.draggable.drag(event, $el, itemOptions);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction dragStop(event) {\n\t\t\t\t\t$el.removeClass('gridster-item-moving');\n\t\t\t\t\tvar row = Math.min(gridster.pixelsToRows(elmY), gridster.maxRows - 1);\n\t\t\t\t\tvar col = Math.min(gridster.pixelsToColumns(elmX), gridster.columns - 1);\n\t\t\t\t\tif (gridster.pushing !== false || gridster.getItems(row, col, item.sizeX, item.sizeY, item).length === 0) {\n\t\t\t\t\t\titem.row = row;\n\t\t\t\t\t\titem.col = col;\n\t\t\t\t\t}\n\t\t\t\t\tgridster.movingItem = null;\n\t\t\t\t\titem.setPosition(item.row, item.col);\n\n\t\t\t\t\tscope.$apply(function() {\n\t\t\t\t\t\tif (gridster.draggable && gridster.draggable.stop) {\n\t\t\t\t\t\t\tgridster.draggable.stop(event, $el, itemOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction mouseDown(e) {\n\t\t\t\t\tif (inputTags.indexOf(e.target.nodeName.toLowerCase()) !== -1) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar $target = angular.element(e.target);\n\n\t\t\t\t\t// exit, if a resize handle was hit\n\t\t\t\t\tif ($target.hasClass('gridster-item-resizable-handler')) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// exit, if the target has it's own click event\n\t\t\t\t\tif ($target.attr('onclick') || $target.attr('ng-click')) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// only works if you have jQuery\n\t\t\t\t\tif ($target.closest && $target.closest('.gridster-no-drag').length) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// apply drag handle filter\n\t\t\t\t\tif (gridster.draggable && gridster.draggable.handle) {\n\t\t\t\t\t\tvar $dragHandles = angular.element($el[0].querySelectorAll(gridster.draggable.handle));\n\t\t\t\t\t\tvar match = false;\n\t\t\t\t\t\touterloop:\n\t\t\t\t\t\t\tfor (var h = 0, hl = $dragHandles.length; h < hl; ++h) {\n\t\t\t\t\t\t\t\tvar handle = $dragHandles[h];\n\t\t\t\t\t\t\t\tif (handle === e.target) {\n\t\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar target = e.target;\n\t\t\t\t\t\t\t\tfor (var p = 0; p < 20; ++p) {\n\t\t\t\t\t\t\t\t\tvar parent = target.parentNode;\n\t\t\t\t\t\t\t\t\tif (parent === $el[0] || !parent) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (parent === handle) {\n\t\t\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t\t\t\tbreak outerloop;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttarget = parent;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch (e.which) {\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t// left mouse button\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t// right or middle mouse button\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlastMouseX = e.pageX;\n\t\t\t\t\tlastMouseY = e.pageY;\n\n\t\t\t\t\telmX = parseInt($el.css('left'), 10);\n\t\t\t\t\telmY = parseInt($el.css('top'), 10);\n\t\t\t\t\telmW = $el[0].offsetWidth;\n\t\t\t\t\telmH = $el[0].offsetHeight;\n\n\t\t\t\t\toriginalCol = item.col;\n\t\t\t\t\toriginalRow = item.row;\n\n\t\t\t\t\tdragStart(e);\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tfunction mouseMove(e) {\n\t\t\t\t\tif (!$el.hasClass('gridster-item-moving') || $el.hasClass('gridster-item-resizing')) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar maxLeft = gridster.curWidth - 1;\n\t\t\t\t\tvar maxTop = gridster.curRowHeight * gridster.maxRows - 1;\n\n\t\t\t\t\t// Get the current mouse position.\n\t\t\t\t\tmouseX = e.pageX;\n\t\t\t\t\tmouseY = e.pageY;\n\n\t\t\t\t\t// Get the deltas\n\t\t\t\t\tvar diffX = mouseX - lastMouseX + mOffX;\n\t\t\t\t\tvar diffY = mouseY - lastMouseY + mOffY;\n\t\t\t\t\tmOffX = mOffY = 0;\n\n\t\t\t\t\t// Update last processed mouse positions.\n\t\t\t\t\tlastMouseX = mouseX;\n\t\t\t\t\tlastMouseY = mouseY;\n\n\t\t\t\t\tvar dX = diffX,\n\t\t\t\t\t\tdY = diffY;\n\t\t\t\t\tif (elmX + dX < minLeft) {\n\t\t\t\t\t\tdiffX = minLeft - elmX;\n\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t} else if (elmX + elmW + dX > maxLeft) {\n\t\t\t\t\t\tdiffX = maxLeft - elmX - elmW;\n\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (elmY + dY < minTop) {\n\t\t\t\t\t\tdiffY = minTop - elmY;\n\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t} else if (elmY + elmH + dY > maxTop) {\n\t\t\t\t\t\tdiffY = maxTop - elmY - elmH;\n\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t}\n\t\t\t\t\telmX += diffX;\n\t\t\t\t\telmY += diffY;\n\n\t\t\t\t\t// set new position\n\t\t\t\t\t$el.css({\n\t\t\t\t\t\t'top': elmY + 'px',\n\t\t\t\t\t\t'left': elmX + 'px'\n\t\t\t\t\t});\n\n\t\t\t\t\tdrag(e);\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tfunction mouseUp(e) {\n\t\t\t\t\tif (!$el.hasClass('gridster-item-moving') || $el.hasClass('gridster-item-resizing')) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tmOffX = mOffY = 0;\n\n\t\t\t\t\tdragStop(e);\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tvar enabled = null;\n\t\t\t\tvar gridsterTouch = null;\n\n\t\t\t\tthis.enable = function() {\n\t\t\t\t\tif (enabled === true) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tenabled = true;\n\n\t\t\t\t\tif (gridsterTouch) {\n\t\t\t\t\t\tgridsterTouch.enable();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tgridsterTouch = new GridsterTouch($el[0], mouseDown, mouseMove, mouseUp);\n\t\t\t\t\tgridsterTouch.enable();\n\t\t\t\t};\n\n\t\t\t\tthis.disable = function() {\n\t\t\t\t\tif (enabled === false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tenabled = false;\n\t\t\t\t\tif (gridsterTouch) {\n\t\t\t\t\t\tgridsterTouch.disable();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.toggle = function(enabled) {\n\t\t\t\t\tif (enabled) {\n\t\t\t\t\t\tthis.enable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.disable();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.destroy = function() {\n\t\t\t\t\tthis.disable();\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn GridsterDraggable;\n\t\t}\n\t])\n\n\t.factory('GridsterResizable', ['GridsterTouch', function(GridsterTouch) {\n\t\tfunction GridsterResizable($el, scope, gridster, item, itemOptions) {\n\n\t\t\tfunction ResizeHandle(handleClass) {\n\n\t\t\t\tvar hClass = handleClass;\n\n\t\t\t\tvar elmX, elmY, elmW, elmH,\n\n\t\t\t\t\tmouseX = 0,\n\t\t\t\t\tmouseY = 0,\n\t\t\t\t\tlastMouseX = 0,\n\t\t\t\t\tlastMouseY = 0,\n\t\t\t\t\tmOffX = 0,\n\t\t\t\t\tmOffY = 0,\n\n\t\t\t\t\tminTop = 0,\n\t\t\t\t\tmaxTop = 9999,\n\t\t\t\t\tminLeft = 0;\n\n\t\t\t\tvar getMinHeight = function() {\n\t\t\t\t\treturn (item.minSizeY ? item.minSizeY : 1) * gridster.curRowHeight - gridster.margins[0];\n\t\t\t\t};\n\t\t\t\tvar getMinWidth = function() {\n\t\t\t\t\treturn (item.minSizeX ? item.minSizeX : 1) * gridster.curColWidth - gridster.margins[1];\n\t\t\t\t};\n\n\t\t\t\tvar originalWidth, originalHeight;\n\t\t\t\tvar savedDraggable;\n\n\t\t\t\tfunction resizeStart(e) {\n\t\t\t\t\t$el.addClass('gridster-item-moving');\n\t\t\t\t\t$el.addClass('gridster-item-resizing');\n\n\t\t\t\t\tgridster.movingItem = item;\n\n\t\t\t\t\titem.setElementSizeX();\n\t\t\t\t\titem.setElementSizeY();\n\t\t\t\t\titem.setElementPosition();\n\t\t\t\t\tgridster.updateHeight(1);\n\n\t\t\t\t\tscope.$apply(function() {\n\t\t\t\t\t\t// callback\n\t\t\t\t\t\tif (gridster.resizable && gridster.resizable.start) {\n\t\t\t\t\t\t\tgridster.resizable.start(e, $el, itemOptions); // options is the item model\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction resize(e) {\n\t\t\t\t\tvar oldRow = item.row,\n\t\t\t\t\t\toldCol = item.col,\n\t\t\t\t\t\toldSizeX = item.sizeX,\n\t\t\t\t\t\toldSizeY = item.sizeY,\n\t\t\t\t\t\thasCallback = gridster.resizable && gridster.resizable.resize;\n\n\t\t\t\t\tvar col = item.col;\n\t\t\t\t\t// only change column if grabbing left edge\n\t\t\t\t\tif (['w', 'nw', 'sw'].indexOf(handleClass) !== -1) {\n\t\t\t\t\t\tcol = gridster.pixelsToColumns(elmX, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar row = item.row;\n\t\t\t\t\t// only change row if grabbing top edge\n\t\t\t\t\tif (['n', 'ne', 'nw'].indexOf(handleClass) !== -1) {\n\t\t\t\t\t\trow = gridster.pixelsToRows(elmY, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar sizeX = item.sizeX;\n\t\t\t\t\t// only change row if grabbing left or right edge\n\t\t\t\t\tif (['n', 's'].indexOf(handleClass) === -1) {\n\t\t\t\t\t\tsizeX = gridster.pixelsToColumns(elmW, true);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar sizeY = item.sizeY;\n\t\t\t\t\t// only change row if grabbing top or bottom edge\n\t\t\t\t\tif (['e', 'w'].indexOf(handleClass) === -1) {\n\t\t\t\t\t\tsizeY = gridster.pixelsToRows(elmH, true);\n\t\t\t\t\t}\n\n\n\t\t\t\t\tvar canOccupy = row > -1 && col > -1 && sizeX + col <= gridster.columns && sizeY + row <= gridster.maxRows;\n\t\t\t\t\tif (canOccupy && (gridster.pushing !== false || gridster.getItems(row, col, sizeX, sizeY, item).length === 0)) {\n\t\t\t\t\t\titem.row = row;\n\t\t\t\t\t\titem.col = col;\n\t\t\t\t\t\titem.sizeX = sizeX;\n\t\t\t\t\t\titem.sizeY = sizeY;\n\t\t\t\t\t}\n\t\t\t\t\tvar isChanged = item.row !== oldRow || item.col !== oldCol || item.sizeX !== oldSizeX || item.sizeY !== oldSizeY;\n\n\t\t\t\t\tif (hasCallback || isChanged) {\n\t\t\t\t\t\tscope.$apply(function() {\n\t\t\t\t\t\t\tif (hasCallback) {\n\t\t\t\t\t\t\t\tgridster.resizable.resize(e, $el, itemOptions); // options is the item model\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction resizeStop(e) {\n\t\t\t\t\t$el.removeClass('gridster-item-moving');\n\t\t\t\t\t$el.removeClass('gridster-item-resizing');\n\n\t\t\t\t\tgridster.movingItem = null;\n\n\t\t\t\t\titem.setPosition(item.row, item.col);\n\t\t\t\t\titem.setSizeY(item.sizeY);\n\t\t\t\t\titem.setSizeX(item.sizeX);\n\n\t\t\t\t\tscope.$apply(function() {\n\t\t\t\t\t\tif (gridster.resizable && gridster.resizable.stop) {\n\t\t\t\t\t\t\tgridster.resizable.stop(e, $el, itemOptions); // options is the item model\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfunction mouseDown(e) {\n\t\t\t\t\tswitch (e.which) {\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t// left mouse button\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t// right or middle mouse button\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// save the draggable setting to restore after resize\n\t\t\t\t\tsavedDraggable = gridster.draggable.enabled;\n\t\t\t\t\tif (savedDraggable) {\n\t\t\t\t\t\tgridster.draggable.enabled = false;\n\t\t\t\t\t\tscope.$broadcast('gridster-draggable-changed', gridster);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get the current mouse position.\n\t\t\t\t\tlastMouseX = e.pageX;\n\t\t\t\t\tlastMouseY = e.pageY;\n\n\t\t\t\t\t// Record current widget dimensions\n\t\t\t\t\telmX = parseInt($el.css('left'), 10);\n\t\t\t\t\telmY = parseInt($el.css('top'), 10);\n\t\t\t\t\telmW = $el[0].offsetWidth;\n\t\t\t\t\telmH = $el[0].offsetHeight;\n\n\t\t\t\t\toriginalWidth = item.sizeX;\n\t\t\t\t\toriginalHeight = item.sizeY;\n\n\t\t\t\t\tresizeStart(e);\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tfunction mouseMove(e) {\n\t\t\t\t\tvar maxLeft = gridster.curWidth - 1;\n\n\t\t\t\t\t// Get the current mouse position.\n\t\t\t\t\tmouseX = e.pageX;\n\t\t\t\t\tmouseY = e.pageY;\n\n\t\t\t\t\t// Get the deltas\n\t\t\t\t\tvar diffX = mouseX - lastMouseX + mOffX;\n\t\t\t\t\tvar diffY = mouseY - lastMouseY + mOffY;\n\t\t\t\t\tmOffX = mOffY = 0;\n\n\t\t\t\t\t// Update last processed mouse positions.\n\t\t\t\t\tlastMouseX = mouseX;\n\t\t\t\t\tlastMouseY = mouseY;\n\n\t\t\t\t\tvar dY = diffY,\n\t\t\t\t\t\tdX = diffX;\n\n\t\t\t\t\tif (hClass.indexOf('n') >= 0) {\n\t\t\t\t\t\tif (elmH - dY < getMinHeight()) {\n\t\t\t\t\t\t\tdiffY = elmH - getMinHeight();\n\t\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t\t} else if (elmY + dY < minTop) {\n\t\t\t\t\t\t\tdiffY = minTop - elmY;\n\t\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telmY += diffY;\n\t\t\t\t\t\telmH -= diffY;\n\t\t\t\t\t}\n\t\t\t\t\tif (hClass.indexOf('s') >= 0) {\n\t\t\t\t\t\tif (elmH + dY < getMinHeight()) {\n\t\t\t\t\t\t\tdiffY = getMinHeight() - elmH;\n\t\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t\t} else if (elmY + elmH + dY > maxTop) {\n\t\t\t\t\t\t\tdiffY = maxTop - elmY - elmH;\n\t\t\t\t\t\t\tmOffY = dY - diffY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telmH += diffY;\n\t\t\t\t\t}\n\t\t\t\t\tif (hClass.indexOf('w') >= 0) {\n\t\t\t\t\t\tif (elmW - dX < getMinWidth()) {\n\t\t\t\t\t\t\tdiffX = elmW - getMinWidth();\n\t\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t\t} else if (elmX + dX < minLeft) {\n\t\t\t\t\t\t\tdiffX = minLeft - elmX;\n\t\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telmX += diffX;\n\t\t\t\t\t\telmW -= diffX;\n\t\t\t\t\t}\n\t\t\t\t\tif (hClass.indexOf('e') >= 0) {\n\t\t\t\t\t\tif (elmW + dX < getMinWidth()) {\n\t\t\t\t\t\t\tdiffX = getMinWidth() - elmW;\n\t\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t\t} else if (elmX + elmW + dX > maxLeft) {\n\t\t\t\t\t\t\tdiffX = maxLeft - elmX - elmW;\n\t\t\t\t\t\t\tmOffX = dX - diffX;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telmW += diffX;\n\t\t\t\t\t}\n\n\t\t\t\t\t// set new position\n\t\t\t\t\t$el.css({\n\t\t\t\t\t\t'top': elmY + 'px',\n\t\t\t\t\t\t'left': elmX + 'px',\n\t\t\t\t\t\t'width': elmW + 'px',\n\t\t\t\t\t\t'height': elmH + 'px'\n\t\t\t\t\t});\n\n\t\t\t\t\tresize(e);\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tfunction mouseUp(e) {\n\t\t\t\t\t// restore draggable setting to its original state\n\t\t\t\t\tif (gridster.draggable.enabled !== savedDraggable) {\n\t\t\t\t\t\tgridster.draggable.enabled = savedDraggable;\n\t\t\t\t\t\tscope.$broadcast('gridster-draggable-changed', gridster);\n\t\t\t\t\t}\n\n\t\t\t\t\tmOffX = mOffY = 0;\n\n\t\t\t\t\tresizeStop(e);\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tvar $dragHandle = null;\n\t\t\t\tvar unifiedInput;\n\n\t\t\t\tthis.enable = function() {\n\t\t\t\t\tif (!$dragHandle) {\n\t\t\t\t\t\t$dragHandle = angular.element('<div class=\"gridster-item-resizable-handler handle-' + hClass + '\"></div>');\n\t\t\t\t\t\t$el.append($dragHandle);\n\t\t\t\t\t}\n\n\t\t\t\t\tunifiedInput = new GridsterTouch($dragHandle[0], mouseDown, mouseMove, mouseUp);\n\t\t\t\t\tunifiedInput.enable();\n\t\t\t\t};\n\n\t\t\t\tthis.disable = function() {\n\t\t\t\t\tif ($dragHandle) {\n\t\t\t\t\t\t$dragHandle.remove();\n\t\t\t\t\t\t$dragHandle = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tunifiedInput.disable();\n\t\t\t\t\tunifiedInput = undefined;\n\t\t\t\t};\n\n\t\t\t\tthis.destroy = function() {\n\t\t\t\t\tthis.disable();\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar handles = [];\n\t\t\tvar handlesOpts = gridster.resizable.handles;\n\t\t\tif (typeof handlesOpts === 'string') {\n\t\t\t\thandlesOpts = gridster.resizable.handles.split(',');\n\t\t\t}\n\t\t\tvar enabled = false;\n\n\t\t\tfor (var c = 0, l = handlesOpts.length; c < l; c++) {\n\t\t\t\thandles.push(new ResizeHandle(handlesOpts[c]));\n\t\t\t}\n\n\t\t\tthis.enable = function() {\n\t\t\t\tif (enabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (var c = 0, l = handles.length; c < l; c++) {\n\t\t\t\t\thandles[c].enable();\n\t\t\t\t}\n\t\t\t\tenabled = true;\n\t\t\t};\n\n\t\t\tthis.disable = function() {\n\t\t\t\tif (!enabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (var c = 0, l = handles.length; c < l; c++) {\n\t\t\t\t\thandles[c].disable();\n\t\t\t\t}\n\t\t\t\tenabled = false;\n\t\t\t};\n\n\t\t\tthis.toggle = function(enabled) {\n\t\t\t\tif (enabled) {\n\t\t\t\t\tthis.enable();\n\t\t\t\t} else {\n\t\t\t\t\tthis.disable();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.destroy = function() {\n\t\t\t\tfor (var c = 0, l = handles.length; c < l; c++) {\n\t\t\t\t\thandles[c].destroy();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn GridsterResizable;\n\t}])\n\n\t.factory('gridsterDebounce', function() {\n\t\treturn function gridsterDebounce(func, wait, immediate) {\n\t\t\tvar timeout;\n\t\t\treturn function() {\n\t\t\t\tvar context = this,\n\t\t\t\t\targs = arguments;\n\t\t\t\tvar later = function() {\n\t\t\t\t\ttimeout = null;\n\t\t\t\t\tif (!immediate) {\n\t\t\t\t\t\tfunc.apply(context, args);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tvar callNow = immediate && !timeout;\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t\tif (callNow) {\n\t\t\t\t\tfunc.apply(context, args);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t})\n\n\t/**\n\t * GridsterItem directive\n\t * @param $parse\n\t * @param GridsterDraggable\n\t * @param GridsterResizable\n\t * @param gridsterDebounce\n\t */\n\t.directive('gridsterItem', ['$parse', 'GridsterDraggable', 'GridsterResizable', 'gridsterDebounce',\n\t\tfunction($parse, GridsterDraggable, GridsterResizable, gridsterDebounce) {\n\t\t\treturn {\n\t\t\t\tscope: true,\n\t\t\t\trestrict: 'EA',\n\t\t\t\tcontroller: 'GridsterItemCtrl',\n\t\t\t\tcontrollerAs: 'gridsterItem',\n\t\t\t\trequire: ['^gridster', 'gridsterItem'],\n\t\t\t\tlink: function(scope, $el, attrs, controllers) {\n\t\t\t\t\tvar optionsKey = attrs.gridsterItem,\n\t\t\t\t\t\toptions;\n\n\t\t\t\t\tvar gridster = controllers[0],\n\t\t\t\t\t\titem = controllers[1];\n\n\t\t\t\t\tscope.gridster = gridster;\n\n\t\t\t\t\t// bind the item's position properties\n\t\t\t\t\t// options can be an object specified by gridster-item=\"object\"\n\t\t\t\t\t// or the options can be the element html attributes object\n\t\t\t\t\tif (optionsKey) {\n\t\t\t\t\t\tvar $optionsGetter = $parse(optionsKey);\n\t\t\t\t\t\toptions = $optionsGetter(scope) || {};\n\t\t\t\t\t\tif (!options && $optionsGetter.assign) {\n\t\t\t\t\t\t\toptions = {\n\t\t\t\t\t\t\t\trow: item.row,\n\t\t\t\t\t\t\t\tcol: item.col,\n\t\t\t\t\t\t\t\tsizeX: item.sizeX,\n\t\t\t\t\t\t\t\tsizeY: item.sizeY,\n\t\t\t\t\t\t\t\tminSizeX: 0,\n\t\t\t\t\t\t\t\tminSizeY: 0,\n\t\t\t\t\t\t\t\tmaxSizeX: null,\n\t\t\t\t\t\t\t\tmaxSizeY: null\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t$optionsGetter.assign(scope, options);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\toptions = attrs;\n\t\t\t\t\t}\n\n\t\t\t\t\titem.init($el, gridster);\n\n\t\t\t\t\t$el.addClass('gridster-item');\n\n\t\t\t\t\tvar aspects = ['minSizeX', 'maxSizeX', 'minSizeY', 'maxSizeY', 'sizeX', 'sizeY', 'row', 'col'],\n\t\t\t\t\t\t$getters = {};\n\n\t\t\t\t\tvar expressions = [];\n\t\t\t\t\tvar aspectFn = function(aspect) {\n\t\t\t\t\t\tvar expression;\n\t\t\t\t\t\tif (typeof options[aspect] === 'string') {\n\t\t\t\t\t\t\t// watch the expression in the scope\n\t\t\t\t\t\t\texpression = options[aspect];\n\t\t\t\t\t\t} else if (typeof options[aspect.toLowerCase()] === 'string') {\n\t\t\t\t\t\t\t// watch the expression in the scope\n\t\t\t\t\t\t\texpression = options[aspect.toLowerCase()];\n\t\t\t\t\t\t} else if (optionsKey) {\n\t\t\t\t\t\t\t// watch the expression on the options object in the scope\n\t\t\t\t\t\t\texpression = optionsKey + '.' + aspect;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\texpressions.push('\"' + aspect + '\":' + expression);\n\t\t\t\t\t\t$getters[aspect] = $parse(expression);\n\n\t\t\t\t\t\t// initial set\n\t\t\t\t\t\tvar val = $getters[aspect](scope);\n\t\t\t\t\t\tif (typeof val === 'number') {\n\t\t\t\t\t\t\titem[aspect] = val;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tfor (var i = 0, l = aspects.length; i < l; ++i) {\n\t\t\t\t\t\taspectFn(aspects[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar watchExpressions = '{' + expressions.join(',') + '}';\n\t\t\t\t\t// when the value changes externally, update the internal item object\n\t\t\t\t\tscope.$watchCollection(watchExpressions, function(newVals, oldVals) {\n\t\t\t\t\t\tfor (var aspect in newVals) {\n\t\t\t\t\t\t\tvar newVal = newVals[aspect];\n\t\t\t\t\t\t\tvar oldVal = oldVals[aspect];\n\t\t\t\t\t\t\tif (oldVal === newVal) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnewVal = parseInt(newVal, 10);\n\t\t\t\t\t\t\tif (!isNaN(newVal)) {\n\t\t\t\t\t\t\t\titem[aspect] = newVal;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tfunction positionChanged() {\n\t\t\t\t\t\t// call setPosition so the element and gridster controller are updated\n\t\t\t\t\t\titem.setPosition(item.row, item.col);\n\n\t\t\t\t\t\t// when internal item position changes, update externally bound values\n\t\t\t\t\t\tif ($getters.row && $getters.row.assign) {\n\t\t\t\t\t\t\t$getters.row.assign(scope, item.row);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ($getters.col && $getters.col.assign) {\n\t\t\t\t\t\t\t$getters.col.assign(scope, item.col);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\treturn item.row + ',' + item.col;\n\t\t\t\t\t}, positionChanged);\n\n\t\t\t\t\tfunction sizeChanged() {\n\t\t\t\t\t\tvar changedX = item.setSizeX(item.sizeX, true);\n\t\t\t\t\t\tif (changedX && $getters.sizeX && $getters.sizeX.assign) {\n\t\t\t\t\t\t\t$getters.sizeX.assign(scope, item.sizeX);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar changedY = item.setSizeY(item.sizeY, true);\n\t\t\t\t\t\tif (changedY && $getters.sizeY && $getters.sizeY.assign) {\n\t\t\t\t\t\t\t$getters.sizeY.assign(scope, item.sizeY);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (changedX || changedY) {\n\t\t\t\t\t\t\titem.gridster.moveOverlappingItems(item);\n\t\t\t\t\t\t\tgridster.layoutChanged();\n\t\t\t\t\t\t\tscope.$broadcast('gridster-item-resized', item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.$watch(function() {\n\t\t\t\t\t\treturn item.sizeY + ',' + item.sizeX + ',' + item.minSizeX + ',' + item.maxSizeX + ',' + item.minSizeY + ',' + item.maxSizeY;\n\t\t\t\t\t}, sizeChanged);\n\n\t\t\t\t\tvar draggable = new GridsterDraggable($el, scope, gridster, item, options);\n\t\t\t\t\tvar resizable = new GridsterResizable($el, scope, gridster, item, options);\n\n\t\t\t\t\tvar updateResizable = function() {\n\t\t\t\t\t\tresizable.toggle(!gridster.isMobile && gridster.resizable && gridster.resizable.enabled);\n\t\t\t\t\t};\n\t\t\t\t\tupdateResizable();\n\n\t\t\t\t\tvar updateDraggable = function() {\n\t\t\t\t\t\tdraggable.toggle(!gridster.isMobile && gridster.draggable && gridster.draggable.enabled);\n\t\t\t\t\t};\n\t\t\t\t\tupdateDraggable();\n\n\t\t\t\t\tscope.$on('gridster-draggable-changed', updateDraggable);\n\t\t\t\t\tscope.$on('gridster-resizable-changed', updateResizable);\n\t\t\t\t\tscope.$on('gridster-resized', updateResizable);\n\t\t\t\t\tscope.$on('gridster-mobile-changed', function() {\n\t\t\t\t\t\tupdateResizable();\n\t\t\t\t\t\tupdateDraggable();\n\t\t\t\t\t});\n\n\t\t\t\t\tfunction whichTransitionEvent() {\n\t\t\t\t\t\tvar el = document.createElement('div');\n\t\t\t\t\t\tvar transitions = {\n\t\t\t\t\t\t\t'transition': 'transitionend',\n\t\t\t\t\t\t\t'OTransition': 'oTransitionEnd',\n\t\t\t\t\t\t\t'MozTransition': 'transitionend',\n\t\t\t\t\t\t\t'WebkitTransition': 'webkitTransitionEnd'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfor (var t in transitions) {\n\t\t\t\t\t\t\tif (el.style[t] !== undefined) {\n\t\t\t\t\t\t\t\treturn transitions[t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar debouncedTransitionEndPublisher = gridsterDebounce(function() {\n\t\t\t\t\t\tscope.$apply(function() {\n\t\t\t\t\t\t\tscope.$broadcast('gridster-item-transition-end', item);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 50);\n\n\t\t\t\t\t$el.on(whichTransitionEvent(), debouncedTransitionEndPublisher);\n\n\t\t\t\t\tscope.$broadcast('gridster-item-initialized', item);\n\n\t\t\t\t\treturn scope.$on('$destroy', function() {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresizable.destroy();\n\t\t\t\t\t\t\tdraggable.destroy();\n\t\t\t\t\t\t} catch (e) {}\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tgridster.removeItem(item);\n\t\t\t\t\t\t} catch (e) {}\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\titem.destroy();\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t])\n\n\t.directive('gridsterNoDrag', function() {\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\tlink: function(scope, $element) {\n\t\t\t\t$element.addClass('gridster-no-drag');\n\t\t\t}\n\t\t};\n\t})\n\n\t;\n\n}));\n","angular.module('app').controller('DashboardCtrl', ['$scope', '$timeout', function ($scope, $timeout) {\n\t$scope.gridsterOptions = {\n\t\tmargins: [20, 20],\n\t\tcolumns: 4,\n\t\tdraggable: {\n\t\t\thandle: 'h3'\n\t\t}\n\t};\n\n\t$scope.dashboards = {\n\t\t'1': {\n\t\t\tid: '1',\n\t\t\tname: 'Home',\n\t\t\twidgets: [{\n\t\t\t\tcol: 0,\n\t\t\t\trow: 0,\n\t\t\t\tsizeY: 1,\n\t\t\t\tsizeX: 1,\n\t\t\t\tname: \"Widget 1\"\n\t\t\t}, {\n\t\t\t\tcol: 2,\n\t\t\t\trow: 1,\n\t\t\t\tsizeY: 1,\n\t\t\t\tsizeX: 1,\n\t\t\t\tname: \"Widget 2\"\n\t\t\t}]\n\t\t},\n\t\t'2': {\n\t\t\tid: '2',\n\t\t\tname: 'Other',\n\t\t\twidgets: [{\n\t\t\t\tcol: 1,\n\t\t\t\trow: 1,\n\t\t\t\tsizeY: 1,\n\t\t\t\tsizeX: 2,\n\t\t\t\tname: \"Other Widget 1\"\n\t\t\t}, {\n\t\t\t\tcol: 1,\n\t\t\t\trow: 3,\n\t\t\t\tsizeY: 1,\n\t\t\t\tsizeX: 1,\n\t\t\t\tname: \"Other Widget 2\"\n\t\t\t}]\n\t\t}\n\t};\n\n\t$scope.clear = function () {\n\t\t$scope.dashboard.widgets = [];\n\t};\n\n\t$scope.addWidget = function () {\n\t\t$scope.dashboard.widgets.push({\n\t\t\tname: \"New Widget\",\n\t\t\tsizeX: 1,\n\t\t\tsizeY: 1\n\t\t});\n\t};\n\n\t$scope.$watch('selectedDashboardId', function (newVal, oldVal) {\n\t\tif (newVal !== oldVal) {\n\t\t\t$scope.dashboard = $scope.dashboards[newVal];\n\t\t} else {\n\t\t\t$scope.dashboard = $scope.dashboards[1];\n\t\t}\n\t});\n\n\t// init dashboard\n\t$scope.selectedDashboardId = '1';\n}]).controller('CustomWidgetCtrl', ['$scope', '$modal', function ($scope, $modal) {\n\n\t$scope.remove = function (widget) {\n\t\t$scope.dashboard.widgets.splice($scope.dashboard.widgets.indexOf(widget), 1);\n\t};\n\n\t$scope.openSettings = function (widget) {\n\t\t$modal.open({\n\t\t\tscope: $scope,\n\t\t\ttemplateUrl: 'demo/dashboard/widget_settings.html',\n\t\t\tcontroller: 'WidgetSettingsCtrl',\n\t\t\tresolve: {\n\t\t\t\twidget: function () {\n\t\t\t\t\treturn widget;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n}]).controller('WidgetSettingsCtrl', ['$scope', '$timeout', '$rootScope', '$modalInstance', 'widget', function ($scope, $timeout, $rootScope, $modalInstance, widget) {\n\t$scope.widget = widget;\n\n\t$scope.form = {\n\t\tname: widget.name,\n\t\tsizeX: widget.sizeX,\n\t\tsizeY: widget.sizeY,\n\t\tcol: widget.col,\n\t\trow: widget.row\n\t};\n\n\t$scope.sizeOptions = [{\n\t\tid: '1',\n\t\tname: '1'\n\t}, {\n\t\tid: '2',\n\t\tname: '2'\n\t}, {\n\t\tid: '3',\n\t\tname: '3'\n\t}, {\n\t\tid: '4',\n\t\tname: '4'\n\t}];\n\n\t$scope.dismiss = function () {\n\t\t$modalInstance.dismiss();\n\t};\n\n\t$scope.remove = function () {\n\t\t$scope.dashboard.widgets.splice($scope.dashboard.widgets.indexOf(widget), 1);\n\t\t$modalInstance.close();\n\t};\n\n\t$scope.submit = function () {\n\t\tangular.extend(widget, $scope.form);\n\n\t\t$modalInstance.close(widget);\n\t};\n}]\n\n// helper code\n).filter('object2Array', function () {\n\treturn function (input) {\n\t\tvar out = [];\n\t\tfor (i in input) {\n\t\t\tout.push(input[i]);\n\t\t}\n\t\treturn out;\n\t};\n});","angular.module('app').directive('integer', function () {\n\treturn {\n\t\trequire: 'ngModel',\n\t\tlink: function (scope, ele, attr, ctrl) {\n\t\t\tctrl.$parsers.unshift(function (viewValue) {\n\t\t\t\tif (viewValue === '' || viewValue === null || typeof viewValue === 'undefined') {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn parseInt(viewValue, 10);\n\t\t\t});\n\t\t}\n\t};\n}).controller('MainCtrl', function ($scope) {\n\n\t$scope.gridsterOpts = {\n\t\tmargins: [20, 20],\n\t\touterMargin: false,\n\t\tpushing: true,\n\t\tfloating: true,\n\t\tdraggable: {\n\t\t\tenabled: false\n\t\t},\n\t\tresizable: {\n\t\t\tenabled: false,\n\t\t\thandles: ['n', 'e', 's', 'w', 'se', 'sw']\n\t\t}\n\t};\n\n\t// these map directly to gridsterItem options\n\t$scope.standardItems = [{\n\t\tsizeX: 2,\n\t\tsizeY: 1,\n\t\trow: 0,\n\t\tcol: 0\n\t}, {\n\t\tsizeX: 2,\n\t\tsizeY: 2,\n\t\trow: 0,\n\t\tcol: 2\n\t}, {\n\t\tsizeX: 2,\n\t\tsizeY: 1,\n\t\trow: 2,\n\t\tcol: 1\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 2,\n\t\tcol: 3\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 2,\n\t\tcol: 4\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 0,\n\t\tcol: 4\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 0,\n\t\tcol: 5\n\t}, {\n\t\tsizeX: 2,\n\t\tsizeY: 1,\n\t\trow: 1,\n\t\tcol: 0\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 1,\n\t\tcol: 4\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 2,\n\t\trow: 1,\n\t\tcol: 5\n\t}, {\n\t\tsizeX: 1,\n\t\tsizeY: 1,\n\t\trow: 2,\n\t\tcol: 0\n\t}];\n\n\t// these are non-standard, so they require mapping options\n\t$scope.customItems = [{\n\t\tsize: {\n\t\t\tx: 2,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [0, 0]\n\t}, {\n\t\tsize: {\n\t\t\tx: 2,\n\t\t\ty: 2\n\t\t},\n\t\tposition: [0, 2]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [1, 4]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 2\n\t\t},\n\t\tposition: [1, 5]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [2, 0]\n\t}, {\n\t\tsize: {\n\t\t\tx: 2,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [2, 1]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [2, 3]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [0, 4]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [0, 5]\n\t}, {\n\t\tsize: {\n\t\t\tx: 2,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [1, 0]\n\t}, {\n\t\tsize: {\n\t\t\tx: 1,\n\t\t\ty: 1\n\t\t},\n\t\tposition: [2, 4]\n\t}];\n\n\t$scope.emptyItems = [{\n\t\tname: 'Item1'\n\t}, {\n\t\tname: 'Item2'\n\t}, {\n\t\tname: 'Item3'\n\t}, {\n\t\tname: 'Item4'\n\t}];\n\n\t// map the gridsterItem to the custom item structure\n\t$scope.customItemMap = {\n\t\tsizeX: 'item.size.x',\n\t\tsizeY: 'item.size.y',\n\t\trow: 'item.position[0]',\n\t\tcol: 'item.position[1]'\n\t};\n});","'use strict';\n\n/* global browser */\n/* global element */\n/* global by */\n\ndescribe('Controller: GridsterCtrl', function () {\n\tvar items, firstItem;\n\n\tbeforeEach(function () {\n\t\tbrowser.get('test.html');\n\t\tbrowser.driver.manage().window().setSize(1000, 1000);\n\t\titems = element.all(by.css('[gridster-item]'));\n\t\tfirstItem = items.get(0);\n\t});\n\n\tit('should have a page with elements', function () {\n\t\telement.all(by.repeater('item in standardItems')).then(function (items) {\n\t\t\texpect(items.length).toEqual(11);\n\t\t});\n\n\t\tbrowser.findElement(by.css('h2:first-child')).then(function (el) {\n\t\t\treturn el.getText().then(function (text) {\n\t\t\t\texpect(text).toBe('Standard Items');\n\t\t\t});\n\t\t});\n\t});\n\n\tit('should allow the user to enter a size', function () {\n\t\tvar width = 0;\n\n\t\tfirstItem.getSize().then(function (size) {\n\t\t\texpect(size.width).toBeGreaterThan(0);\n\t\t\twidth = size.width;\n\t\t}).then(function () {\n\t\t\treturn firstItem.element(by.model('item.sizeX'));\n\t\t}).then(function (input) {\n\t\t\treturn input.sendKeys('2').then(function () {\n\t\t\t\tinput.sendKeys(protractor.Key.TAB);\n\t\t\t});\n\t\t}).then(function () {\n\t\t\treturn firstItem.getSize();\n\t\t}).then(function (size) {\n\t\t\texpect(size.width).toBeGreaterThan(width);\n\t\t});\n\t});\n\n\tit('should resize the row widths and heights', function () {\n\t\tvar initialSize;\n\n\t\tbrowser.driver.manage().window().setSize(1200, 1200);\n\t\tfirstItem.getSize().then(function setInitialSize(size) {\n\t\t\tinitialSize = size;\n\t\t}).then(function () {\n\t\t\tbrowser.driver.manage().window().setSize(1000, 1000);\n\t\t\tfirstItem.getSize().then(function (newSize) {\n\t\t\t\texpect(newSize.width).toBeLessThan(initialSize.width);\n\t\t\t\texpect(newSize.height).toBeLessThan(initialSize.height);\n\t\t\t});\n\t\t});\n\t});\n});","'use strict';\n\ndescribe('gridster directive', function () {\n\n\tbeforeEach(module('gridster'));\n\n\tvar $scope;\n\tvar GridsterCtrl;\n\tvar $el;\n\tvar startCount;\n\tvar resizeCount;\n\tvar stopCount;\n\tvar broadcastOnRootScope;\n\n\tvar dragHelper = function (el, dx, dy) {\n\t\tel.simulate('mouseover').simulate('drag', {\n\t\t\tmoves: 1,\n\t\t\tdx: dx,\n\t\t\tdy: dy\n\t\t});\n\t};\n\n\tbeforeEach(inject(function ($rootScope, $compile) {\n\t\tbroadcastOnRootScope = spyOn($rootScope, '$broadcast').and.callThrough();\n\n\t\t$scope = $rootScope.$new();\n\t\tstartCount = resizeCount = stopCount = 0;\n\n\t\t$scope.opts = {\n\t\t\tminRows: 3,\n\t\t\tresizable: {\n\t\t\t\tenabled: true,\n\t\t\t\thandles: ['n', 'e', 's', 'w', 'se', 'sw'],\n\t\t\t\tstart: function () {\n\t\t\t\t\tstartCount++;\n\t\t\t\t},\n\t\t\t\tresize: function () {\n\t\t\t\t\tresizeCount++;\n\t\t\t\t},\n\t\t\t\tstop: function () {\n\t\t\t\t\tstopCount++;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t$scope.dashboard = {\n\t\t\twidgets: [{\n\t\t\t\tid: 1,\n\t\t\t\trow: 0,\n\t\t\t\tcol: 0,\n\t\t\t\tsizeX: 1,\n\t\t\t\tsizeY: 1\n\t\t\t}, {\n\t\t\t\tid: 2,\n\t\t\t\trow: 0,\n\t\t\t\tcol: 3,\n\t\t\t\tsizeX: 2,\n\t\t\t\tsizeY: 1\n\t\t\t}, {\n\t\t\t\tid: 3,\n\t\t\t\trow: 1,\n\t\t\t\tcol: 3,\n\t\t\t\tsizeX: 2,\n\t\t\t\tsizeY: 2\n\t\t\t}]\n\t\t};\n\n\t\t$el = angular.element('<div gridster=\"opts\" style=\"width: 1000px;\">' + '<ul><li gridster-item=\"widget\" ng-repeat=\"widget in dashboard.widgets\">' + '</div>');\n\n\t\t$el.appendTo(document.body); // append to body so jquery-simulate works\n\n\t\t$compile($el)($scope);\n\t\t$scope.$digest();\n\n\t\tGridsterCtrl = $el.controller('gridster');\n\t}));\n\n\tit('should add a class of gridster', function () {\n\t\texpect($el.hasClass('gridster')).toBe(true);\n\t});\n\n\tit('should override options', function () {\n\t\texpect(GridsterCtrl.minRows).toBe($scope.opts.minRows);\n\t});\n\n\tit('should add widgets to DOM', function () {\n\t\texpect($el.find('li').length).toBe($scope.dashboard.widgets.length);\n\t});\n\n\tit('should initialize resizable', function () {\n\t\tvar $widget = $el.find('li:first-child');\n\n\t\texpect($widget.find('.handle-s').length).toBe(1);\n\t});\n\n\tit('should update widget dimensions on resize & trigger custom resize events', function () {\n\t\tvar $widget = $el.find('li:first-child');\n\t\tvar handle = $widget.find('.handle-e');\n\n\t\texpect($widget.width()).toBe(155);\n\t\texpect($scope.dashboard.widgets[0].sizeX).toBe(1);\n\t\texpect(startCount).toBe(0);\n\t\texpect(resizeCount).toBe(0);\n\t\texpect(stopCount).toBe(0);\n\n\t\tdragHelper(handle, 50); // should resize to next width step\n\n\t\texpect($widget.width()).toBe(320);\n\t\texpect($scope.dashboard.widgets[0].sizeX).toBe(2);\n\t\texpect(startCount).toBe(1);\n\t\texpect(resizeCount).toBe(1);\n\t\texpect(stopCount).toBe(1);\n\t});\n\n\tit('should broadcast \"gridster-item-resized\" event on resize', function () {\n\t\t// arrange\n\t\tvar eHandle = $el.find('li:first-child').find('.handle-e');\n\t\tvar sHandle = $el.find('li:first-child').find('.handle-s');\n\t\tbroadcastOnRootScope.calls.reset();\n\n\t\t// act\n\t\tdragHelper(eHandle, 50);\n\n\t\t// assert\n\t\texpect(broadcastOnRootScope).toHaveBeenCalledWith('gridster-item-resized', jasmine.objectContaining({\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 1\n\t\t}));\n\n\t\t// arrange\n\t\tbroadcastOnRootScope.calls.reset();\n\n\t\t// act\n\t\tdragHelper(sHandle, 0, 50);\n\n\t\t// assert\n\t\texpect(broadcastOnRootScope).toHaveBeenCalledWith('gridster-item-resized', jasmine.objectContaining({\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 2\n\t\t}));\n\t});\n});","'use strict';\n\ndescribe('Controller: GridsterItemCtrl', function () {\n\t// load the controller's module\n\tbeforeEach(module('gridster'));\n\n\tvar gridster, config, scope, item1x1, item2x1, item1x2, item2x2, gridsterItem;\n\n\t// Initialize the controller and a mock scope\n\tbeforeEach(inject(function ($controller, $rootScope) {\n\t\tscope = $rootScope.$new();\n\n\t\tconfig = {\n\t\t\tcolWidth: 100,\n\t\t\trowHeight: 100,\n\t\t\tcolumns: 6,\n\t\t\tmargins: [10, 10],\n\t\t\tdefaultHeight: 1,\n\t\t\tdefaultWidth: 2,\n\t\t\tminRows: 2,\n\t\t\tmaxRows: 100,\n\t\t\tmobileBreakPoint: 600,\n\t\t\tdefaultSizeX: 3,\n\t\t\tdefaultSizeY: 4\n\t\t};\n\n\t\tgridster = $controller('GridsterCtrl');\n\t\tgridsterItem = $controller('GridsterItemCtrl');\n\n\t\titem1x1 = {\n\t\t\tsizeX: 1,\n\t\t\tsizeY: 1,\n\t\t\tid: '1x1'\n\t\t};\n\t\titem2x1 = {\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 1,\n\t\t\tid: '2x1'\n\t\t};\n\t\titem2x2 = {\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 2,\n\t\t\tid: '2x2'\n\t\t};\n\t\titem1x2 = {\n\t\t\tsizeX: 1,\n\t\t\tsizeY: 2,\n\t\t\tid: '1x2'\n\t\t};\n\n\t\tgridster.setOptions(config);\n\t\tgridsterItem.init(null, gridster);\n\t}));\n\n\tit('should get defaults from gridster', function () {\n\t\texpect(gridsterItem.sizeX).toBe(config.defaultSizeX);\n\t\texpect(gridsterItem.sizeY).toBe(config.defaultSizeY);\n\t});\n});","'use strict';\n\ndescribe('GridsterCtrl', function () {\n\n\t// load the controller's module\n\tbeforeEach(module('gridster'));\n\n\tvar GridsterCtrl, item1x1, item2x1, item1x2, item2x2;\n\n\t// Initialize the controller\n\tbeforeEach(inject(function ($controller) {\n\t\titem1x1 = {\n\t\t\tsizeX: 1,\n\t\t\tsizeY: 1,\n\t\t\tid: '1x1'\n\t\t};\n\t\titem2x1 = {\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 1,\n\t\t\tid: '2x1'\n\t\t};\n\t\titem2x2 = {\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 2,\n\t\t\tid: '2x2'\n\t\t};\n\t\titem1x2 = {\n\t\t\tsizeX: 1,\n\t\t\tsizeY: 2,\n\t\t\tid: '1x2'\n\t\t};\n\n\t\tvar config = [item1x1, item2x1, item2x2, item1x2];\n\n\t\tGridsterCtrl = $controller('GridsterCtrl');\n\t\tGridsterCtrl.setOptions(config);\n\t}));\n\n\tit('should have a grid Array', function () {\n\t\texpect(GridsterCtrl.grid.constructor).toBe(Array);\n\t});\n\n\tdescribe('options', function () {\n\t\tit('should set default options', function () {\n\t\t\texpect(GridsterCtrl.columns).toBe(6);\n\t\t\texpect(GridsterCtrl.width).toBe('auto');\n\t\t\texpect(GridsterCtrl.colWidth).toBe('auto');\n\t\t\texpect(GridsterCtrl.rowHeight).toBe('match');\n\t\t\texpect(GridsterCtrl.margins).toEqual([10, 10]);\n\t\t\texpect(GridsterCtrl.isMobile).toBe(false);\n\t\t\texpect(GridsterCtrl.minColumns).toEqual(1);\n\t\t\texpect(GridsterCtrl.minRows).toBe(1);\n\t\t\texpect(GridsterCtrl.maxRows).toBe(100);\n\t\t\texpect(GridsterCtrl.defaultSizeX).toBe(2);\n\t\t\texpect(GridsterCtrl.defaultSizeY).toBe(1);\n\t\t\texpect(GridsterCtrl.mobileBreakPoint).toBe(600);\n\t\t\texpect(GridsterCtrl.resizable.enabled).toBe(true);\n\t\t\texpect(GridsterCtrl.draggable.enabled).toBe(true);\n\t\t});\n\n\t\t// todo: move these to e2e test\n\t\t//\t\tit('should resolve smart options', function() {\n\t\t//\t\t\texpect(GridsterCtrl.curWidth).toBe(400); // inherit element width\n\t\t//\t\t\texpect(GridsterCtrl.curColWidth).toBe(65); // (400 - 10) / 6\n\t\t//\t\t\texpect(GridsterCtrl.curRowHeight).toBe(65); // match curColWidth\n\t\t//\t\t});\n\n\t\tit('should update options', function () {\n\t\t\tGridsterCtrl.setOptions({\n\t\t\t\twidth: 1200,\n\t\t\t\tcolWidth: 120,\n\t\t\t\trowHeight: 140,\n\t\t\t\tcolumns: 7,\n\t\t\t\tmargins: [15, 15]\n\t\t\t});\n\n\t\t\texpect(GridsterCtrl.width).toBe(1200);\n\t\t\texpect(GridsterCtrl.colWidth).toBe(120);\n\t\t\texpect(GridsterCtrl.rowHeight).toBe(140);\n\t\t\texpect(GridsterCtrl.columns).toBe(7);\n\t\t\texpect(GridsterCtrl.margins).toEqual([15, 15]);\n\n\t\t\t// todo: move these to e2e test\n\t\t\t//\t\t\texpect(GridsterCtrl.curColWidth).toBe(120);\n\t\t\t//\t\t\texpect(GridsterCtrl.curRowHeight).toBe(140);\n\t\t});\n\t});\n\n\tdescribe('autoSetItemPosition', function () {\n\t\tit('should place an item in the first available space', function () {\n\t\t\tGridsterCtrl.putItem(item2x1, 0, 1);\n\t\t\tGridsterCtrl.autoSetItemPosition(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\n\t\t\tGridsterCtrl.autoSetItemPosition(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 3)).toBe(item2x2);\n\t\t});\n\n\t\tit('should respect item size', function () {\n\t\t\tGridsterCtrl.putItem(item2x1, 0, 1);\n\n\t\t\tGridsterCtrl.autoSetItemPosition(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 3)).toBe(item2x2);\n\t\t});\n\t});\n\n\tdescribe('putItem', function () {\n\t\tit('should be able to place an item with coordinates', function () {\n\t\t\tGridsterCtrl.putItem(item1x1, 2, 3);\n\t\t\texpect(GridsterCtrl.getItem(2, 3)).toBe(item1x1);\n\t\t});\n\n\t\tit('should place an item without coordinates into empty grid', function () {\n\t\t\tGridsterCtrl.putItem(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t});\n\n\t\tit('should place item into without coordinates into the next available position', function () {\n\t\t\t// place 1x1 at 0x0\n\t\t\tGridsterCtrl.putItem(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\n\t\t\t// place 2x1 at 0x2\n\t\t\titem2x1.row = 0;\n\t\t\titem2x1.col = 2;\n\t\t\tGridsterCtrl.putItem(item2x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x1);\n\n\t\t\t// place 1x2 in without coordinates\n\t\t\tGridsterCtrl.putItem(item1x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 1)).toBe(item1x2); // should stick it at 0x1\n\n\t\t\t// place 2x2 without coordinates\n\t\t\tGridsterCtrl.putItem(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 4)).toBe(item2x2); // should stick it at 0x4\n\t\t});\n\n\t\tit('should not allow items to be placed with negative indices', function () {\n\t\t\tGridsterCtrl.putItem(item1x1, -1, -1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t\texpect(item1x1.row).toBe(0);\n\t\t\texpect(item1x1.col).toBe(0);\n\t\t});\n\n\t\tit('should not float items until told to', function () {\n\t\t\tGridsterCtrl.putItem(item1x1, 3, 0);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(null);\n\t\t\texpect(GridsterCtrl.getItem(3, 0)).toBe(item1x1);\n\t\t});\n\n\t\tit('should not create two references to the same item', function () {\n\t\t\tGridsterCtrl.putItem(item1x1, 0, 0);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t\tGridsterCtrl.putItem(item1x1, 0, 4);\n\t\t\texpect(GridsterCtrl.getItem(0, 4)).toBe(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(null);\n\t\t});\n\t});\n\n\tdescribe('getItem', function () {\n\t\tit('should match any column of a multi-column item', function () {\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 2);\n\n\t\t\t// all 4 corners should return the same item\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(1, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 3)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(1, 3)).toBe(item2x2);\n\t\t});\n\t});\n\n\tdescribe('getItems', function () {\n\t\tit('should get items within an area', function () {\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 1);\n\t\t\tGridsterCtrl.putItem(item2x1, 2, 0);\n\n\t\t\t// verify they are still where we put them\n\t\t\texpect(GridsterCtrl.getItem(0, 1)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(2, 0)).toBe(item2x1);\n\n\t\t\tvar items = GridsterCtrl.getItems(1, 0, 2, 1);\n\t\t\texpect(items.length).toBe(1);\n\t\t\texpect(items[0]).toBe(item2x2);\n\t\t});\n\t});\n\n\tdescribe('floatItemsUp', function () {\n\t\tit('should float an item up', function () {\n\t\t\tGridsterCtrl.putItem(item1x1, 3, 0);\n\t\t\tGridsterCtrl.floatItemsUp();\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t});\n\n\t\tit('should stack items when they float up', function () {\n\t\t\tGridsterCtrl.putItem(item1x1, 3, 0);\n\t\t\tGridsterCtrl.floatItemsUp();\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\n\t\t\tGridsterCtrl.putItem(item2x1, 3, 0);\n\t\t\tGridsterCtrl.floatItemsUp();\n\t\t\texpect(GridsterCtrl.getItem(1, 0)).toBe(item2x1);\n\n\t\t\tGridsterCtrl.putItem(item1x1, 3, 1);\n\t\t\tGridsterCtrl.floatItemsUp();\n\t\t\texpect(GridsterCtrl.getItem(1, 1)).toBe(item1x1);\n\t\t});\n\n\t\tit('should correctly stack multi-column items when their primary coordinates do not stack', function () {\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 2);\n\t\t\tGridsterCtrl.putItem(item2x1, 2, 1);\n\n\t\t\t// verify they are still where we put them\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(2, 1)).toBe(item2x1);\n\n\t\t\t// allow them to float up\n\t\t\tGridsterCtrl.floatItemsUp();\n\n\t\t\t// verify they are still where we put them\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(2, 1)).toBe(item2x1);\n\t\t});\n\t});\n\n\tdescribe('moveOverlappingItems', function () {\n\t\tit('should correctly stack items on resize when their primary coordinates do not stack', function () {\n\t\t\tGridsterCtrl.putItem(item1x1, 0, 0);\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 2);\n\t\t\tGridsterCtrl.putItem(item2x1, 1, 0);\n\n\t\t\t// verify they are still where we put them\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(1, 0)).toBe(item2x1);\n\n\t\t\titem2x1.sizeX = 3;\n\t\t\tGridsterCtrl.moveOverlappingItems(item2x1);\n\t\t\texpect(GridsterCtrl.getItem(1, 2)).toBe(item2x1);\n\n\t\t\texpect(item2x2.row).toBe(2);\n\t\t});\n\n\t\tit('should correctly push items down', function () {\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 0);\n\t\t\tGridsterCtrl.putItem(item1x1, 2, 0);\n\t\t\tGridsterCtrl.putItem(item1x2, 1, 1);\n\t\t\tGridsterCtrl.floatItemsUp();\n\n\t\t\texpect(item2x2.row).toBe(2);\n\t\t\texpect(item2x2.col).toBe(0);\n\n\t\t\texpect(GridsterCtrl.getItem(4, 0)).toBe(item1x1);\n\n\t\t\texpect(item1x2.row).toBe(0);\n\t\t\texpect(item1x2.col).toBe(1);\n\t\t});\n\n\t\tit('should correctly push items down', function () {\n\t\t\tGridsterCtrl.putItem(item1x2, 0, 0);\n\t\t\tGridsterCtrl.putItem(item2x1, 0, 1);\n\t\t\tGridsterCtrl.putItem(item1x1, 1, 2);\n\n\t\t\titem1x2.sizeX = 2;\n\t\t\tGridsterCtrl.moveOverlappingItems(item1x2);\n\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x2);\n\t\t\texpect(GridsterCtrl.getItem(2, 1)).toBe(item2x1);\n\t\t\texpect(GridsterCtrl.getItem(3, 2)).toBe(item1x1);\n\t\t});\n\t});\n});","'use strict';\n\n/* global browser */\n/* global element */\n/* global by */\n\ndescribe('Controller: GridsterCtrl', function() {\n\tvar items,\n\t\tfirstItem;\n\n\tbeforeEach(function() {\n\t\tbrowser.get('test.html');\n\t\tbrowser.driver.manage()\n\t\t\t.window()\n\t\t\t.setSize(1000, 1000);\n\t\titems = element.all(by.css('[gridster-item]'));\n\t\tfirstItem = items.get(0);\n\t});\n\n\tit('should have a page with elements', function() {\n\t\telement.all(by.repeater('item in standardItems')).then(function(items) {\n\t\t\texpect(items.length).toEqual(11);\n\t\t});\n\n\t\tbrowser.findElement(by.css('h2:first-child')).then(function(el) {\n\t\t\treturn el.getText().then(function(text) {\n\t\t\t\texpect(text).toBe('Standard Items');\n\t\t\t});\n\t\t});\n\t});\n\n\tit('should allow the user to enter a size', function() {\n\t\tvar width = 0;\n\n\t\tfirstItem.getSize().then(function(size) {\n\t\t\texpect(size.width).toBeGreaterThan(0);\n\t\t\twidth = size.width;\n\t\t}).then(function() {\n\t\t\treturn firstItem.element(by.model('item.sizeX'));\n\t\t}).then(function(input) {\n\t\t\treturn input.sendKeys('2').then(function() {\n\t\t\t\tinput.sendKeys(protractor.Key.TAB);\n\t\t\t});\n\t\t}).then(function() {\n\t\t\treturn firstItem.getSize();\n\t\t}).then(function(size) {\n\t\t\texpect(size.width).toBeGreaterThan(width);\n\t\t});\n\t});\n\n\tit('should resize the row widths and heights', function() {\n\t\tvar initialSize;\n\n\t\tbrowser.driver.manage().window().setSize(1200, 1200);\n\t\tfirstItem.getSize()\n\t\t\t.then(function setInitialSize(size) {\n\t\t\t\tinitialSize = size;\n\t\t\t})\n\t\t\t.then(function() {\n\t\t\t\tbrowser.driver.manage().window().setSize(1000, 1000);\n\t\t\t\tfirstItem.getSize().then(function(newSize) {\n\t\t\t\t\texpect(newSize.width).toBeLessThan(initialSize.width);\n\t\t\t\t\texpect(newSize.height).toBeLessThan(initialSize.height);\n\t\t\t\t});\n\t\t\t});\n\t});\n});\n","'use strict';\n\ndescribe('gridster directive', function() {\n\n\tbeforeEach(module('gridster'));\n\n\tvar $scope;\n\tvar GridsterCtrl;\n\tvar $el;\n\tvar startCount;\n\tvar resizeCount;\n\tvar stopCount;\n\tvar broadcastOnRootScope;\n\n\tvar dragHelper = function(el, dx, dy) {\n\t\tel.simulate('mouseover').simulate('drag', {\n\t\t\tmoves: 1,\n\t\t\tdx: dx,\n\t\t\tdy: dy\n\t\t});\n\t};\n\n\tbeforeEach(inject(function($rootScope, $compile) {\n\t\tbroadcastOnRootScope = spyOn($rootScope, '$broadcast').and.callThrough();\n\n\t\t$scope = $rootScope.$new();\n\t\tstartCount = resizeCount = stopCount = 0;\n\n\t\t$scope.opts = {\n\t\t\tminRows: 3,\n\t\t\tresizable: {\n\t\t\t\tenabled: true,\n\t\t\t\thandles: ['n', 'e', 's', 'w', 'se', 'sw'],\n\t\t\t\tstart: function() {\n\t\t\t\t\tstartCount++;\n\t\t\t\t},\n\t\t\t\tresize: function() {\n\t\t\t\t\tresizeCount++;\n\t\t\t\t},\n\t\t\t\tstop: function() {\n\t\t\t\t\tstopCount++;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t$scope.dashboard = {\n\t\t\twidgets: [{\n\t\t\t\tid: 1,\n\t\t\t\trow: 0,\n\t\t\t\tcol: 0,\n\t\t\t\tsizeX: 1,\n\t\t\t\tsizeY: 1\n\t\t\t}, {\n\t\t\t\tid: 2,\n\t\t\t\trow: 0,\n\t\t\t\tcol: 3,\n\t\t\t\tsizeX: 2,\n\t\t\t\tsizeY: 1\n\t\t\t}, {\n\t\t\t\tid: 3,\n\t\t\t\trow: 1,\n\t\t\t\tcol: 3,\n\t\t\t\tsizeX: 2,\n\t\t\t\tsizeY: 2\n\t\t\t}]\n\t\t};\n\n\t\t$el = angular.element('<div gridster=\"opts\" style=\"width: 1000px;\">' +\n\t\t\t'<ul><li gridster-item=\"widget\" ng-repeat=\"widget in dashboard.widgets\">' +\n\t\t\t'</div>');\n\n\t\t$el.appendTo(document.body); // append to body so jquery-simulate works\n\n\t\t$compile($el)($scope);\n\t\t$scope.$digest();\n\n\t\tGridsterCtrl = $el.controller('gridster');\n\t}));\n\n\n\tit('should add a class of gridster', function() {\n\t\texpect($el.hasClass('gridster')).toBe(true);\n\t});\n\n\tit('should override options', function() {\n\t\texpect(GridsterCtrl.minRows).toBe($scope.opts.minRows);\n\t});\n\n\tit('should add widgets to DOM', function() {\n\t\texpect($el.find('li').length).toBe($scope.dashboard.widgets.length);\n\t});\n\n\tit('should initialize resizable', function() {\n\t\tvar $widget = $el.find('li:first-child');\n\n\t\texpect($widget.find('.handle-s').length).toBe(1);\n\t});\n\n\tit('should update widget dimensions on resize & trigger custom resize events', function() {\n\t\tvar $widget = $el.find('li:first-child');\n\t\tvar handle = $widget.find('.handle-e');\n\n\t\texpect($widget.width()).toBe(155);\n\t\texpect($scope.dashboard.widgets[0].sizeX).toBe(1);\n\t\texpect(startCount).toBe(0);\n\t\texpect(resizeCount).toBe(0);\n\t\texpect(stopCount).toBe(0);\n\n\t\tdragHelper(handle, 50); // should resize to next width step\n\n\t\texpect($widget.width()).toBe(320);\n\t\texpect($scope.dashboard.widgets[0].sizeX).toBe(2);\n\t\texpect(startCount).toBe(1);\n\t\texpect(resizeCount).toBe(1);\n\t\texpect(stopCount).toBe(1);\n\t});\n\n\tit('should broadcast \"gridster-item-resized\" event on resize', function() {\n\t\t// arrange\n\t\tvar eHandle = $el.find('li:first-child').find('.handle-e');\n\t\tvar sHandle = $el.find('li:first-child').find('.handle-s');\n\t\tbroadcastOnRootScope.calls.reset();\n\n\t\t// act\n\t\tdragHelper(eHandle, 50);\n\n\t\t// assert\n\t\texpect(broadcastOnRootScope).toHaveBeenCalledWith('gridster-item-resized', jasmine.objectContaining({\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 1\n\t\t}));\n\n\t\t// arrange\n\t\tbroadcastOnRootScope.calls.reset();\n\n\t\t// act\n\t\tdragHelper(sHandle, 0, 50);\n\n\t\t// assert\n\t\texpect(broadcastOnRootScope).toHaveBeenCalledWith('gridster-item-resized', jasmine.objectContaining({\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 2\n\t\t}));\n\t});\n\n});\n","'use strict';\n\ndescribe('Controller: GridsterItemCtrl', function() {\n\t// load the controller's module\n\tbeforeEach(module('gridster'));\n\n\tvar gridster,\n\t\tconfig,\n\t\tscope,\n\t\titem1x1,\n\t\titem2x1,\n\t\titem1x2,\n\t\titem2x2,\n\t\tgridsterItem;\n\n\t// Initialize the controller and a mock scope\n\tbeforeEach(inject(function($controller, $rootScope) {\n\t\tscope = $rootScope.$new();\n\n\t\tconfig = {\n\t\t\tcolWidth: 100,\n\t\t\trowHeight: 100,\n\t\t\tcolumns: 6,\n\t\t\tmargins: [10, 10],\n\t\t\tdefaultHeight: 1,\n\t\t\tdefaultWidth: 2,\n\t\t\tminRows: 2,\n\t\t\tmaxRows: 100,\n\t\t\tmobileBreakPoint: 600,\n\t\t\tdefaultSizeX: 3,\n\t\t\tdefaultSizeY: 4\n\t\t};\n\n\t\tgridster = $controller('GridsterCtrl');\n\t\tgridsterItem = $controller('GridsterItemCtrl');\n\n\t\titem1x1 = {\n\t\t\tsizeX: 1,\n\t\t\tsizeY: 1,\n\t\t\tid: '1x1'\n\t\t};\n\t\titem2x1 = {\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 1,\n\t\t\tid: '2x1'\n\t\t};\n\t\titem2x2 = {\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 2,\n\t\t\tid: '2x2'\n\t\t};\n\t\titem1x2 = {\n\t\t\tsizeX: 1,\n\t\t\tsizeY: 2,\n\t\t\tid: '1x2'\n\t\t};\n\n\t\tgridster.setOptions(config);\n\t\tgridsterItem.init(null, gridster);\n\t}));\n\n\tit('should get defaults from gridster', function() {\n\t\texpect(gridsterItem.sizeX).toBe(config.defaultSizeX);\n\t\texpect(gridsterItem.sizeY).toBe(config.defaultSizeY);\n\t});\n\n});\n","'use strict';\n\ndescribe('GridsterCtrl', function() {\n\n\t// load the controller's module\n\tbeforeEach(module('gridster'));\n\n\tvar GridsterCtrl,\n\t\titem1x1,\n\t\titem2x1,\n\t\titem1x2,\n\t\titem2x2;\n\n\t// Initialize the controller\n\tbeforeEach(inject(function($controller) {\n\t\titem1x1 = {\n\t\t\tsizeX: 1,\n\t\t\tsizeY: 1,\n\t\t\tid: '1x1'\n\t\t};\n\t\titem2x1 = {\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 1,\n\t\t\tid: '2x1'\n\t\t};\n\t\titem2x2 = {\n\t\t\tsizeX: 2,\n\t\t\tsizeY: 2,\n\t\t\tid: '2x2'\n\t\t};\n\t\titem1x2 = {\n\t\t\tsizeX: 1,\n\t\t\tsizeY: 2,\n\t\t\tid: '1x2'\n\t\t};\n\n\t\tvar config = [item1x1, item2x1, item2x2, item1x2];\n\n\t\tGridsterCtrl = $controller('GridsterCtrl');\n\t\tGridsterCtrl.setOptions(config);\n\t}));\n\n\tit('should have a grid Array', function() {\n\t\texpect(GridsterCtrl.grid.constructor).toBe(Array);\n\t});\n\n\tdescribe('options', function() {\n\t\tit('should set default options', function() {\n\t\t\texpect(GridsterCtrl.columns).toBe(6);\n\t\t\texpect(GridsterCtrl.width).toBe('auto');\n\t\t\texpect(GridsterCtrl.colWidth).toBe('auto');\n\t\t\texpect(GridsterCtrl.rowHeight).toBe('match');\n\t\t\texpect(GridsterCtrl.margins).toEqual([10, 10]);\n\t\t\texpect(GridsterCtrl.isMobile).toBe(false);\n\t\t\texpect(GridsterCtrl.minColumns).toEqual(1);\n\t\t\texpect(GridsterCtrl.minRows).toBe(1);\n\t\t\texpect(GridsterCtrl.maxRows).toBe(100);\n\t\t\texpect(GridsterCtrl.defaultSizeX).toBe(2);\n\t\t\texpect(GridsterCtrl.defaultSizeY).toBe(1);\n\t\t\texpect(GridsterCtrl.mobileBreakPoint).toBe(600);\n\t\t\texpect(GridsterCtrl.resizable.enabled).toBe(true);\n\t\t\texpect(GridsterCtrl.draggable.enabled).toBe(true);\n\t\t});\n\n\t\t// todo: move these to e2e test\n\t\t//\t\tit('should resolve smart options', function() {\n\t\t//\t\t\texpect(GridsterCtrl.curWidth).toBe(400); // inherit element width\n\t\t//\t\t\texpect(GridsterCtrl.curColWidth).toBe(65); // (400 - 10) / 6\n\t\t//\t\t\texpect(GridsterCtrl.curRowHeight).toBe(65); // match curColWidth\n\t\t//\t\t});\n\n\t\tit('should update options', function() {\n\t\t\tGridsterCtrl.setOptions({\n\t\t\t\twidth: 1200,\n\t\t\t\tcolWidth: 120,\n\t\t\t\trowHeight: 140,\n\t\t\t\tcolumns: 7,\n\t\t\t\tmargins: [15, 15]\n\t\t\t});\n\n\t\t\texpect(GridsterCtrl.width).toBe(1200);\n\t\t\texpect(GridsterCtrl.colWidth).toBe(120);\n\t\t\texpect(GridsterCtrl.rowHeight).toBe(140);\n\t\t\texpect(GridsterCtrl.columns).toBe(7);\n\t\t\texpect(GridsterCtrl.margins).toEqual([15, 15]);\n\n\t\t\t// todo: move these to e2e test\n\t\t\t//\t\t\texpect(GridsterCtrl.curColWidth).toBe(120);\n\t\t\t//\t\t\texpect(GridsterCtrl.curRowHeight).toBe(140);\n\t\t});\n\t});\n\n\tdescribe('autoSetItemPosition', function() {\n\t\tit('should place an item in the first available space', function() {\n\t\t\tGridsterCtrl.putItem(item2x1, 0, 1);\n\t\t\tGridsterCtrl.autoSetItemPosition(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\n\t\t\tGridsterCtrl.autoSetItemPosition(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 3)).toBe(item2x2);\n\t\t});\n\n\t\tit('should respect item size', function() {\n\t\t\tGridsterCtrl.putItem(item2x1, 0, 1);\n\n\t\t\tGridsterCtrl.autoSetItemPosition(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 3)).toBe(item2x2);\n\t\t});\n\t});\n\n\tdescribe('putItem', function() {\n\t\tit('should be able to place an item with coordinates', function() {\n\t\t\tGridsterCtrl.putItem(item1x1, 2, 3);\n\t\t\texpect(GridsterCtrl.getItem(2, 3)).toBe(item1x1);\n\t\t});\n\n\t\tit('should place an item without coordinates into empty grid', function() {\n\t\t\tGridsterCtrl.putItem(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t});\n\n\t\tit('should place item into without coordinates into the next available position', function() {\n\t\t\t// place 1x1 at 0x0\n\t\t\tGridsterCtrl.putItem(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\n\t\t\t// place 2x1 at 0x2\n\t\t\titem2x1.row = 0;\n\t\t\titem2x1.col = 2;\n\t\t\tGridsterCtrl.putItem(item2x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x1);\n\n\t\t\t// place 1x2 in without coordinates\n\t\t\tGridsterCtrl.putItem(item1x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 1)).toBe(item1x2); // should stick it at 0x1\n\n\t\t\t// place 2x2 without coordinates\n\t\t\tGridsterCtrl.putItem(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 4)).toBe(item2x2); // should stick it at 0x4\n\t\t});\n\n\t\tit('should not allow items to be placed with negative indices', function() {\n\t\t\tGridsterCtrl.putItem(item1x1, -1, -1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t\texpect(item1x1.row).toBe(0);\n\t\t\texpect(item1x1.col).toBe(0);\n\t\t});\n\n\t\tit('should not float items until told to', function() {\n\t\t\tGridsterCtrl.putItem(item1x1, 3, 0);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(null);\n\t\t\texpect(GridsterCtrl.getItem(3, 0)).toBe(item1x1);\n\t\t});\n\n\t\tit('should not create two references to the same item', function() {\n\t\t\tGridsterCtrl.putItem(item1x1, 0, 0);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t\tGridsterCtrl.putItem(item1x1, 0, 4);\n\t\t\texpect(GridsterCtrl.getItem(0, 4)).toBe(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(null);\n\t\t});\n\t});\n\n\tdescribe('getItem', function() {\n\t\tit('should match any column of a multi-column item', function() {\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 2);\n\n\t\t\t// all 4 corners should return the same item\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(1, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(0, 3)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(1, 3)).toBe(item2x2);\n\t\t});\n\t});\n\n\tdescribe('getItems', function() {\n\t\tit('should get items within an area', function() {\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 1);\n\t\t\tGridsterCtrl.putItem(item2x1, 2, 0);\n\n\t\t\t// verify they are still where we put them\n\t\t\texpect(GridsterCtrl.getItem(0, 1)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(2, 0)).toBe(item2x1);\n\n\t\t\tvar items = GridsterCtrl.getItems(1, 0, 2, 1);\n\t\t\texpect(items.length).toBe(1);\n\t\t\texpect(items[0]).toBe(item2x2);\n\t\t});\n\t});\n\n\tdescribe('floatItemsUp', function() {\n\t\tit('should float an item up', function() {\n\t\t\tGridsterCtrl.putItem(item1x1, 3, 0);\n\t\t\tGridsterCtrl.floatItemsUp();\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t});\n\n\t\tit('should stack items when they float up', function() {\n\t\t\tGridsterCtrl.putItem(item1x1, 3, 0);\n\t\t\tGridsterCtrl.floatItemsUp();\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\n\t\t\tGridsterCtrl.putItem(item2x1, 3, 0);\n\t\t\tGridsterCtrl.floatItemsUp();\n\t\t\texpect(GridsterCtrl.getItem(1, 0)).toBe(item2x1);\n\n\t\t\tGridsterCtrl.putItem(item1x1, 3, 1);\n\t\t\tGridsterCtrl.floatItemsUp();\n\t\t\texpect(GridsterCtrl.getItem(1, 1)).toBe(item1x1);\n\t\t});\n\n\t\tit('should correctly stack multi-column items when their primary coordinates do not stack', function() {\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 2);\n\t\t\tGridsterCtrl.putItem(item2x1, 2, 1);\n\n\t\t\t// verify they are still where we put them\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(2, 1)).toBe(item2x1);\n\n\t\t\t// allow them to float up\n\t\t\tGridsterCtrl.floatItemsUp();\n\n\t\t\t// verify they are still where we put them\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(2, 1)).toBe(item2x1);\n\t\t});\n\t});\n\n\tdescribe('moveOverlappingItems', function() {\n\t\tit('should correctly stack items on resize when their primary coordinates do not stack', function() {\n\t\t\tGridsterCtrl.putItem(item1x1, 0, 0);\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 2);\n\t\t\tGridsterCtrl.putItem(item2x1, 1, 0);\n\n\t\t\t// verify they are still where we put them\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x1);\n\t\t\texpect(GridsterCtrl.getItem(0, 2)).toBe(item2x2);\n\t\t\texpect(GridsterCtrl.getItem(1, 0)).toBe(item2x1);\n\n\t\t\titem2x1.sizeX = 3;\n\t\t\tGridsterCtrl.moveOverlappingItems(item2x1);\n\t\t\texpect(GridsterCtrl.getItem(1, 2)).toBe(item2x1);\n\n\t\t\texpect(item2x2.row).toBe(2);\n\t\t});\n\n\t\tit('should correctly push items down', function() {\n\t\t\tGridsterCtrl.putItem(item2x2, 0, 0);\n\t\t\tGridsterCtrl.putItem(item1x1, 2, 0);\n\t\t\tGridsterCtrl.putItem(item1x2, 1, 1);\n\t\t\tGridsterCtrl.floatItemsUp();\n\n\t\t\texpect(item2x2.row).toBe(2);\n\t\t\texpect(item2x2.col).toBe(0);\n\n\t\t\texpect(GridsterCtrl.getItem(4, 0)).toBe(item1x1);\n\n\t\t\texpect(item1x2.row).toBe(0);\n\t\t\texpect(item1x2.col).toBe(1);\n\t\t});\n\n\t\tit('should correctly push items down', function() {\n\t\t\tGridsterCtrl.putItem(item1x2, 0, 0);\n\t\t\tGridsterCtrl.putItem(item2x1, 0, 1);\n\t\t\tGridsterCtrl.putItem(item1x1, 1, 2);\n\n\t\t\titem1x2.sizeX = 2;\n\t\t\tGridsterCtrl.moveOverlappingItems(item1x2);\n\n\t\t\texpect(GridsterCtrl.getItem(0, 0)).toBe(item1x2);\n\t\t\texpect(GridsterCtrl.getItem(2, 1)).toBe(item2x1);\n\t\t\texpect(GridsterCtrl.getItem(3, 2)).toBe(item1x1);\n\t\t});\n\t});\n});\n"]}